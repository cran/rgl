<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Duncan Murdoch" />

<meta name="date" content="2015-04-30" />

<title>User Interaction in WebGL</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<link href="data:text/css,body%20%7B%0A%20%20background%2Dcolor%3A%20%23fff%3B%0A%20%20margin%3A%201em%20auto%3B%0A%20%20max%2Dwidth%3A%20700px%3B%0A%20%20overflow%3A%20visible%3B%0A%20%20padding%2Dleft%3A%202em%3B%0A%20%20padding%2Dright%3A%202em%3B%0A%20%20font%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0A%20%20font%2Dsize%3A%2014px%3B%0A%20%20line%2Dheight%3A%201%2E35%3B%0A%7D%0A%0A%23header%20%7B%0A%20%20text%2Dalign%3A%20center%3B%0A%7D%0A%0A%23TOC%20%7B%0A%20%20clear%3A%20both%3B%0A%20%20margin%3A%200%200%2010px%2010px%3B%0A%20%20padding%3A%204px%3B%0A%20%20width%3A%20400px%3B%0A%20%20border%3A%201px%20solid%20%23CCCCCC%3B%0A%20%20border%2Dradius%3A%205px%3B%0A%0A%20%20background%2Dcolor%3A%20%23f6f6f6%3B%0A%20%20font%2Dsize%3A%2013px%3B%0A%20%20line%2Dheight%3A%201%2E3%3B%0A%7D%0A%20%20%23TOC%20%2Etoctitle%20%7B%0A%20%20%20%20font%2Dweight%3A%20bold%3B%0A%20%20%20%20font%2Dsize%3A%2015px%3B%0A%20%20%20%20margin%2Dleft%3A%205px%3B%0A%20%20%7D%0A%0A%20%20%23TOC%20ul%20%7B%0A%20%20%20%20padding%2Dleft%3A%2040px%3B%0A%20%20%20%20margin%2Dleft%3A%20%2D1%2E5em%3B%0A%20%20%20%20margin%2Dtop%3A%205px%3B%0A%20%20%20%20margin%2Dbottom%3A%205px%3B%0A%20%20%7D%0A%20%20%23TOC%20ul%20ul%20%7B%0A%20%20%20%20margin%2Dleft%3A%20%2D2em%3B%0A%20%20%7D%0A%20%20%23TOC%20li%20%7B%0A%20%20%20%20line%2Dheight%3A%2016px%3B%0A%20%20%7D%0A%0Atable%20%7B%0A%20%20margin%3A%201em%20auto%3B%0A%20%20border%2Dwidth%3A%201px%3B%0A%20%20border%2Dcolor%3A%20%23DDDDDD%3B%0A%20%20border%2Dstyle%3A%20outset%3B%0A%20%20border%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0A%20%20border%2Dwidth%3A%202px%3B%0A%20%20padding%3A%205px%3B%0A%20%20border%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0A%20%20border%2Dwidth%3A%201px%3B%0A%20%20border%2Dstyle%3A%20inset%3B%0A%20%20line%2Dheight%3A%2018px%3B%0A%20%20padding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0A%20%20border%2Dleft%2Dstyle%3A%20none%3B%0A%20%20border%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0A%20%20background%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0A%0Ap%20%7B%0A%20%20margin%3A%200%2E5em%200%3B%0A%7D%0A%0Ablockquote%20%7B%0A%20%20background%2Dcolor%3A%20%23f6f6f6%3B%0A%20%20padding%3A%200%2E25em%200%2E75em%3B%0A%7D%0A%0Ahr%20%7B%0A%20%20border%2Dstyle%3A%20solid%3B%0A%20%20border%3A%20none%3B%0A%20%20border%2Dtop%3A%201px%20solid%20%23777%3B%0A%20%20margin%3A%2028px%200%3B%0A%7D%0A%0Adl%20%7B%0A%20%20margin%2Dleft%3A%200%3B%0A%7D%0A%20%20dl%20dd%20%7B%0A%20%20%20%20margin%2Dbottom%3A%2013px%3B%0A%20%20%20%20margin%2Dleft%3A%2013px%3B%0A%20%20%7D%0A%20%20dl%20dt%20%7B%0A%20%20%20%20font%2Dweight%3A%20bold%3B%0A%20%20%7D%0A%0Aul%20%7B%0A%20%20margin%2Dtop%3A%200%3B%0A%7D%0A%20%20ul%20li%20%7B%0A%20%20%20%20list%2Dstyle%3A%20circle%20outside%3B%0A%20%20%7D%0A%20%20ul%20ul%20%7B%0A%20%20%20%20margin%2Dbottom%3A%200%3B%0A%20%20%7D%0A%0Apre%2C%20code%20%7B%0A%20%20background%2Dcolor%3A%20%23f7f7f7%3B%0A%20%20border%2Dradius%3A%203px%3B%0A%20%20color%3A%20%23333%3B%0A%7D%0Apre%20%7B%0A%20%20white%2Dspace%3A%20pre%2Dwrap%3B%20%20%20%20%2F%2A%20Wrap%20long%20lines%20%2A%2F%0A%20%20border%2Dradius%3A%203px%3B%0A%20%20margin%3A%205px%200px%2010px%200px%3B%0A%20%20padding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0A%20%20background%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0A%0Acode%20%7B%0A%20%20font%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0A%20%20font%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0A%20%20padding%3A%202px%200px%3B%0A%7D%0A%0Adiv%2Efigure%20%7B%0A%20%20text%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0A%20%20background%2Dcolor%3A%20%23FFFFFF%3B%0A%20%20padding%3A%202px%3B%0A%20%20border%3A%201px%20solid%20%23DDDDDD%3B%0A%20%20border%2Dradius%3A%203px%3B%0A%20%20border%3A%201px%20solid%20%23CCCCCC%3B%0A%20%20margin%3A%200%205px%3B%0A%7D%0A%0Ah1%20%7B%0A%20%20margin%2Dtop%3A%200%3B%0A%20%20font%2Dsize%3A%2035px%3B%0A%20%20line%2Dheight%3A%2040px%3B%0A%7D%0A%0Ah2%20%7B%0A%20%20border%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0A%20%20padding%2Dtop%3A%2010px%3B%0A%20%20padding%2Dbottom%3A%202px%3B%0A%20%20font%2Dsize%3A%20145%25%3B%0A%7D%0A%0Ah3%20%7B%0A%20%20border%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0A%20%20padding%2Dtop%3A%2010px%3B%0A%20%20font%2Dsize%3A%20120%25%3B%0A%7D%0A%0Ah4%20%7B%0A%20%20border%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0A%20%20margin%2Dleft%3A%208px%3B%0A%20%20font%2Dsize%3A%20105%25%3B%0A%7D%0A%0Ah5%2C%20h6%20%7B%0A%20%20border%2Dbottom%3A%201px%20solid%20%23ccc%3B%0A%20%20font%2Dsize%3A%20105%25%3B%0A%7D%0A%0Aa%20%7B%0A%20%20color%3A%20%230033dd%3B%0A%20%20text%2Ddecoration%3A%20none%3B%0A%7D%0A%20%20a%3Ahover%20%7B%0A%20%20%20%20color%3A%20%236666ff%3B%20%7D%0A%20%20a%3Avisited%20%7B%0A%20%20%20%20color%3A%20%23800080%3B%20%7D%0A%20%20a%3Avisited%3Ahover%20%7B%0A%20%20%20%20color%3A%20%23BB00BB%3B%20%7D%0A%20%20a%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0A%20%20%20%20text%2Ddecoration%3A%20underline%3B%20%7D%0A%20%20a%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0A%20%20%20%20text%2Ddecoration%3A%20underline%3B%20%7D%0A%0A%2F%2A%20Class%20described%20in%20https%3A%2F%2Fbenjeffrey%2Ecom%2Fposts%2Fpandoc%2Dsyntax%2Dhighlighting%2Dcss%0A%20%20%20Colours%20from%20https%3A%2F%2Fgist%2Egithub%2Ecom%2Frobsimmons%2F1172277%20%2A%2F%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%2F%2A%20Keyword%20%2A%2F%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%2F%2A%20DataType%20%2A%2F%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%2F%2A%20DecVal%20%28decimal%20values%29%20%2A%2F%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20BaseN%20%2A%2F%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20Float%20%2A%2F%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20Char%20%2A%2F%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20String%20%2A%2F%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%2F%2A%20Comment%20%2A%2F%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%2F%2A%20OtherToken%20%2A%2F%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%2F%2A%20AlertToken%20%2A%2F%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%2F%2A%20Function%20calls%20%2A%2F%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%2F%2A%20ErrorTok%20%2A%2F%0A%0A" rel="stylesheet" type="text/css" />

</head>

<body>



<div id="header">
<h1 class="title">User Interaction in WebGL</h1>
<h4 class="author"><em>Duncan Murdoch</em></h4>
<h4 class="date"><em>April 30, 2015</em></h4>
</div>

<div id="TOC">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#autogenerated-controls">Autogenerated controls</a></li>
<li><a href="#user-defined-mouse-controls">User Defined Mouse Controls</a></li>
<li><a href="#reference-for-rglclass">Reference for <code>rglClass</code></a><ul>
<li><a href="#methods">Methods</a></li>
<li><a href="#properties">Properties</a></li>
</ul></li>
<li><a href="#index">Index</a></li>
</ul>
</div>

<style>
.nostripes tr.even {background-color: white;}
table {border-style: none;}
table th {border-style: none;}
table td {border-style: none;}
a[href^=".."] {text-decoration: underline;}
</style>
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>This document describes how to use embedded Javascript to control a WebGL display in an HTML document. For more general information, see <a href="rgl.html">rgl Overview</a>.</p>
<p>We start with two simple examples. The next section gives reference information.</p>
<p>Consider the simple plot of the iris data. We insert a code chunk with label <code>plot3d</code> (which will be used below).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">with</span>(iris, <span class="kw">plot3d</span>(Sepal.Length, Sepal.Width, Petal.Length, 
                  <span class="dt">type=</span><span class="st">&quot;s&quot;</span>, <span class="dt">col=</span><span class="kw">as.numeric</span>(Species)))
subid &lt;-<span class="st"> </span><span class="kw">currentSubscene3d</span>()</code></pre>
<script src="data:application/x-javascript,CanvasMatrix4%3Dfunction%28m%29%7Bif%28typeof%20m%3D%3D%27object%27%29%7Bif%28%22length%22in%20m%26%26m%2Elength%3E%3D16%29%7Bthis%2Eload%28m%5B0%5D%2Cm%5B1%5D%2Cm%5B2%5D%2Cm%5B3%5D%2Cm%5B4%5D%2Cm%5B5%5D%2Cm%5B6%5D%2Cm%5B7%5D%2Cm%5B8%5D%2Cm%5B9%5D%2Cm%5B10%5D%2Cm%5B11%5D%2Cm%5B12%5D%2Cm%5B13%5D%2Cm%5B14%5D%2Cm%5B15%5D%29%3Breturn%7Delse%20if%28m%20instanceof%20CanvasMatrix4%29%7Bthis%2Eload%28m%29%3Breturn%7D%7Dthis%2EmakeIdentity%28%29%7D%3BCanvasMatrix4%2Eprototype%2Eload%3Dfunction%28%29%7Bif%28arguments%2Elength%3D%3D1%26%26typeof%20arguments%5B0%5D%3D%3D%27object%27%29%7Bvar%20matrix%3Darguments%5B0%5D%3Bif%28%22length%22in%20matrix%26%26matrix%2Elength%3D%3D16%29%7Bthis%2Em11%3Dmatrix%5B0%5D%3Bthis%2Em12%3Dmatrix%5B1%5D%3Bthis%2Em13%3Dmatrix%5B2%5D%3Bthis%2Em14%3Dmatrix%5B3%5D%3Bthis%2Em21%3Dmatrix%5B4%5D%3Bthis%2Em22%3Dmatrix%5B5%5D%3Bthis%2Em23%3Dmatrix%5B6%5D%3Bthis%2Em24%3Dmatrix%5B7%5D%3Bthis%2Em31%3Dmatrix%5B8%5D%3Bthis%2Em32%3Dmatrix%5B9%5D%3Bthis%2Em33%3Dmatrix%5B10%5D%3Bthis%2Em34%3Dmatrix%5B11%5D%3Bthis%2Em41%3Dmatrix%5B12%5D%3Bthis%2Em42%3Dmatrix%5B13%5D%3Bthis%2Em43%3Dmatrix%5B14%5D%3Bthis%2Em44%3Dmatrix%5B15%5D%3Breturn%7Dif%28arguments%5B0%5Dinstanceof%20CanvasMatrix4%29%7Bthis%2Em11%3Dmatrix%2Em11%3Bthis%2Em12%3Dmatrix%2Em12%3Bthis%2Em13%3Dmatrix%2Em13%3Bthis%2Em14%3Dmatrix%2Em14%3Bthis%2Em21%3Dmatrix%2Em21%3Bthis%2Em22%3Dmatrix%2Em22%3Bthis%2Em23%3Dmatrix%2Em23%3Bthis%2Em24%3Dmatrix%2Em24%3Bthis%2Em31%3Dmatrix%2Em31%3Bthis%2Em32%3Dmatrix%2Em32%3Bthis%2Em33%3Dmatrix%2Em33%3Bthis%2Em34%3Dmatrix%2Em34%3Bthis%2Em41%3Dmatrix%2Em41%3Bthis%2Em42%3Dmatrix%2Em42%3Bthis%2Em43%3Dmatrix%2Em43%3Bthis%2Em44%3Dmatrix%2Em44%3Breturn%7D%7Dthis%2EmakeIdentity%28%29%7D%3BCanvasMatrix4%2Eprototype%2EgetAsArray%3Dfunction%28%29%7Breturn%5Bthis%2Em11%2Cthis%2Em12%2Cthis%2Em13%2Cthis%2Em14%2Cthis%2Em21%2Cthis%2Em22%2Cthis%2Em23%2Cthis%2Em24%2Cthis%2Em31%2Cthis%2Em32%2Cthis%2Em33%2Cthis%2Em34%2Cthis%2Em41%2Cthis%2Em42%2Cthis%2Em43%2Cthis%2Em44%5D%7D%3BCanvasMatrix4%2Eprototype%2EgetAsWebGLFloatArray%3Dfunction%28%29%7Breturn%20new%20WebGLFloatArray%28this%2EgetAsArray%28%29%29%7D%3BCanvasMatrix4%2Eprototype%2EmakeIdentity%3Dfunction%28%29%7Bthis%2Em11%3D1%3Bthis%2Em12%3D0%3Bthis%2Em13%3D0%3Bthis%2Em14%3D0%3Bthis%2Em21%3D0%3Bthis%2Em22%3D1%3Bthis%2Em23%3D0%3Bthis%2Em24%3D0%3Bthis%2Em31%3D0%3Bthis%2Em32%3D0%3Bthis%2Em33%3D1%3Bthis%2Em34%3D0%3Bthis%2Em41%3D0%3Bthis%2Em42%3D0%3Bthis%2Em43%3D0%3Bthis%2Em44%3D1%7D%3BCanvasMatrix4%2Eprototype%2Etranspose%3Dfunction%28%29%7Bvar%20tmp%3Dthis%2Em12%3Bthis%2Em12%3Dthis%2Em21%3Bthis%2Em21%3Dtmp%3Btmp%3Dthis%2Em13%3Bthis%2Em13%3Dthis%2Em31%3Bthis%2Em31%3Dtmp%3Btmp%3Dthis%2Em14%3Bthis%2Em14%3Dthis%2Em41%3Bthis%2Em41%3Dtmp%3Btmp%3Dthis%2Em23%3Bthis%2Em23%3Dthis%2Em32%3Bthis%2Em32%3Dtmp%3Btmp%3Dthis%2Em24%3Bthis%2Em24%3Dthis%2Em42%3Bthis%2Em42%3Dtmp%3Btmp%3Dthis%2Em34%3Bthis%2Em34%3Dthis%2Em43%3Bthis%2Em43%3Dtmp%7D%3BCanvasMatrix4%2Eprototype%2Einvert%3Dfunction%28%29%7Bvar%20det%3Dthis%2E%5Fdeterminant4x4%28%29%3Bif%28Math%2Eabs%28det%29%3C1e%2D8%29return%20null%3Bthis%2E%5FmakeAdjoint%28%29%3Bthis%2Em11%2F%3Ddet%3Bthis%2Em12%2F%3Ddet%3Bthis%2Em13%2F%3Ddet%3Bthis%2Em14%2F%3Ddet%3Bthis%2Em21%2F%3Ddet%3Bthis%2Em22%2F%3Ddet%3Bthis%2Em23%2F%3Ddet%3Bthis%2Em24%2F%3Ddet%3Bthis%2Em31%2F%3Ddet%3Bthis%2Em32%2F%3Ddet%3Bthis%2Em33%2F%3Ddet%3Bthis%2Em34%2F%3Ddet%3Bthis%2Em41%2F%3Ddet%3Bthis%2Em42%2F%3Ddet%3Bthis%2Em43%2F%3Ddet%3Bthis%2Em44%2F%3Ddet%7D%3BCanvasMatrix4%2Eprototype%2Etranslate%3Dfunction%28x%2Cy%2Cz%29%7Bif%28x%3D%3Dundefined%29x%3D0%3Bif%28y%3D%3Dundefined%29y%3D0%3Bif%28z%3D%3Dundefined%29z%3D0%3Bvar%20matrix%3Dnew%20CanvasMatrix4%28%29%3Bmatrix%2Em41%3Dx%3Bmatrix%2Em42%3Dy%3Bmatrix%2Em43%3Dz%3Bthis%2EmultRight%28matrix%29%7D%3BCanvasMatrix4%2Eprototype%2Escale%3Dfunction%28x%2Cy%2Cz%29%7Bif%28x%3D%3Dundefined%29x%3D1%3Bif%28z%3D%3Dundefined%29%7Bif%28y%3D%3Dundefined%29%7By%3Dx%3Bz%3Dx%7Delse%20z%3D1%7Delse%20if%28y%3D%3Dundefined%29y%3Dx%3Bvar%20matrix%3Dnew%20CanvasMatrix4%28%29%3Bmatrix%2Em11%3Dx%3Bmatrix%2Em22%3Dy%3Bmatrix%2Em33%3Dz%3Bthis%2EmultRight%28matrix%29%7D%3BCanvasMatrix4%2Eprototype%2Erotate%3Dfunction%28angle%2Cx%2Cy%2Cz%29%7Bangle%3Dangle%2F180%2AMath%2EPI%3Bangle%2F%3D2%3Bvar%20sinA%3DMath%2Esin%28angle%29%3Bvar%20cosA%3DMath%2Ecos%28angle%29%3Bvar%20sinA2%3DsinA%2AsinA%3Bvar%20length%3DMath%2Esqrt%28x%2Ax%2By%2Ay%2Bz%2Az%29%3Bif%28length%3D%3D0%29%7Bx%3D0%3By%3D0%3Bz%3D1%7Delse%20if%28length%21%3D1%29%7Bx%2F%3Dlength%3By%2F%3Dlength%3Bz%2F%3Dlength%7Dvar%20mat%3Dnew%20CanvasMatrix4%28%29%3Bif%28x%3D%3D1%26%26y%3D%3D0%26%26z%3D%3D0%29%7Bmat%2Em11%3D1%3Bmat%2Em12%3D0%3Bmat%2Em13%3D0%3Bmat%2Em21%3D0%3Bmat%2Em22%3D1%2D2%2AsinA2%3Bmat%2Em23%3D2%2AsinA%2AcosA%3Bmat%2Em31%3D0%3Bmat%2Em32%3D%2D2%2AsinA%2AcosA%3Bmat%2Em33%3D1%2D2%2AsinA2%3Bmat%2Em14%3Dmat%2Em24%3Dmat%2Em34%3D0%3Bmat%2Em41%3Dmat%2Em42%3Dmat%2Em43%3D0%3Bmat%2Em44%3D1%7Delse%20if%28x%3D%3D0%26%26y%3D%3D1%26%26z%3D%3D0%29%7Bmat%2Em11%3D1%2D2%2AsinA2%3Bmat%2Em12%3D0%3Bmat%2Em13%3D%2D2%2AsinA%2AcosA%3Bmat%2Em21%3D0%3Bmat%2Em22%3D1%3Bmat%2Em23%3D0%3Bmat%2Em31%3D2%2AsinA%2AcosA%3Bmat%2Em32%3D0%3Bmat%2Em33%3D1%2D2%2AsinA2%3Bmat%2Em14%3Dmat%2Em24%3Dmat%2Em34%3D0%3Bmat%2Em41%3Dmat%2Em42%3Dmat%2Em43%3D0%3Bmat%2Em44%3D1%7Delse%20if%28x%3D%3D0%26%26y%3D%3D0%26%26z%3D%3D1%29%7Bmat%2Em11%3D1%2D2%2AsinA2%3Bmat%2Em12%3D2%2AsinA%2AcosA%3Bmat%2Em13%3D0%3Bmat%2Em21%3D%2D2%2AsinA%2AcosA%3Bmat%2Em22%3D1%2D2%2AsinA2%3Bmat%2Em23%3D0%3Bmat%2Em31%3D0%3Bmat%2Em32%3D0%3Bmat%2Em33%3D1%3Bmat%2Em14%3Dmat%2Em24%3Dmat%2Em34%3D0%3Bmat%2Em41%3Dmat%2Em42%3Dmat%2Em43%3D0%3Bmat%2Em44%3D1%7Delse%7Bvar%20x2%3Dx%2Ax%3Bvar%20y2%3Dy%2Ay%3Bvar%20z2%3Dz%2Az%3Bmat%2Em11%3D1%2D2%2A%28y2%2Bz2%29%2AsinA2%3Bmat%2Em12%3D2%2A%28x%2Ay%2AsinA2%2Bz%2AsinA%2AcosA%29%3Bmat%2Em13%3D2%2A%28x%2Az%2AsinA2%2Dy%2AsinA%2AcosA%29%3Bmat%2Em21%3D2%2A%28y%2Ax%2AsinA2%2Dz%2AsinA%2AcosA%29%3Bmat%2Em22%3D1%2D2%2A%28z2%2Bx2%29%2AsinA2%3Bmat%2Em23%3D2%2A%28y%2Az%2AsinA2%2Bx%2AsinA%2AcosA%29%3Bmat%2Em31%3D2%2A%28z%2Ax%2AsinA2%2By%2AsinA%2AcosA%29%3Bmat%2Em32%3D2%2A%28z%2Ay%2AsinA2%2Dx%2AsinA%2AcosA%29%3Bmat%2Em33%3D1%2D2%2A%28x2%2By2%29%2AsinA2%3Bmat%2Em14%3Dmat%2Em24%3Dmat%2Em34%3D0%3Bmat%2Em41%3Dmat%2Em42%3Dmat%2Em43%3D0%3Bmat%2Em44%3D1%7Dthis%2EmultRight%28mat%29%7D%3BCanvasMatrix4%2Eprototype%2EmultRight%3Dfunction%28mat%29%7Bvar%20m11%3D%28this%2Em11%2Amat%2Em11%2Bthis%2Em12%2Amat%2Em21%2Bthis%2Em13%2Amat%2Em31%2Bthis%2Em14%2Amat%2Em41%29%3Bvar%20m12%3D%28this%2Em11%2Amat%2Em12%2Bthis%2Em12%2Amat%2Em22%2Bthis%2Em13%2Amat%2Em32%2Bthis%2Em14%2Amat%2Em42%29%3Bvar%20m13%3D%28this%2Em11%2Amat%2Em13%2Bthis%2Em12%2Amat%2Em23%2Bthis%2Em13%2Amat%2Em33%2Bthis%2Em14%2Amat%2Em43%29%3Bvar%20m14%3D%28this%2Em11%2Amat%2Em14%2Bthis%2Em12%2Amat%2Em24%2Bthis%2Em13%2Amat%2Em34%2Bthis%2Em14%2Amat%2Em44%29%3Bvar%20m21%3D%28this%2Em21%2Amat%2Em11%2Bthis%2Em22%2Amat%2Em21%2Bthis%2Em23%2Amat%2Em31%2Bthis%2Em24%2Amat%2Em41%29%3Bvar%20m22%3D%28this%2Em21%2Amat%2Em12%2Bthis%2Em22%2Amat%2Em22%2Bthis%2Em23%2Amat%2Em32%2Bthis%2Em24%2Amat%2Em42%29%3Bvar%20m23%3D%28this%2Em21%2Amat%2Em13%2Bthis%2Em22%2Amat%2Em23%2Bthis%2Em23%2Amat%2Em33%2Bthis%2Em24%2Amat%2Em43%29%3Bvar%20m24%3D%28this%2Em21%2Amat%2Em14%2Bthis%2Em22%2Amat%2Em24%2Bthis%2Em23%2Amat%2Em34%2Bthis%2Em24%2Amat%2Em44%29%3Bvar%20m31%3D%28this%2Em31%2Amat%2Em11%2Bthis%2Em32%2Amat%2Em21%2Bthis%2Em33%2Amat%2Em31%2Bthis%2Em34%2Amat%2Em41%29%3Bvar%20m32%3D%28this%2Em31%2Amat%2Em12%2Bthis%2Em32%2Amat%2Em22%2Bthis%2Em33%2Amat%2Em32%2Bthis%2Em34%2Amat%2Em42%29%3Bvar%20m33%3D%28this%2Em31%2Amat%2Em13%2Bthis%2Em32%2Amat%2Em23%2Bthis%2Em33%2Amat%2Em33%2Bthis%2Em34%2Amat%2Em43%29%3Bvar%20m34%3D%28this%2Em31%2Amat%2Em14%2Bthis%2Em32%2Amat%2Em24%2Bthis%2Em33%2Amat%2Em34%2Bthis%2Em34%2Amat%2Em44%29%3Bvar%20m41%3D%28this%2Em41%2Amat%2Em11%2Bthis%2Em42%2Amat%2Em21%2Bthis%2Em43%2Amat%2Em31%2Bthis%2Em44%2Amat%2Em41%29%3Bvar%20m42%3D%28this%2Em41%2Amat%2Em12%2Bthis%2Em42%2Amat%2Em22%2Bthis%2Em43%2Amat%2Em32%2Bthis%2Em44%2Amat%2Em42%29%3Bvar%20m43%3D%28this%2Em41%2Amat%2Em13%2Bthis%2Em42%2Amat%2Em23%2Bthis%2Em43%2Amat%2Em33%2Bthis%2Em44%2Amat%2Em43%29%3Bvar%20m44%3D%28this%2Em41%2Amat%2Em14%2Bthis%2Em42%2Amat%2Em24%2Bthis%2Em43%2Amat%2Em34%2Bthis%2Em44%2Amat%2Em44%29%3Bthis%2Em11%3Dm11%3Bthis%2Em12%3Dm12%3Bthis%2Em13%3Dm13%3Bthis%2Em14%3Dm14%3Bthis%2Em21%3Dm21%3Bthis%2Em22%3Dm22%3Bthis%2Em23%3Dm23%3Bthis%2Em24%3Dm24%3Bthis%2Em31%3Dm31%3Bthis%2Em32%3Dm32%3Bthis%2Em33%3Dm33%3Bthis%2Em34%3Dm34%3Bthis%2Em41%3Dm41%3Bthis%2Em42%3Dm42%3Bthis%2Em43%3Dm43%3Bthis%2Em44%3Dm44%7D%3BCanvasMatrix4%2Eprototype%2EmultLeft%3Dfunction%28mat%29%7Bvar%20m11%3D%28mat%2Em11%2Athis%2Em11%2Bmat%2Em12%2Athis%2Em21%2Bmat%2Em13%2Athis%2Em31%2Bmat%2Em14%2Athis%2Em41%29%3Bvar%20m12%3D%28mat%2Em11%2Athis%2Em12%2Bmat%2Em12%2Athis%2Em22%2Bmat%2Em13%2Athis%2Em32%2Bmat%2Em14%2Athis%2Em42%29%3Bvar%20m13%3D%28mat%2Em11%2Athis%2Em13%2Bmat%2Em12%2Athis%2Em23%2Bmat%2Em13%2Athis%2Em33%2Bmat%2Em14%2Athis%2Em43%29%3Bvar%20m14%3D%28mat%2Em11%2Athis%2Em14%2Bmat%2Em12%2Athis%2Em24%2Bmat%2Em13%2Athis%2Em34%2Bmat%2Em14%2Athis%2Em44%29%3Bvar%20m21%3D%28mat%2Em21%2Athis%2Em11%2Bmat%2Em22%2Athis%2Em21%2Bmat%2Em23%2Athis%2Em31%2Bmat%2Em24%2Athis%2Em41%29%3Bvar%20m22%3D%28mat%2Em21%2Athis%2Em12%2Bmat%2Em22%2Athis%2Em22%2Bmat%2Em23%2Athis%2Em32%2Bmat%2Em24%2Athis%2Em42%29%3Bvar%20m23%3D%28mat%2Em21%2Athis%2Em13%2Bmat%2Em22%2Athis%2Em23%2Bmat%2Em23%2Athis%2Em33%2Bmat%2Em24%2Athis%2Em43%29%3Bvar%20m24%3D%28mat%2Em21%2Athis%2Em14%2Bmat%2Em22%2Athis%2Em24%2Bmat%2Em23%2Athis%2Em34%2Bmat%2Em24%2Athis%2Em44%29%3Bvar%20m31%3D%28mat%2Em31%2Athis%2Em11%2Bmat%2Em32%2Athis%2Em21%2Bmat%2Em33%2Athis%2Em31%2Bmat%2Em34%2Athis%2Em41%29%3Bvar%20m32%3D%28mat%2Em31%2Athis%2Em12%2Bmat%2Em32%2Athis%2Em22%2Bmat%2Em33%2Athis%2Em32%2Bmat%2Em34%2Athis%2Em42%29%3Bvar%20m33%3D%28mat%2Em31%2Athis%2Em13%2Bmat%2Em32%2Athis%2Em23%2Bmat%2Em33%2Athis%2Em33%2Bmat%2Em34%2Athis%2Em43%29%3Bvar%20m34%3D%28mat%2Em31%2Athis%2Em14%2Bmat%2Em32%2Athis%2Em24%2Bmat%2Em33%2Athis%2Em34%2Bmat%2Em34%2Athis%2Em44%29%3Bvar%20m41%3D%28mat%2Em41%2Athis%2Em11%2Bmat%2Em42%2Athis%2Em21%2Bmat%2Em43%2Athis%2Em31%2Bmat%2Em44%2Athis%2Em41%29%3Bvar%20m42%3D%28mat%2Em41%2Athis%2Em12%2Bmat%2Em42%2Athis%2Em22%2Bmat%2Em43%2Athis%2Em32%2Bmat%2Em44%2Athis%2Em42%29%3Bvar%20m43%3D%28mat%2Em41%2Athis%2Em13%2Bmat%2Em42%2Athis%2Em23%2Bmat%2Em43%2Athis%2Em33%2Bmat%2Em44%2Athis%2Em43%29%3Bvar%20m44%3D%28mat%2Em41%2Athis%2Em14%2Bmat%2Em42%2Athis%2Em24%2Bmat%2Em43%2Athis%2Em34%2Bmat%2Em44%2Athis%2Em44%29%3Bthis%2Em11%3Dm11%3Bthis%2Em12%3Dm12%3Bthis%2Em13%3Dm13%3Bthis%2Em14%3Dm14%3Bthis%2Em21%3Dm21%3Bthis%2Em22%3Dm22%3Bthis%2Em23%3Dm23%3Bthis%2Em24%3Dm24%3Bthis%2Em31%3Dm31%3Bthis%2Em32%3Dm32%3Bthis%2Em33%3Dm33%3Bthis%2Em34%3Dm34%3Bthis%2Em41%3Dm41%3Bthis%2Em42%3Dm42%3Bthis%2Em43%3Dm43%3Bthis%2Em44%3Dm44%7D%3BCanvasMatrix4%2Eprototype%2Eortho%3Dfunction%28left%2Cright%2Cbottom%2Ctop%2Cnear%2Cfar%29%7Bvar%20tx%3D%28left%2Bright%29%2F%28left%2Dright%29%3Bvar%20ty%3D%28top%2Bbottom%29%2F%28top%2Dbottom%29%3Bvar%20tz%3D%28far%2Bnear%29%2F%28far%2Dnear%29%3Bvar%20matrix%3Dnew%20CanvasMatrix4%28%29%3Bmatrix%2Em11%3D2%2F%28left%2Dright%29%3Bmatrix%2Em12%3D0%3Bmatrix%2Em13%3D0%3Bmatrix%2Em14%3D0%3Bmatrix%2Em21%3D0%3Bmatrix%2Em22%3D2%2F%28top%2Dbottom%29%3Bmatrix%2Em23%3D0%3Bmatrix%2Em24%3D0%3Bmatrix%2Em31%3D0%3Bmatrix%2Em32%3D0%3Bmatrix%2Em33%3D%2D2%2F%28far%2Dnear%29%3Bmatrix%2Em34%3D0%3Bmatrix%2Em41%3Dtx%3Bmatrix%2Em42%3Dty%3Bmatrix%2Em43%3Dtz%3Bmatrix%2Em44%3D1%3Bthis%2EmultRight%28matrix%29%7D%3BCanvasMatrix4%2Eprototype%2Efrustum%3Dfunction%28left%2Cright%2Cbottom%2Ctop%2Cnear%2Cfar%29%7Bvar%20matrix%3Dnew%20CanvasMatrix4%28%29%3Bvar%20A%3D%28right%2Bleft%29%2F%28right%2Dleft%29%3Bvar%20B%3D%28top%2Bbottom%29%2F%28top%2Dbottom%29%3Bvar%20C%3D%2D%28far%2Bnear%29%2F%28far%2Dnear%29%3Bvar%20D%3D%2D%282%2Afar%2Anear%29%2F%28far%2Dnear%29%3Bmatrix%2Em11%3D%282%2Anear%29%2F%28right%2Dleft%29%3Bmatrix%2Em12%3D0%3Bmatrix%2Em13%3D0%3Bmatrix%2Em14%3D0%3Bmatrix%2Em21%3D0%3Bmatrix%2Em22%3D2%2Anear%2F%28top%2Dbottom%29%3Bmatrix%2Em23%3D0%3Bmatrix%2Em24%3D0%3Bmatrix%2Em31%3DA%3Bmatrix%2Em32%3DB%3Bmatrix%2Em33%3DC%3Bmatrix%2Em34%3D%2D1%3Bmatrix%2Em41%3D0%3Bmatrix%2Em42%3D0%3Bmatrix%2Em43%3DD%3Bmatrix%2Em44%3D0%3Bthis%2EmultRight%28matrix%29%7D%3BCanvasMatrix4%2Eprototype%2Eperspective%3Dfunction%28fovy%2Caspect%2CzNear%2CzFar%29%7Bvar%20top%3DMath%2Etan%28fovy%2AMath%2EPI%2F360%29%2AzNear%3Bvar%20bottom%3D%2Dtop%3Bvar%20left%3Daspect%2Abottom%3Bvar%20right%3Daspect%2Atop%3Bthis%2Efrustum%28left%2Cright%2Cbottom%2Ctop%2CzNear%2CzFar%29%7D%3BCanvasMatrix4%2Eprototype%2Elookat%3Dfunction%28eyex%2Ceyey%2Ceyez%2Ccenterx%2Ccentery%2Ccenterz%2Cupx%2Cupy%2Cupz%29%7Bvar%20matrix%3Dnew%20CanvasMatrix4%28%29%3Bvar%20zx%3Deyex%2Dcenterx%3Bvar%20zy%3Deyey%2Dcentery%3Bvar%20zz%3Deyez%2Dcenterz%3Bvar%20mag%3DMath%2Esqrt%28zx%2Azx%2Bzy%2Azy%2Bzz%2Azz%29%3Bif%28mag%29%7Bzx%2F%3Dmag%3Bzy%2F%3Dmag%3Bzz%2F%3Dmag%7Dvar%20yx%3Dupx%3Bvar%20yy%3Dupy%3Bvar%20yz%3Dupz%3Bxx%3Dyy%2Azz%2Dyz%2Azy%3Bxy%3D%2Dyx%2Azz%2Byz%2Azx%3Bxz%3Dyx%2Azy%2Dyy%2Azx%3Byx%3Dzy%2Axz%2Dzz%2Axy%3Byy%3D%2Dzx%2Axz%2Bzz%2Axx%3Byx%3Dzx%2Axy%2Dzy%2Axx%3Bmag%3DMath%2Esqrt%28xx%2Axx%2Bxy%2Axy%2Bxz%2Axz%29%3Bif%28mag%29%7Bxx%2F%3Dmag%3Bxy%2F%3Dmag%3Bxz%2F%3Dmag%7Dmag%3DMath%2Esqrt%28yx%2Ayx%2Byy%2Ayy%2Byz%2Ayz%29%3Bif%28mag%29%7Byx%2F%3Dmag%3Byy%2F%3Dmag%3Byz%2F%3Dmag%7Dmatrix%2Em11%3Dxx%3Bmatrix%2Em12%3Dxy%3Bmatrix%2Em13%3Dxz%3Bmatrix%2Em14%3D0%3Bmatrix%2Em21%3Dyx%3Bmatrix%2Em22%3Dyy%3Bmatrix%2Em23%3Dyz%3Bmatrix%2Em24%3D0%3Bmatrix%2Em31%3Dzx%3Bmatrix%2Em32%3Dzy%3Bmatrix%2Em33%3Dzz%3Bmatrix%2Em34%3D0%3Bmatrix%2Em41%3D0%3Bmatrix%2Em42%3D0%3Bmatrix%2Em43%3D0%3Bmatrix%2Em44%3D1%3Bmatrix%2Etranslate%28%2Deyex%2C%2Deyey%2C%2Deyez%29%3Bthis%2EmultRight%28matrix%29%7D%3BCanvasMatrix4%2Eprototype%2E%5Fdeterminant2x2%3Dfunction%28a%2Cb%2Cc%2Cd%29%7Breturn%20a%2Ad%2Db%2Ac%7D%3BCanvasMatrix4%2Eprototype%2E%5Fdeterminant3x3%3Dfunction%28a1%2Ca2%2Ca3%2Cb1%2Cb2%2Cb3%2Cc1%2Cc2%2Cc3%29%7Breturn%20a1%2Athis%2E%5Fdeterminant2x2%28b2%2Cb3%2Cc2%2Cc3%29%2Db1%2Athis%2E%5Fdeterminant2x2%28a2%2Ca3%2Cc2%2Cc3%29%2Bc1%2Athis%2E%5Fdeterminant2x2%28a2%2Ca3%2Cb2%2Cb3%29%7D%3BCanvasMatrix4%2Eprototype%2E%5Fdeterminant4x4%3Dfunction%28%29%7Bvar%20a1%3Dthis%2Em11%3Bvar%20b1%3Dthis%2Em12%3Bvar%20c1%3Dthis%2Em13%3Bvar%20d1%3Dthis%2Em14%3Bvar%20a2%3Dthis%2Em21%3Bvar%20b2%3Dthis%2Em22%3Bvar%20c2%3Dthis%2Em23%3Bvar%20d2%3Dthis%2Em24%3Bvar%20a3%3Dthis%2Em31%3Bvar%20b3%3Dthis%2Em32%3Bvar%20c3%3Dthis%2Em33%3Bvar%20d3%3Dthis%2Em34%3Bvar%20a4%3Dthis%2Em41%3Bvar%20b4%3Dthis%2Em42%3Bvar%20c4%3Dthis%2Em43%3Bvar%20d4%3Dthis%2Em44%3Breturn%20a1%2Athis%2E%5Fdeterminant3x3%28b2%2Cb3%2Cb4%2Cc2%2Cc3%2Cc4%2Cd2%2Cd3%2Cd4%29%2Db1%2Athis%2E%5Fdeterminant3x3%28a2%2Ca3%2Ca4%2Cc2%2Cc3%2Cc4%2Cd2%2Cd3%2Cd4%29%2Bc1%2Athis%2E%5Fdeterminant3x3%28a2%2Ca3%2Ca4%2Cb2%2Cb3%2Cb4%2Cd2%2Cd3%2Cd4%29%2Dd1%2Athis%2E%5Fdeterminant3x3%28a2%2Ca3%2Ca4%2Cb2%2Cb3%2Cb4%2Cc2%2Cc3%2Cc4%29%7D%3BCanvasMatrix4%2Eprototype%2E%5FmakeAdjoint%3Dfunction%28%29%7Bvar%20a1%3Dthis%2Em11%3Bvar%20b1%3Dthis%2Em12%3Bvar%20c1%3Dthis%2Em13%3Bvar%20d1%3Dthis%2Em14%3Bvar%20a2%3Dthis%2Em21%3Bvar%20b2%3Dthis%2Em22%3Bvar%20c2%3Dthis%2Em23%3Bvar%20d2%3Dthis%2Em24%3Bvar%20a3%3Dthis%2Em31%3Bvar%20b3%3Dthis%2Em32%3Bvar%20c3%3Dthis%2Em33%3Bvar%20d3%3Dthis%2Em34%3Bvar%20a4%3Dthis%2Em41%3Bvar%20b4%3Dthis%2Em42%3Bvar%20c4%3Dthis%2Em43%3Bvar%20d4%3Dthis%2Em44%3Bthis%2Em11%3Dthis%2E%5Fdeterminant3x3%28b2%2Cb3%2Cb4%2Cc2%2Cc3%2Cc4%2Cd2%2Cd3%2Cd4%29%3Bthis%2Em21%3D%2Dthis%2E%5Fdeterminant3x3%28a2%2Ca3%2Ca4%2Cc2%2Cc3%2Cc4%2Cd2%2Cd3%2Cd4%29%3Bthis%2Em31%3Dthis%2E%5Fdeterminant3x3%28a2%2Ca3%2Ca4%2Cb2%2Cb3%2Cb4%2Cd2%2Cd3%2Cd4%29%3Bthis%2Em41%3D%2Dthis%2E%5Fdeterminant3x3%28a2%2Ca3%2Ca4%2Cb2%2Cb3%2Cb4%2Cc2%2Cc3%2Cc4%29%3Bthis%2Em12%3D%2Dthis%2E%5Fdeterminant3x3%28b1%2Cb3%2Cb4%2Cc1%2Cc3%2Cc4%2Cd1%2Cd3%2Cd4%29%3Bthis%2Em22%3Dthis%2E%5Fdeterminant3x3%28a1%2Ca3%2Ca4%2Cc1%2Cc3%2Cc4%2Cd1%2Cd3%2Cd4%29%3Bthis%2Em32%3D%2Dthis%2E%5Fdeterminant3x3%28a1%2Ca3%2Ca4%2Cb1%2Cb3%2Cb4%2Cd1%2Cd3%2Cd4%29%3Bthis%2Em42%3Dthis%2E%5Fdeterminant3x3%28a1%2Ca3%2Ca4%2Cb1%2Cb3%2Cb4%2Cc1%2Cc3%2Cc4%29%3Bthis%2Em13%3Dthis%2E%5Fdeterminant3x3%28b1%2Cb2%2Cb4%2Cc1%2Cc2%2Cc4%2Cd1%2Cd2%2Cd4%29%3Bthis%2Em23%3D%2Dthis%2E%5Fdeterminant3x3%28a1%2Ca2%2Ca4%2Cc1%2Cc2%2Cc4%2Cd1%2Cd2%2Cd4%29%3Bthis%2Em33%3Dthis%2E%5Fdeterminant3x3%28a1%2Ca2%2Ca4%2Cb1%2Cb2%2Cb4%2Cd1%2Cd2%2Cd4%29%3Bthis%2Em43%3D%2Dthis%2E%5Fdeterminant3x3%28a1%2Ca2%2Ca4%2Cb1%2Cb2%2Cb4%2Cc1%2Cc2%2Cc4%29%3Bthis%2Em14%3D%2Dthis%2E%5Fdeterminant3x3%28b1%2Cb2%2Cb3%2Cc1%2Cc2%2Cc3%2Cd1%2Cd2%2Cd3%29%3Bthis%2Em24%3Dthis%2E%5Fdeterminant3x3%28a1%2Ca2%2Ca3%2Cc1%2Cc2%2Cc3%2Cd1%2Cd2%2Cd3%29%3Bthis%2Em34%3D%2Dthis%2E%5Fdeterminant3x3%28a1%2Ca2%2Ca3%2Cb1%2Cb2%2Cb3%2Cd1%2Cd2%2Cd3%29%3Bthis%2Em44%3Dthis%2E%5Fdeterminant3x3%28a1%2Ca2%2Ca3%2Cb1%2Cb2%2Cb3%2Cc1%2Cc2%2Cc3%29%7D%0A" type="text/javascript"></script>
<canvas id="plot3dtextureCanvas" style="display: none;" width="256" height="256">
Your browser does not support the HTML5 canvas element.
</canvas>
<!-- ****** spheres object 7 ****** -->
<script id="plot3dvshader7" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec3 aNorm;
uniform mat4 normMatrix;
varying vec3 vNormal;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
vNormal = normalize((normMatrix * vec4(aNorm, 1.)).xyz);
}
</script>
<script id="plot3dfshader7" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec3 vNormal;
void main(void) {
vec3 eye = normalize(-vPosition.xyz);
const vec3 emission = vec3(0., 0., 0.);
const vec3 ambient1 = vec3(0., 0., 0.);
const vec3 specular1 = vec3(1., 1., 1.);// light*material
const float shininess1 = 50.;
vec4 colDiff1 = vec4(vCol.rgb * vec3(1., 1., 1.), vCol.a);
const vec3 lightDir1 = vec3(0., 0., 1.);
vec3 halfVec1 = normalize(lightDir1 + eye);
vec4 lighteffect = vec4(emission, 0.);
vec3 n = normalize(vNormal);
n = -faceforward(n, n, eye);
vec3 col1 = ambient1;
float nDotL1 = dot(n, lightDir1);
col1 = col1 + max(nDotL1, 0.) * colDiff1.rgb;
col1 = col1 + pow(max(dot(halfVec1, n), 0.), shininess1) * specular1;
lighteffect = lighteffect + vec4(col1, colDiff1.a);
gl_FragColor = lighteffect;
}
</script>
<!-- ****** text object 9 ****** -->
<script id="plot3dvshader9" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="plot3dfshader9" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** text object 10 ****** -->
<script id="plot3dvshader10" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="plot3dfshader10" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** text object 11 ****** -->
<script id="plot3dvshader11" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="plot3dfshader11" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** lines object 12 ****** -->
<script id="plot3dvshader12" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="plot3dfshader12" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<!-- ****** text object 13 ****** -->
<script id="plot3dvshader13" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="plot3dfshader13" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** lines object 14 ****** -->
<script id="plot3dvshader14" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="plot3dfshader14" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<!-- ****** text object 15 ****** -->
<script id="plot3dvshader15" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="plot3dfshader15" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** lines object 16 ****** -->
<script id="plot3dvshader16" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="plot3dfshader16" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<!-- ****** text object 17 ****** -->
<script id="plot3dvshader17" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="plot3dfshader17" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** lines object 18 ****** -->
<script id="plot3dvshader18" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="plot3dfshader18" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<script type="text/javascript">
var min = Math.min;
var max = Math.max;
var sqrt = Math.sqrt;
var sin = Math.sin;
var acos = Math.acos;
var tan = Math.tan;
var SQRT2 = Math.SQRT2;
var PI = Math.PI;
var log = Math.log;
var exp = Math.exp;
var rglClass = function() {
this.zoom = new Array();
this.FOV  = new Array();
this.userMatrix = new CanvasMatrix4();
this.viewport = new Array();
this.listeners = new Array();
this.clipplanes = new Array();
this.opaque = new Array();
this.transparent = new Array();
this.subscenes = new Array();
this.flags = new Array();
this.prog = new Array();
this.ofsLoc = new Array();
this.origLoc = new Array();
this.sizeLoc = new Array();
this.usermatLoc = new Array();
this.vClipplane = new Array();
this.texture = new Array();
this.texLoc = new Array();
this.sampler = new Array();
this.origsize = new Array();
this.values = new Array();
this.offsets = new Array();
this.normLoc = new Array();
this.clipLoc = new Array();
this.centers = new Array();
this.f = new Array();
this.buf = new Array();
this.ibuf = new Array();
this.mvMatLoc = new Array();
this.prMatLoc = new Array();
this.textScaleLoc = new Array();
this.normMatLoc = new Array();
this.IMVClip = new Array();
this.drawFns = new Array();
this.clipFns = new Array();
this.prMatrix = new CanvasMatrix4();
this.mvMatrix = new CanvasMatrix4();
this.vp = null;
this.prmvMatrix = null;
this.origs = null;
this.gl = null;
};
(function() {
this.getShader = function( gl, id ){
var shaderScript = document.getElementById ( id );
var str = "";
var k = shaderScript.firstChild;
while ( k ){
if ( k.nodeType == 3 ) str += k.textContent;
k = k.nextSibling;
}
var shader;
if ( shaderScript.type == "x-shader/x-fragment" )
shader = gl.createShader ( gl.FRAGMENT_SHADER );
else if ( shaderScript.type == "x-shader/x-vertex" )
shader = gl.createShader(gl.VERTEX_SHADER);
else return null;
gl.shaderSource(shader, str);
gl.compileShader(shader);
if (gl.getShaderParameter(shader, gl.COMPILE_STATUS) == 0)
alert(gl.getShaderInfoLog(shader));
return shader;
}
this.multMV = function(M, v) {
return [M.m11*v[0] + M.m12*v[1] + M.m13*v[2] + M.m14*v[3],
M.m21*v[0] + M.m22*v[1] + M.m23*v[2] + M.m24*v[3],
M.m31*v[0] + M.m32*v[1] + M.m33*v[2] + M.m34*v[3],
M.m41*v[0] + M.m42*v[1] + M.m43*v[2] + M.m44*v[3]];
}
this.f_is_lit = 1;
this.f_is_smooth = 2;
this.f_has_texture = 4;
this.f_is_indexed = 8;
this.f_depth_sort = 16;
this.f_fixed_quads = 32;
this.f_is_transparent = 64;
this.f_is_lines = 128;
this.f_sprites_3d = 256;
this.f_sprite_3d = 512;
this.f_is_subscene = 1024;
this.f_is_clipplanes = 2048;
this.f_reuse = 4096;
this.whichList = function(id) {
if (this.flags[id] & this.f_is_subscene)
return "subscenes";
else if (this.flags[id] & this.f_is_clipplanes)
return "clipplanes";
else if (this.flags[id] & this.f_is_transparent)
return "transparent";
else
return "opaque"; 
}
this.inSubscene = function(id, subscene) {
var thelist = this.whichList(id);
return this[thelist][subscene].indexOf(id) > -1;
}
this.addToSubscene = function(id, subscene) {
var thelist = this.whichList(id);
if (this[thelist][subscene].indexOf(id) == -1)
this[thelist][subscene].push(id);
}
this.delFromSubscene = function(id, subscene) {
var thelist = this.whichList(id);
var i = this[thelist][subscene].indexOf(id);
if (i > -1)
this[thelist][subscene].splice(i, 1);
}
this.setSubsceneEntries = function(ids, subscene) {
this.subscenes[subscene] = [];
this.clipplanes[subscene] = [];
this.transparent[subscene] = [];
this.opaque[subscene] = [];
for (var i = 0; i < ids.length; i++)
this.addToSubscene(ids[i], subscene);
}
this.getSubsceneEntries = function(subscene) {
return(this.subscenes[subscene].concat(this.clipplanes[subscene]).
concat(this.transparent[subscene]).concat(this.opaque[subscene]));
}
}).call(rglClass.prototype);
var plot3drgl = new rglClass();
plot3drgl.start = function() {
var debug = function(msg) {
document.getElementById("plot3ddebug").innerHTML = msg;
}
debug("");
var canvas = document.getElementById("plot3dcanvas");
if (!window.WebGLRenderingContext){
debug(" Your browser does not support WebGL. See <a href=\"http://get.webgl.org\">http://get.webgl.org</a>");
return;
}
try {
// Try to grab the standard context. If it fails, fallback to experimental.
this.gl = canvas.getContext("webgl") 
|| canvas.getContext("experimental-webgl");
}
catch(e) {}
if ( !this.gl ) {
debug(" Your browser appears to support WebGL, but did not create a WebGL context.  See <a href=\"http://get.webgl.org\">http://get.webgl.org</a>");
return;
}
var gl = this.gl;
var width = 481;  var height = 481;
canvas.width = width;   canvas.height = height;
var normMatrix = new CanvasMatrix4();
var saveMat = new Object();
var distance;
var posLoc = 0;
var colLoc = 1;
var activeSubscene = 1;
this.flags[1] = 1195;
this.zoom[1] = 1;
this.FOV[1] = 30;
this.viewport[1] = [0, 0, 480, 480];
this.userMatrix[1] = new CanvasMatrix4();
this.userMatrix[1].load([
1, 0, 0, 0,
0, 0.3420201, -0.9396926, 0,
0, 0.9396926, 0.3420201, 0,
0, 0, 0, 1
]);
this.clipplanes[1] = [];
this.opaque[1] = [7,9,10,11,12,13,14,15,16,17,18];
this.transparent[1] = [];
this.subscenes[1] = [];
function getPowerOfTwo(value) {
var pow = 1;
while(pow<value) {
pow *= 2;
}
return pow;
}
function handleLoadedTexture(texture, textureCanvas) {
gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);
gl.bindTexture(gl.TEXTURE_2D, texture);
gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, textureCanvas);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);
gl.generateMipmap(gl.TEXTURE_2D);
gl.bindTexture(gl.TEXTURE_2D, null);
}
function loadImageToTexture(filename, texture) {   
var canvas = document.getElementById("plot3dtextureCanvas");
var ctx = canvas.getContext("2d");
var image = new Image();
image.onload = function() {
var w = image.width;
var h = image.height;
var canvasX = getPowerOfTwo(w);
var canvasY = getPowerOfTwo(h);
canvas.width = canvasX;
canvas.height = canvasY;
ctx.imageSmoothingEnabled = true;
ctx.drawImage(image, 0, 0, canvasX, canvasY);
handleLoadedTexture(texture, canvas);
plot3drgl.drawScene();
}
image.src = filename;
}      
function drawTextToCanvas(text, cex) {
var canvasX, canvasY;
var textX, textY;
var textHeight = 20 * cex;
var textColour = "white";
var fontFamily = "Arial";
var backgroundColour = "rgba(0,0,0,0)";
var canvas = document.getElementById("plot3dtextureCanvas");
var ctx = canvas.getContext("2d");
ctx.font = textHeight+"px "+fontFamily;
canvasX = 1;
var widths = [];
for (var i = 0; i < text.length; i++)  {
widths[i] = ctx.measureText(text[i]).width;
canvasX = (widths[i] > canvasX) ? widths[i] : canvasX;
}     
canvasX = getPowerOfTwo(canvasX);
var offset = 2*textHeight; // offset to first baseline
var skip = 2*textHeight;   // skip between baselines      
canvasY = getPowerOfTwo(offset + text.length*skip);
canvas.width = canvasX;
canvas.height = canvasY;
ctx.fillStyle = backgroundColour;
ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
ctx.fillStyle = textColour;
ctx.textAlign = "left";
ctx.textBaseline = "alphabetic";
ctx.font = textHeight+"px "+fontFamily;
for(var i = 0; i < text.length; i++) {
textY = i*skip + offset;
ctx.fillText(text[i], 0,  textY);
}
return {canvasX:canvasX, canvasY:canvasY,
widths:widths, textHeight:textHeight,
offset:offset, skip:skip};
}
// ****** sphere object ******
this.sphereverts = new Float32Array([
-1, 0, 0,
1, 0, 0,
0, -1, 0,
0, 1, 0,
0, 0, -1,
0, 0, 1,
-0.7071068, 0, -0.7071068,
-0.7071068, -0.7071068, 0,
0, -0.7071068, -0.7071068,
-0.7071068, 0, 0.7071068,
0, -0.7071068, 0.7071068,
-0.7071068, 0.7071068, 0,
0, 0.7071068, -0.7071068,
0, 0.7071068, 0.7071068,
0.7071068, -0.7071068, 0,
0.7071068, 0, -0.7071068,
0.7071068, 0, 0.7071068,
0.7071068, 0.7071068, 0,
-0.9349975, 0, -0.3546542,
-0.9349975, -0.3546542, 0,
-0.77044, -0.4507894, -0.4507894,
0, -0.3546542, -0.9349975,
-0.3546542, 0, -0.9349975,
-0.4507894, -0.4507894, -0.77044,
-0.3546542, -0.9349975, 0,
0, -0.9349975, -0.3546542,
-0.4507894, -0.77044, -0.4507894,
-0.9349975, 0, 0.3546542,
-0.77044, -0.4507894, 0.4507894,
0, -0.9349975, 0.3546542,
-0.4507894, -0.77044, 0.4507894,
-0.3546542, 0, 0.9349975,
0, -0.3546542, 0.9349975,
-0.4507894, -0.4507894, 0.77044,
-0.9349975, 0.3546542, 0,
-0.77044, 0.4507894, -0.4507894,
0, 0.9349975, -0.3546542,
-0.3546542, 0.9349975, 0,
-0.4507894, 0.77044, -0.4507894,
0, 0.3546542, -0.9349975,
-0.4507894, 0.4507894, -0.77044,
-0.77044, 0.4507894, 0.4507894,
0, 0.3546542, 0.9349975,
-0.4507894, 0.4507894, 0.77044,
0, 0.9349975, 0.3546542,
-0.4507894, 0.77044, 0.4507894,
0.9349975, -0.3546542, 0,
0.9349975, 0, -0.3546542,
0.77044, -0.4507894, -0.4507894,
0.3546542, -0.9349975, 0,
0.4507894, -0.77044, -0.4507894,
0.3546542, 0, -0.9349975,
0.4507894, -0.4507894, -0.77044,
0.9349975, 0, 0.3546542,
0.77044, -0.4507894, 0.4507894,
0.3546542, 0, 0.9349975,
0.4507894, -0.4507894, 0.77044,
0.4507894, -0.77044, 0.4507894,
0.9349975, 0.3546542, 0,
0.77044, 0.4507894, -0.4507894,
0.4507894, 0.4507894, -0.77044,
0.3546542, 0.9349975, 0,
0.4507894, 0.77044, -0.4507894,
0.77044, 0.4507894, 0.4507894,
0.4507894, 0.77044, 0.4507894,
0.4507894, 0.4507894, 0.77044
]);
this.spherefaces=new Uint16Array([
0, 18, 19,
6, 20, 18,
7, 19, 20,
19, 18, 20,
4, 21, 22,
8, 23, 21,
6, 22, 23,
22, 21, 23,
2, 24, 25,
7, 26, 24,
8, 25, 26,
25, 24, 26,
7, 20, 26,
6, 23, 20,
8, 26, 23,
26, 20, 23,
0, 19, 27,
7, 28, 19,
9, 27, 28,
27, 19, 28,
2, 29, 24,
10, 30, 29,
7, 24, 30,
24, 29, 30,
5, 31, 32,
9, 33, 31,
10, 32, 33,
32, 31, 33,
9, 28, 33,
7, 30, 28,
10, 33, 30,
33, 28, 30,
0, 34, 18,
11, 35, 34,
6, 18, 35,
18, 34, 35,
3, 36, 37,
12, 38, 36,
11, 37, 38,
37, 36, 38,
4, 22, 39,
6, 40, 22,
12, 39, 40,
39, 22, 40,
6, 35, 40,
11, 38, 35,
12, 40, 38,
40, 35, 38,
0, 27, 34,
9, 41, 27,
11, 34, 41,
34, 27, 41,
5, 42, 31,
13, 43, 42,
9, 31, 43,
31, 42, 43,
3, 37, 44,
11, 45, 37,
13, 44, 45,
44, 37, 45,
11, 41, 45,
9, 43, 41,
13, 45, 43,
45, 41, 43,
1, 46, 47,
14, 48, 46,
15, 47, 48,
47, 46, 48,
2, 25, 49,
8, 50, 25,
14, 49, 50,
49, 25, 50,
4, 51, 21,
15, 52, 51,
8, 21, 52,
21, 51, 52,
15, 48, 52,
14, 50, 48,
8, 52, 50,
52, 48, 50,
1, 53, 46,
16, 54, 53,
14, 46, 54,
46, 53, 54,
5, 32, 55,
10, 56, 32,
16, 55, 56,
55, 32, 56,
2, 49, 29,
14, 57, 49,
10, 29, 57,
29, 49, 57,
14, 54, 57,
16, 56, 54,
10, 57, 56,
57, 54, 56,
1, 47, 58,
15, 59, 47,
17, 58, 59,
58, 47, 59,
4, 39, 51,
12, 60, 39,
15, 51, 60,
51, 39, 60,
3, 61, 36,
17, 62, 61,
12, 36, 62,
36, 61, 62,
17, 59, 62,
15, 60, 59,
12, 62, 60,
62, 59, 60,
1, 58, 53,
17, 63, 58,
16, 53, 63,
53, 58, 63,
3, 44, 61,
13, 64, 44,
17, 61, 64,
61, 44, 64,
5, 55, 42,
16, 65, 55,
13, 42, 65,
42, 55, 65,
16, 63, 65,
17, 64, 63,
13, 65, 64,
65, 63, 64
]);
var sphereBuf = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, sphereBuf);
gl.bufferData(gl.ARRAY_BUFFER, plot3drgl.sphereverts, gl.STATIC_DRAW);
var sphereIbuf = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sphereIbuf);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, plot3drgl.spherefaces, gl.STATIC_DRAW);
// ****** spheres object 7 ******
this.flags[7] = 3;
this.prog[7]  = gl.createProgram();
gl.attachShader(this.prog[7], this.getShader( gl, "plot3dvshader7" ));
gl.attachShader(this.prog[7], this.getShader( gl, "plot3dfshader7" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[7], 0, "aPos");
gl.bindAttribLocation(this.prog[7], 1, "aCol");
gl.linkProgram(this.prog[7]);
this.offsets[7]={vofs:0, cofs:3, nofs:-1, radofs:7, oofs:-1, tofs:-1, stride:8};
var v=new Float32Array([
5.1, 3.5, 1.4, 0, 0, 0, 1, 0.2112069,
4.9, 3, 1.4, 0, 0, 0, 1, 0.2112069,
4.7, 3.2, 1.3, 0, 0, 0, 1, 0.2112069,
4.6, 3.1, 1.5, 0, 0, 0, 1, 0.2112069,
5, 3.6, 1.4, 0, 0, 0, 1, 0.2112069,
5.4, 3.9, 1.7, 0, 0, 0, 1, 0.2112069,
4.6, 3.4, 1.4, 0, 0, 0, 1, 0.2112069,
5, 3.4, 1.5, 0, 0, 0, 1, 0.2112069,
4.4, 2.9, 1.4, 0, 0, 0, 1, 0.2112069,
4.9, 3.1, 1.5, 0, 0, 0, 1, 0.2112069,
5.4, 3.7, 1.5, 0, 0, 0, 1, 0.2112069,
4.8, 3.4, 1.6, 0, 0, 0, 1, 0.2112069,
4.8, 3, 1.4, 0, 0, 0, 1, 0.2112069,
4.3, 3, 1.1, 0, 0, 0, 1, 0.2112069,
5.8, 4, 1.2, 0, 0, 0, 1, 0.2112069,
5.7, 4.4, 1.5, 0, 0, 0, 1, 0.2112069,
5.4, 3.9, 1.3, 0, 0, 0, 1, 0.2112069,
5.1, 3.5, 1.4, 0, 0, 0, 1, 0.2112069,
5.7, 3.8, 1.7, 0, 0, 0, 1, 0.2112069,
5.1, 3.8, 1.5, 0, 0, 0, 1, 0.2112069,
5.4, 3.4, 1.7, 0, 0, 0, 1, 0.2112069,
5.1, 3.7, 1.5, 0, 0, 0, 1, 0.2112069,
4.6, 3.6, 1, 0, 0, 0, 1, 0.2112069,
5.1, 3.3, 1.7, 0, 0, 0, 1, 0.2112069,
4.8, 3.4, 1.9, 0, 0, 0, 1, 0.2112069,
5, 3, 1.6, 0, 0, 0, 1, 0.2112069,
5, 3.4, 1.6, 0, 0, 0, 1, 0.2112069,
5.2, 3.5, 1.5, 0, 0, 0, 1, 0.2112069,
5.2, 3.4, 1.4, 0, 0, 0, 1, 0.2112069,
4.7, 3.2, 1.6, 0, 0, 0, 1, 0.2112069,
4.8, 3.1, 1.6, 0, 0, 0, 1, 0.2112069,
5.4, 3.4, 1.5, 0, 0, 0, 1, 0.2112069,
5.2, 4.1, 1.5, 0, 0, 0, 1, 0.2112069,
5.5, 4.2, 1.4, 0, 0, 0, 1, 0.2112069,
4.9, 3.1, 1.5, 0, 0, 0, 1, 0.2112069,
5, 3.2, 1.2, 0, 0, 0, 1, 0.2112069,
5.5, 3.5, 1.3, 0, 0, 0, 1, 0.2112069,
4.9, 3.6, 1.4, 0, 0, 0, 1, 0.2112069,
4.4, 3, 1.3, 0, 0, 0, 1, 0.2112069,
5.1, 3.4, 1.5, 0, 0, 0, 1, 0.2112069,
5, 3.5, 1.3, 0, 0, 0, 1, 0.2112069,
4.5, 2.3, 1.3, 0, 0, 0, 1, 0.2112069,
4.4, 3.2, 1.3, 0, 0, 0, 1, 0.2112069,
5, 3.5, 1.6, 0, 0, 0, 1, 0.2112069,
5.1, 3.8, 1.9, 0, 0, 0, 1, 0.2112069,
4.8, 3, 1.4, 0, 0, 0, 1, 0.2112069,
5.1, 3.8, 1.6, 0, 0, 0, 1, 0.2112069,
4.6, 3.2, 1.4, 0, 0, 0, 1, 0.2112069,
5.3, 3.7, 1.5, 0, 0, 0, 1, 0.2112069,
5, 3.3, 1.4, 0, 0, 0, 1, 0.2112069,
7, 3.2, 4.7, 1, 0, 0, 1, 0.2112069,
6.4, 3.2, 4.5, 1, 0, 0, 1, 0.2112069,
6.9, 3.1, 4.9, 1, 0, 0, 1, 0.2112069,
5.5, 2.3, 4, 1, 0, 0, 1, 0.2112069,
6.5, 2.8, 4.6, 1, 0, 0, 1, 0.2112069,
5.7, 2.8, 4.5, 1, 0, 0, 1, 0.2112069,
6.3, 3.3, 4.7, 1, 0, 0, 1, 0.2112069,
4.9, 2.4, 3.3, 1, 0, 0, 1, 0.2112069,
6.6, 2.9, 4.6, 1, 0, 0, 1, 0.2112069,
5.2, 2.7, 3.9, 1, 0, 0, 1, 0.2112069,
5, 2, 3.5, 1, 0, 0, 1, 0.2112069,
5.9, 3, 4.2, 1, 0, 0, 1, 0.2112069,
6, 2.2, 4, 1, 0, 0, 1, 0.2112069,
6.1, 2.9, 4.7, 1, 0, 0, 1, 0.2112069,
5.6, 2.9, 3.6, 1, 0, 0, 1, 0.2112069,
6.7, 3.1, 4.4, 1, 0, 0, 1, 0.2112069,
5.6, 3, 4.5, 1, 0, 0, 1, 0.2112069,
5.8, 2.7, 4.1, 1, 0, 0, 1, 0.2112069,
6.2, 2.2, 4.5, 1, 0, 0, 1, 0.2112069,
5.6, 2.5, 3.9, 1, 0, 0, 1, 0.2112069,
5.9, 3.2, 4.8, 1, 0, 0, 1, 0.2112069,
6.1, 2.8, 4, 1, 0, 0, 1, 0.2112069,
6.3, 2.5, 4.9, 1, 0, 0, 1, 0.2112069,
6.1, 2.8, 4.7, 1, 0, 0, 1, 0.2112069,
6.4, 2.9, 4.3, 1, 0, 0, 1, 0.2112069,
6.6, 3, 4.4, 1, 0, 0, 1, 0.2112069,
6.8, 2.8, 4.8, 1, 0, 0, 1, 0.2112069,
6.7, 3, 5, 1, 0, 0, 1, 0.2112069,
6, 2.9, 4.5, 1, 0, 0, 1, 0.2112069,
5.7, 2.6, 3.5, 1, 0, 0, 1, 0.2112069,
5.5, 2.4, 3.8, 1, 0, 0, 1, 0.2112069,
5.5, 2.4, 3.7, 1, 0, 0, 1, 0.2112069,
5.8, 2.7, 3.9, 1, 0, 0, 1, 0.2112069,
6, 2.7, 5.1, 1, 0, 0, 1, 0.2112069,
5.4, 3, 4.5, 1, 0, 0, 1, 0.2112069,
6, 3.4, 4.5, 1, 0, 0, 1, 0.2112069,
6.7, 3.1, 4.7, 1, 0, 0, 1, 0.2112069,
6.3, 2.3, 4.4, 1, 0, 0, 1, 0.2112069,
5.6, 3, 4.1, 1, 0, 0, 1, 0.2112069,
5.5, 2.5, 4, 1, 0, 0, 1, 0.2112069,
5.5, 2.6, 4.4, 1, 0, 0, 1, 0.2112069,
6.1, 3, 4.6, 1, 0, 0, 1, 0.2112069,
5.8, 2.6, 4, 1, 0, 0, 1, 0.2112069,
5, 2.3, 3.3, 1, 0, 0, 1, 0.2112069,
5.6, 2.7, 4.2, 1, 0, 0, 1, 0.2112069,
5.7, 3, 4.2, 1, 0, 0, 1, 0.2112069,
5.7, 2.9, 4.2, 1, 0, 0, 1, 0.2112069,
6.2, 2.9, 4.3, 1, 0, 0, 1, 0.2112069,
5.1, 2.5, 3, 1, 0, 0, 1, 0.2112069,
5.7, 2.8, 4.1, 1, 0, 0, 1, 0.2112069,
6.3, 3.3, 6, 0, 0.8039216, 0, 1, 0.2112069,
5.8, 2.7, 5.1, 0, 0.8039216, 0, 1, 0.2112069,
7.1, 3, 5.9, 0, 0.8039216, 0, 1, 0.2112069,
6.3, 2.9, 5.6, 0, 0.8039216, 0, 1, 0.2112069,
6.5, 3, 5.8, 0, 0.8039216, 0, 1, 0.2112069,
7.6, 3, 6.6, 0, 0.8039216, 0, 1, 0.2112069,
4.9, 2.5, 4.5, 0, 0.8039216, 0, 1, 0.2112069,
7.3, 2.9, 6.3, 0, 0.8039216, 0, 1, 0.2112069,
6.7, 2.5, 5.8, 0, 0.8039216, 0, 1, 0.2112069,
7.2, 3.6, 6.1, 0, 0.8039216, 0, 1, 0.2112069,
6.5, 3.2, 5.1, 0, 0.8039216, 0, 1, 0.2112069,
6.4, 2.7, 5.3, 0, 0.8039216, 0, 1, 0.2112069,
6.8, 3, 5.5, 0, 0.8039216, 0, 1, 0.2112069,
5.7, 2.5, 5, 0, 0.8039216, 0, 1, 0.2112069,
5.8, 2.8, 5.1, 0, 0.8039216, 0, 1, 0.2112069,
6.4, 3.2, 5.3, 0, 0.8039216, 0, 1, 0.2112069,
6.5, 3, 5.5, 0, 0.8039216, 0, 1, 0.2112069,
7.7, 3.8, 6.7, 0, 0.8039216, 0, 1, 0.2112069,
7.7, 2.6, 6.9, 0, 0.8039216, 0, 1, 0.2112069,
6, 2.2, 5, 0, 0.8039216, 0, 1, 0.2112069,
6.9, 3.2, 5.7, 0, 0.8039216, 0, 1, 0.2112069,
5.6, 2.8, 4.9, 0, 0.8039216, 0, 1, 0.2112069,
7.7, 2.8, 6.7, 0, 0.8039216, 0, 1, 0.2112069,
6.3, 2.7, 4.9, 0, 0.8039216, 0, 1, 0.2112069,
6.7, 3.3, 5.7, 0, 0.8039216, 0, 1, 0.2112069,
7.2, 3.2, 6, 0, 0.8039216, 0, 1, 0.2112069,
6.2, 2.8, 4.8, 0, 0.8039216, 0, 1, 0.2112069,
6.1, 3, 4.9, 0, 0.8039216, 0, 1, 0.2112069,
6.4, 2.8, 5.6, 0, 0.8039216, 0, 1, 0.2112069,
7.2, 3, 5.8, 0, 0.8039216, 0, 1, 0.2112069,
7.4, 2.8, 6.1, 0, 0.8039216, 0, 1, 0.2112069,
7.9, 3.8, 6.4, 0, 0.8039216, 0, 1, 0.2112069,
6.4, 2.8, 5.6, 0, 0.8039216, 0, 1, 0.2112069,
6.3, 2.8, 5.1, 0, 0.8039216, 0, 1, 0.2112069,
6.1, 2.6, 5.6, 0, 0.8039216, 0, 1, 0.2112069,
7.7, 3, 6.1, 0, 0.8039216, 0, 1, 0.2112069,
6.3, 3.4, 5.6, 0, 0.8039216, 0, 1, 0.2112069,
6.4, 3.1, 5.5, 0, 0.8039216, 0, 1, 0.2112069,
6, 3, 4.8, 0, 0.8039216, 0, 1, 0.2112069,
6.9, 3.1, 5.4, 0, 0.8039216, 0, 1, 0.2112069,
6.7, 3.1, 5.6, 0, 0.8039216, 0, 1, 0.2112069,
6.9, 3.1, 5.1, 0, 0.8039216, 0, 1, 0.2112069,
5.8, 2.7, 5.1, 0, 0.8039216, 0, 1, 0.2112069,
6.8, 3.2, 5.9, 0, 0.8039216, 0, 1, 0.2112069,
6.7, 3.3, 5.7, 0, 0.8039216, 0, 1, 0.2112069,
6.7, 3, 5.2, 0, 0.8039216, 0, 1, 0.2112069,
6.3, 2.5, 5, 0, 0.8039216, 0, 1, 0.2112069,
6.5, 3, 5.2, 0, 0.8039216, 0, 1, 0.2112069,
6.2, 3.4, 5.4, 0, 0.8039216, 0, 1, 0.2112069,
5.9, 3, 5.1, 0, 0.8039216, 0, 1, 0.2112069
]);
this.values[7] = v;
this.normLoc[7] = gl.getAttribLocation(this.prog[7], "aNorm");
this.mvMatLoc[7] = gl.getUniformLocation(this.prog[7],"mvMatrix");
this.prMatLoc[7] = gl.getUniformLocation(this.prog[7],"prMatrix");
this.normMatLoc[7] = gl.getUniformLocation(this.prog[7],"normMatrix");
// ****** text object 9 ******
this.flags[9] = 40;
this.prog[9]  = gl.createProgram();
gl.attachShader(this.prog[9], this.getShader( gl, "plot3dvshader9" ));
gl.attachShader(this.prog[9], this.getShader( gl, "plot3dfshader9" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[9], 0, "aPos");
gl.bindAttribLocation(this.prog[9], 1, "aCol");
gl.linkProgram(this.prog[9]);
var texts = [
"Sepal.Length"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[9] = gl.getAttribLocation(this.prog[9], "aOfs");
this.texture[9] = gl.createTexture();
this.texLoc[9] = gl.getAttribLocation(this.prog[9], "aTexcoord");
this.sampler[9] = gl.getUniformLocation(this.prog[9],"uSampler");
handleLoadedTexture(this.texture[9], document.getElementById("plot3dtextureCanvas"));
this.offsets[9]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
6.1, 1.432519, -0.3950545, 0, -0.5, 0.5, 0.5,
6.1, 1.432519, -0.3950545, 1, -0.5, 0.5, 0.5,
6.1, 1.432519, -0.3950545, 1, 1.5, 0.5, 0.5,
6.1, 1.432519, -0.3950545, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<1; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[9]["stride"]*(4*i + j) + this.offsets[9]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[9] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3
]);
this.buf[9] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[9]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[9], gl.STATIC_DRAW);
this.ibuf[9] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[9]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[9] = gl.getUniformLocation(this.prog[9],"mvMatrix");
this.prMatLoc[9] = gl.getUniformLocation(this.prog[9],"prMatrix");
this.textScaleLoc[9] = gl.getUniformLocation(this.prog[9],"textScale");
// ****** text object 10 ******
this.flags[10] = 40;
this.prog[10]  = gl.createProgram();
gl.attachShader(this.prog[10], this.getShader( gl, "plot3dvshader10" ));
gl.attachShader(this.prog[10], this.getShader( gl, "plot3dfshader10" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[10], 0, "aPos");
gl.bindAttribLocation(this.prog[10], 1, "aCol");
gl.linkProgram(this.prog[10]);
var texts = [
"Sepal.Width"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[10] = gl.getAttribLocation(this.prog[10], "aOfs");
this.texture[10] = gl.createTexture();
this.texLoc[10] = gl.getAttribLocation(this.prog[10], "aTexcoord");
this.sampler[10] = gl.getUniformLocation(this.prog[10],"uSampler");
handleLoadedTexture(this.texture[10], document.getElementById("plot3dtextureCanvas"));
this.offsets[10]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
3.44878, 3.2, -0.3950545, 0, -0.5, 0.5, 0.5,
3.44878, 3.2, -0.3950545, 1, -0.5, 0.5, 0.5,
3.44878, 3.2, -0.3950545, 1, 1.5, 0.5, 0.5,
3.44878, 3.2, -0.3950545, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<1; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[10]["stride"]*(4*i + j) + this.offsets[10]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[10] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3
]);
this.buf[10] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[10]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[10], gl.STATIC_DRAW);
this.ibuf[10] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[10]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[10] = gl.getUniformLocation(this.prog[10],"mvMatrix");
this.prMatLoc[10] = gl.getUniformLocation(this.prog[10],"prMatrix");
this.textScaleLoc[10] = gl.getUniformLocation(this.prog[10],"textScale");
// ****** text object 11 ******
this.flags[11] = 40;
this.prog[11]  = gl.createProgram();
gl.attachShader(this.prog[11], this.getShader( gl, "plot3dvshader11" ));
gl.attachShader(this.prog[11], this.getShader( gl, "plot3dfshader11" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[11], 0, "aPos");
gl.bindAttribLocation(this.prog[11], 1, "aCol");
gl.linkProgram(this.prog[11]);
var texts = [
"Petal.Length"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[11] = gl.getAttribLocation(this.prog[11], "aOfs");
this.texture[11] = gl.createTexture();
this.texLoc[11] = gl.getAttribLocation(this.prog[11], "aTexcoord");
this.sampler[11] = gl.getUniformLocation(this.prog[11],"uSampler");
handleLoadedTexture(this.texture[11], document.getElementById("plot3dtextureCanvas"));
this.offsets[11]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
3.44878, 1.432519, 3.95, 0, -0.5, 0.5, 0.5,
3.44878, 1.432519, 3.95, 1, -0.5, 0.5, 0.5,
3.44878, 1.432519, 3.95, 1, 1.5, 0.5, 0.5,
3.44878, 1.432519, 3.95, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<1; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[11]["stride"]*(4*i + j) + this.offsets[11]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[11] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3
]);
this.buf[11] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[11]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[11], gl.STATIC_DRAW);
this.ibuf[11] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[11]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[11] = gl.getUniformLocation(this.prog[11],"mvMatrix");
this.prMatLoc[11] = gl.getUniformLocation(this.prog[11],"prMatrix");
this.textScaleLoc[11] = gl.getUniformLocation(this.prog[11],"textScale");
// ****** lines object 12 ******
this.flags[12] = 128;
this.prog[12]  = gl.createProgram();
gl.attachShader(this.prog[12], this.getShader( gl, "plot3dvshader12" ));
gl.attachShader(this.prog[12], this.getShader( gl, "plot3dfshader12" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[12], 0, "aPos");
gl.bindAttribLocation(this.prog[12], 1, "aCol");
gl.linkProgram(this.prog[12]);
this.offsets[12]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:-1, tofs:-1, stride:3};
var v=new Float32Array([
5, 1.840399, 0.6076504,
8, 1.840399, 0.6076504,
5, 1.840399, 0.6076504,
5, 1.772419, 0.4405329,
6, 1.840399, 0.6076504,
6, 1.772419, 0.4405329,
7, 1.840399, 0.6076504,
7, 1.772419, 0.4405329,
8, 1.840399, 0.6076504,
8, 1.772419, 0.4405329
]);
this.values[12] = v;
this.buf[12] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[12]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[12], gl.STATIC_DRAW);
this.mvMatLoc[12] = gl.getUniformLocation(this.prog[12],"mvMatrix");
this.prMatLoc[12] = gl.getUniformLocation(this.prog[12],"prMatrix");
// ****** text object 13 ******
this.flags[13] = 40;
this.prog[13]  = gl.createProgram();
gl.attachShader(this.prog[13], this.getShader( gl, "plot3dvshader13" ));
gl.attachShader(this.prog[13], this.getShader( gl, "plot3dfshader13" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[13], 0, "aPos");
gl.bindAttribLocation(this.prog[13], 1, "aCol");
gl.linkProgram(this.prog[13]);
var texts = [
"5",
"6",
"7",
"8"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[13] = gl.getAttribLocation(this.prog[13], "aOfs");
this.texture[13] = gl.createTexture();
this.texLoc[13] = gl.getAttribLocation(this.prog[13], "aTexcoord");
this.sampler[13] = gl.getUniformLocation(this.prog[13],"uSampler");
handleLoadedTexture(this.texture[13], document.getElementById("plot3dtextureCanvas"));
this.offsets[13]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
5, 1.636459, 0.106298, 0, -0.5, 0.5, 0.5,
5, 1.636459, 0.106298, 1, -0.5, 0.5, 0.5,
5, 1.636459, 0.106298, 1, 1.5, 0.5, 0.5,
5, 1.636459, 0.106298, 0, 1.5, 0.5, 0.5,
6, 1.636459, 0.106298, 0, -0.5, 0.5, 0.5,
6, 1.636459, 0.106298, 1, -0.5, 0.5, 0.5,
6, 1.636459, 0.106298, 1, 1.5, 0.5, 0.5,
6, 1.636459, 0.106298, 0, 1.5, 0.5, 0.5,
7, 1.636459, 0.106298, 0, -0.5, 0.5, 0.5,
7, 1.636459, 0.106298, 1, -0.5, 0.5, 0.5,
7, 1.636459, 0.106298, 1, 1.5, 0.5, 0.5,
7, 1.636459, 0.106298, 0, 1.5, 0.5, 0.5,
8, 1.636459, 0.106298, 0, -0.5, 0.5, 0.5,
8, 1.636459, 0.106298, 1, -0.5, 0.5, 0.5,
8, 1.636459, 0.106298, 1, 1.5, 0.5, 0.5,
8, 1.636459, 0.106298, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<4; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[13]["stride"]*(4*i + j) + this.offsets[13]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[13] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3,
4, 5, 6, 4, 6, 7,
8, 9, 10, 8, 10, 11,
12, 13, 14, 12, 14, 15
]);
this.buf[13] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[13]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[13], gl.STATIC_DRAW);
this.ibuf[13] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[13]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[13] = gl.getUniformLocation(this.prog[13],"mvMatrix");
this.prMatLoc[13] = gl.getUniformLocation(this.prog[13],"prMatrix");
this.textScaleLoc[13] = gl.getUniformLocation(this.prog[13],"textScale");
// ****** lines object 14 ******
this.flags[14] = 128;
this.prog[14]  = gl.createProgram();
gl.attachShader(this.prog[14], this.getShader( gl, "plot3dvshader14" ));
gl.attachShader(this.prog[14], this.getShader( gl, "plot3dfshader14" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[14], 0, "aPos");
gl.bindAttribLocation(this.prog[14], 1, "aCol");
gl.linkProgram(this.prog[14]);
this.offsets[14]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:-1, tofs:-1, stride:3};
var v=new Float32Array([
4.0606, 2, 0.6076504,
4.0606, 4.5, 0.6076504,
4.0606, 2, 0.6076504,
3.95863, 2, 0.4405329,
4.0606, 2.5, 0.6076504,
3.95863, 2.5, 0.4405329,
4.0606, 3, 0.6076504,
3.95863, 3, 0.4405329,
4.0606, 3.5, 0.6076504,
3.95863, 3.5, 0.4405329,
4.0606, 4, 0.6076504,
3.95863, 4, 0.4405329,
4.0606, 4.5, 0.6076504,
3.95863, 4.5, 0.4405329
]);
this.values[14] = v;
this.buf[14] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[14]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[14], gl.STATIC_DRAW);
this.mvMatLoc[14] = gl.getUniformLocation(this.prog[14],"mvMatrix");
this.prMatLoc[14] = gl.getUniformLocation(this.prog[14],"prMatrix");
// ****** text object 15 ******
this.flags[15] = 40;
this.prog[15]  = gl.createProgram();
gl.attachShader(this.prog[15], this.getShader( gl, "plot3dvshader15" ));
gl.attachShader(this.prog[15], this.getShader( gl, "plot3dfshader15" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[15], 0, "aPos");
gl.bindAttribLocation(this.prog[15], 1, "aCol");
gl.linkProgram(this.prog[15]);
var texts = [
"2",
"2.5",
"3",
"3.5",
"4",
"4.5"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[15] = gl.getAttribLocation(this.prog[15], "aOfs");
this.texture[15] = gl.createTexture();
this.texLoc[15] = gl.getAttribLocation(this.prog[15], "aTexcoord");
this.sampler[15] = gl.getUniformLocation(this.prog[15],"uSampler");
handleLoadedTexture(this.texture[15], document.getElementById("plot3dtextureCanvas"));
this.offsets[15]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
3.75469, 2, 0.106298, 0, -0.5, 0.5, 0.5,
3.75469, 2, 0.106298, 1, -0.5, 0.5, 0.5,
3.75469, 2, 0.106298, 1, 1.5, 0.5, 0.5,
3.75469, 2, 0.106298, 0, 1.5, 0.5, 0.5,
3.75469, 2.5, 0.106298, 0, -0.5, 0.5, 0.5,
3.75469, 2.5, 0.106298, 1, -0.5, 0.5, 0.5,
3.75469, 2.5, 0.106298, 1, 1.5, 0.5, 0.5,
3.75469, 2.5, 0.106298, 0, 1.5, 0.5, 0.5,
3.75469, 3, 0.106298, 0, -0.5, 0.5, 0.5,
3.75469, 3, 0.106298, 1, -0.5, 0.5, 0.5,
3.75469, 3, 0.106298, 1, 1.5, 0.5, 0.5,
3.75469, 3, 0.106298, 0, 1.5, 0.5, 0.5,
3.75469, 3.5, 0.106298, 0, -0.5, 0.5, 0.5,
3.75469, 3.5, 0.106298, 1, -0.5, 0.5, 0.5,
3.75469, 3.5, 0.106298, 1, 1.5, 0.5, 0.5,
3.75469, 3.5, 0.106298, 0, 1.5, 0.5, 0.5,
3.75469, 4, 0.106298, 0, -0.5, 0.5, 0.5,
3.75469, 4, 0.106298, 1, -0.5, 0.5, 0.5,
3.75469, 4, 0.106298, 1, 1.5, 0.5, 0.5,
3.75469, 4, 0.106298, 0, 1.5, 0.5, 0.5,
3.75469, 4.5, 0.106298, 0, -0.5, 0.5, 0.5,
3.75469, 4.5, 0.106298, 1, -0.5, 0.5, 0.5,
3.75469, 4.5, 0.106298, 1, 1.5, 0.5, 0.5,
3.75469, 4.5, 0.106298, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<6; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[15]["stride"]*(4*i + j) + this.offsets[15]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[15] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3,
4, 5, 6, 4, 6, 7,
8, 9, 10, 8, 10, 11,
12, 13, 14, 12, 14, 15,
16, 17, 18, 16, 18, 19,
20, 21, 22, 20, 22, 23
]);
this.buf[15] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[15]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[15], gl.STATIC_DRAW);
this.ibuf[15] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[15]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[15] = gl.getUniformLocation(this.prog[15],"mvMatrix");
this.prMatLoc[15] = gl.getUniformLocation(this.prog[15],"prMatrix");
this.textScaleLoc[15] = gl.getUniformLocation(this.prog[15],"textScale");
// ****** lines object 16 ******
this.flags[16] = 128;
this.prog[16]  = gl.createProgram();
gl.attachShader(this.prog[16], this.getShader( gl, "plot3dvshader16" ));
gl.attachShader(this.prog[16], this.getShader( gl, "plot3dfshader16" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[16], 0, "aPos");
gl.bindAttribLocation(this.prog[16], 1, "aCol");
gl.linkProgram(this.prog[16]);
this.offsets[16]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:-1, tofs:-1, stride:3};
var v=new Float32Array([
4.0606, 1.840399, 1,
4.0606, 1.840399, 7,
4.0606, 1.840399, 1,
3.95863, 1.772419, 1,
4.0606, 1.840399, 2,
3.95863, 1.772419, 2,
4.0606, 1.840399, 3,
3.95863, 1.772419, 3,
4.0606, 1.840399, 4,
3.95863, 1.772419, 4,
4.0606, 1.840399, 5,
3.95863, 1.772419, 5,
4.0606, 1.840399, 6,
3.95863, 1.772419, 6,
4.0606, 1.840399, 7,
3.95863, 1.772419, 7
]);
this.values[16] = v;
this.buf[16] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[16]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[16], gl.STATIC_DRAW);
this.mvMatLoc[16] = gl.getUniformLocation(this.prog[16],"mvMatrix");
this.prMatLoc[16] = gl.getUniformLocation(this.prog[16],"prMatrix");
// ****** text object 17 ******
this.flags[17] = 40;
this.prog[17]  = gl.createProgram();
gl.attachShader(this.prog[17], this.getShader( gl, "plot3dvshader17" ));
gl.attachShader(this.prog[17], this.getShader( gl, "plot3dfshader17" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[17], 0, "aPos");
gl.bindAttribLocation(this.prog[17], 1, "aCol");
gl.linkProgram(this.prog[17]);
var texts = [
"1",
"2",
"3",
"4",
"5",
"6",
"7"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[17] = gl.getAttribLocation(this.prog[17], "aOfs");
this.texture[17] = gl.createTexture();
this.texLoc[17] = gl.getAttribLocation(this.prog[17], "aTexcoord");
this.sampler[17] = gl.getUniformLocation(this.prog[17],"uSampler");
handleLoadedTexture(this.texture[17], document.getElementById("plot3dtextureCanvas"));
this.offsets[17]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
3.75469, 1.636459, 1, 0, -0.5, 0.5, 0.5,
3.75469, 1.636459, 1, 1, -0.5, 0.5, 0.5,
3.75469, 1.636459, 1, 1, 1.5, 0.5, 0.5,
3.75469, 1.636459, 1, 0, 1.5, 0.5, 0.5,
3.75469, 1.636459, 2, 0, -0.5, 0.5, 0.5,
3.75469, 1.636459, 2, 1, -0.5, 0.5, 0.5,
3.75469, 1.636459, 2, 1, 1.5, 0.5, 0.5,
3.75469, 1.636459, 2, 0, 1.5, 0.5, 0.5,
3.75469, 1.636459, 3, 0, -0.5, 0.5, 0.5,
3.75469, 1.636459, 3, 1, -0.5, 0.5, 0.5,
3.75469, 1.636459, 3, 1, 1.5, 0.5, 0.5,
3.75469, 1.636459, 3, 0, 1.5, 0.5, 0.5,
3.75469, 1.636459, 4, 0, -0.5, 0.5, 0.5,
3.75469, 1.636459, 4, 1, -0.5, 0.5, 0.5,
3.75469, 1.636459, 4, 1, 1.5, 0.5, 0.5,
3.75469, 1.636459, 4, 0, 1.5, 0.5, 0.5,
3.75469, 1.636459, 5, 0, -0.5, 0.5, 0.5,
3.75469, 1.636459, 5, 1, -0.5, 0.5, 0.5,
3.75469, 1.636459, 5, 1, 1.5, 0.5, 0.5,
3.75469, 1.636459, 5, 0, 1.5, 0.5, 0.5,
3.75469, 1.636459, 6, 0, -0.5, 0.5, 0.5,
3.75469, 1.636459, 6, 1, -0.5, 0.5, 0.5,
3.75469, 1.636459, 6, 1, 1.5, 0.5, 0.5,
3.75469, 1.636459, 6, 0, 1.5, 0.5, 0.5,
3.75469, 1.636459, 7, 0, -0.5, 0.5, 0.5,
3.75469, 1.636459, 7, 1, -0.5, 0.5, 0.5,
3.75469, 1.636459, 7, 1, 1.5, 0.5, 0.5,
3.75469, 1.636459, 7, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<7; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[17]["stride"]*(4*i + j) + this.offsets[17]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[17] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3,
4, 5, 6, 4, 6, 7,
8, 9, 10, 8, 10, 11,
12, 13, 14, 12, 14, 15,
16, 17, 18, 16, 18, 19,
20, 21, 22, 20, 22, 23,
24, 25, 26, 24, 26, 27
]);
this.buf[17] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[17]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[17], gl.STATIC_DRAW);
this.ibuf[17] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[17]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[17] = gl.getUniformLocation(this.prog[17],"mvMatrix");
this.prMatLoc[17] = gl.getUniformLocation(this.prog[17],"prMatrix");
this.textScaleLoc[17] = gl.getUniformLocation(this.prog[17],"textScale");
// ****** lines object 18 ******
this.flags[18] = 128;
this.prog[18]  = gl.createProgram();
gl.attachShader(this.prog[18], this.getShader( gl, "plot3dvshader18" ));
gl.attachShader(this.prog[18], this.getShader( gl, "plot3dfshader18" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[18], 0, "aPos");
gl.bindAttribLocation(this.prog[18], 1, "aCol");
gl.linkProgram(this.prog[18]);
this.offsets[18]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:-1, tofs:-1, stride:3};
var v=new Float32Array([
4.0606, 1.840399, 0.6076504,
4.0606, 4.559601, 0.6076504,
4.0606, 1.840399, 7.29235,
4.0606, 4.559601, 7.29235,
4.0606, 1.840399, 0.6076504,
4.0606, 1.840399, 7.29235,
4.0606, 4.559601, 0.6076504,
4.0606, 4.559601, 7.29235,
4.0606, 1.840399, 0.6076504,
8.1394, 1.840399, 0.6076504,
4.0606, 1.840399, 7.29235,
8.1394, 1.840399, 7.29235,
4.0606, 4.559601, 0.6076504,
8.1394, 4.559601, 0.6076504,
4.0606, 4.559601, 7.29235,
8.1394, 4.559601, 7.29235,
8.1394, 1.840399, 0.6076504,
8.1394, 4.559601, 0.6076504,
8.1394, 1.840399, 7.29235,
8.1394, 4.559601, 7.29235,
8.1394, 1.840399, 0.6076504,
8.1394, 1.840399, 7.29235,
8.1394, 4.559601, 0.6076504,
8.1394, 4.559601, 7.29235
]);
this.values[18] = v;
this.buf[18] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[18]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[18], gl.STATIC_DRAW);
this.mvMatLoc[18] = gl.getUniformLocation(this.prog[18],"mvMatrix");
this.prMatLoc[18] = gl.getUniformLocation(this.prog[18],"prMatrix");
gl.enable(gl.DEPTH_TEST);
gl.depthFunc(gl.LEQUAL);
gl.clearDepth(1.0);
gl.clearColor(1,1,1,1);
var drag  = 0;
this.drawScene = function() {
gl.depthMask(true);
gl.disable(gl.BLEND);
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
this.drawFns[1].call(this, 1)
gl.flush ();
}
// ****** spheres object 7 *******
this.drawFns[7] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, sphereBuf);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sphereIbuf);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(normMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 12,  0);
gl.enableVertexAttribArray(this.normLoc[id] );
gl.vertexAttribPointer(this.normLoc[id],  3, gl.FLOAT, false, 12,  0);
gl.disableVertexAttribArray( colLoc );
var sphereNorm = new CanvasMatrix4();
sphereNorm.scale(1.17337, 1.760048, 0.7159564);
sphereNorm.multRight(normMatrix);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(sphereNorm.getAsArray()) );
for (var i = 0; i < 150; i++) {
var sphereMV = new CanvasMatrix4();
var baseofs = i*plot3drgl.offsets[id]["stride"];
var ofs = baseofs + this.offsets[id]["radofs"];        
var scale = this.values[id][ofs];
sphereMV.scale(0.8522463*scale, 0.5681663*scale, 1.396733*scale);
sphereMV.translate(this.values[id][baseofs], 
this.values[id][baseofs+1], 
this.values[id][baseofs+2]);
sphereMV.multRight(this.mvMatrix);
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(sphereMV.getAsArray()) );
ofs = baseofs + this.offsets[id]["cofs"];       
gl.vertexAttrib4f( colLoc, this.values[id][ofs], 
this.values[id][ofs+1], 
this.values[id][ofs+2],
this.values[id][ofs+3] );
gl.drawElements(gl.TRIANGLES, 384, gl.UNSIGNED_SHORT, 0);
}
}
// ****** text object 9 *******
this.drawFns[9] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
}
// ****** text object 10 *******
this.drawFns[10] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
}
// ****** text object 11 *******
this.drawFns[11] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
}
// ****** lines object 12 *******
this.drawFns[12] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawArrays(gl.LINES, 0, 10);
}
// ****** text object 13 *******
this.drawFns[13] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 24, gl.UNSIGNED_SHORT, 0);
}
// ****** lines object 14 *******
this.drawFns[14] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawArrays(gl.LINES, 0, 14);
}
// ****** text object 15 *******
this.drawFns[15] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 36, gl.UNSIGNED_SHORT, 0);
}
// ****** lines object 16 *******
this.drawFns[16] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawArrays(gl.LINES, 0, 16);
}
// ****** text object 17 *******
this.drawFns[17] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 42, gl.UNSIGNED_SHORT, 0);
}
// ****** lines object 18 *******
this.drawFns[18] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawArrays(gl.LINES, 0, 24);
}
// ***** subscene 1 ****
this.drawFns[1] = function(id) {
this.vp = this.viewport[id];
gl.viewport(this.vp[0], this.vp[1], this.vp[2], this.vp[3]);
gl.scissor(this.vp[0], this.vp[1], this.vp[2], this.vp[3]);
gl.clearColor(1, 1, 1, 1);
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
this.prMatrix.makeIdentity();
var radius = 4.426427;
var distance = 19.69367;
var t = tan(this.FOV[1]*PI/360);
var near = distance - radius;
var far = distance + radius;
var hlen = t*near;
var aspect = this.vp[2]/this.vp[3];
var z = this.zoom[1];
if (aspect > 1) 
this.prMatrix.frustum(-hlen*aspect*z, hlen*aspect*z, 
-hlen*z, hlen*z, near, far);
else  
this.prMatrix.frustum(-hlen*z, hlen*z, 
-hlen*z/aspect, hlen*z/aspect, 
near, far);
this.mvMatrix.makeIdentity();
this.mvMatrix.translate( -6.1, -3.2, -3.95 );
this.mvMatrix.scale( 1.17337, 1.760048, 0.7159564 );   
this.mvMatrix.multRight( plot3drgl.userMatrix[1] );
this.mvMatrix.translate(-0, -0, -19.69367);
normMatrix.makeIdentity();
normMatrix.scale( 0.8522463, 0.5681663, 1.396733 );   
normMatrix.multRight( plot3drgl.userMatrix[1] );
var clipids = this.clipplanes[id];
if (clipids.length > 0) {
this.invMatrix = new CanvasMatrix4(this.mvMatrix);
this.invMatrix.invert();
for (var i = 0; i < this.clipplanes[id].length; i++) 
this.drawFns[clipids[i]].call(this, clipids[i]);
}
var subids = this.opaque[id];
for (var i = 0; i < subids.length; i++) 
this.drawFns[subids[i]].call(this, subids[i], clipids);
subids = this.transparent[id];
if (subids.length > 0) {
gl.depthMask(false);
gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA,
gl.ONE, gl.ONE);
gl.enable(gl.BLEND);
for (var i = 0; i < subids.length; i++) 
this.drawFns[subids[i]].call(this, subids[i], clipids);
}
subids = this.subscenes[id];
for (var i = 0; i < subids.length; i++)
this.drawFns[subids[i]].call(this, subids[i]);
}
this.drawScene();
var vpx0 = {
1: 0
};
var vpy0 = {
1: 0
};
var vpWidths = {
1: 480
};
var vpHeights = {
1: 480
};
var activeModel = {
1: 1
};
var activeProjection = {
1: 1
};
plot3drgl.listeners = {
1: [ 1 ]
};
var whichSubscene = function(coords){
if (0 <= coords.x && coords.x <= 480 && 0 <= coords.y && coords.y <= 480) return(1);
return(1);
}
var translateCoords = function(subsceneid, coords){
return {x:coords.x - vpx0[subsceneid], y:coords.y - vpy0[subsceneid]};
}
var vlen = function(v) {
return sqrt(v[0]*v[0] + v[1]*v[1] + v[2]*v[2])
}
var xprod = function(a, b) {
return [a[1]*b[2] - a[2]*b[1],
a[2]*b[0] - a[0]*b[2],
a[0]*b[1] - a[1]*b[0]];
}
var screenToVector = function(x, y) {
var width = vpWidths[activeSubscene];
var height = vpHeights[activeSubscene];
var radius = max(width, height)/2.0;
var cx = width/2.0;
var cy = height/2.0;
var px = (x-cx)/radius;
var py = (y-cy)/radius;
var plen = sqrt(px*px+py*py);
if (plen > 1.e-6) { 
px = px/plen;
py = py/plen;
}
var angle = (SQRT2 - plen)/SQRT2*PI/2;
var z = sin(angle);
var zlen = sqrt(1.0 - z*z);
px = px * zlen;
py = py * zlen;
return [px, py, z];
}
var rotBase;
var trackballdown = function(x,y) {
rotBase = screenToVector(x, y);
var l = plot3drgl.listeners[activeModel[activeSubscene]];
saveMat = new Object();
for (var i = 0; i < l.length; i++) 
saveMat[l[i]] = new CanvasMatrix4(plot3drgl.userMatrix[l[i]]);
}
var trackballmove = function(x,y) {
var rotCurrent = screenToVector(x,y);
var dot = rotBase[0]*rotCurrent[0] + 
rotBase[1]*rotCurrent[1] + 
rotBase[2]*rotCurrent[2];
var angle = acos( dot/vlen(rotBase)/vlen(rotCurrent) )*180./PI;
var axis = xprod(rotBase, rotCurrent);
var l = plot3drgl.listeners[activeModel[activeSubscene]];
for (i = 0; i < l.length; i++) {
plot3drgl.userMatrix[l[i]].load(saveMat[l[i]]);
plot3drgl.userMatrix[l[i]].rotate(angle, axis[0], axis[1], axis[2]);
}
plot3drgl.drawScene();
}
var trackballend = 0;
var y0zoom = 0;
var zoom0 = 0;
var zoomdown = function(x, y) {
y0zoom = y;
zoom0 = new Object();
l = plot3drgl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
zoom0[l[i]] = log(plot3drgl.zoom[l[i]]);
}
var zoommove = function(x, y) {
l = plot3drgl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
plot3drgl.zoom[l[i]] = exp(zoom0[l[i]] + (y-y0zoom)/height);
plot3drgl.drawScene();
}
var zoomend = 0;
var y0fov = 0;
var fov0 = 0;
var fovdown = function(x, y) {
y0fov = y;
fov0 = new Object();
l = plot3drgl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
fov0[l[i]] = plot3drgl.FOV[l[i]];
}
var fovmove = function(x, y) {
l = plot3drgl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
plot3drgl.FOV[l[i]] = max(1, min(179, fov0[l[i]] + 180*(y-y0fov)/height));
plot3drgl.drawScene();
}
var fovend = 0;
var mousedown = [trackballdown, zoomdown, fovdown];
var mousemove = [trackballmove, zoommove, fovmove];
var mouseend = [trackballend, zoomend, fovend];
function relMouseCoords(event){
var totalOffsetX = 0;
var totalOffsetY = 0;
var currentElement = canvas;
do{
totalOffsetX += currentElement.offsetLeft;
totalOffsetY += currentElement.offsetTop;
currentElement = currentElement.offsetParent;
}
while(currentElement)
var canvasX = event.pageX - totalOffsetX;
var canvasY = event.pageY - totalOffsetY;
return {x:canvasX, y:canvasY}
}
canvas.onmousedown = function ( ev ){
if (!ev.which) // Use w3c defns in preference to MS
switch (ev.button) {
case 0: ev.which = 1; break;
case 1: 
case 4: ev.which = 2; break;
case 2: ev.which = 3;
}
drag = ev.which;
var f = mousedown[drag-1];
if (f) {
var coords = relMouseCoords(ev);
coords.y = height-coords.y;
activeSubscene = whichSubscene(coords);
coords = translateCoords(activeSubscene, coords);
f(coords.x, coords.y); 
ev.preventDefault();
}
}    
canvas.onmouseup = function ( ev ){ 
if ( drag == 0 ) return;
var f = mouseend[drag-1];
if (f) 
f();
drag = 0;
}
canvas.onmouseout = canvas.onmouseup;
canvas.onmousemove = function ( ev ){
if ( drag == 0 ) return;
var f = mousemove[drag-1];
if (f) {
var coords = relMouseCoords(ev);
coords.y = height - coords.y;
coords = translateCoords(activeSubscene, coords);
f(coords.x, coords.y);
}
}
var wheelHandler = function(ev) {
var del = 1.1;
if (ev.shiftKey) del = 1.01;
var ds = ((ev.detail || ev.wheelDelta) > 0) ? del : (1 / del);
l = plot3drgl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
plot3drgl.zoom[l[i]] *= ds;
plot3drgl.drawScene();
ev.preventDefault();
};
canvas.addEventListener("DOMMouseScroll", wheelHandler, false);
canvas.addEventListener("mousewheel", wheelHandler, false);
}
</script>
<canvas id="plot3dcanvas" class="rglWebGL" width="1" height="1">
</canvas>
<p id="plot3ddebug">
You must enable Javascript to view this page properly.
</p>
<script>plot3drgl.start();</script>
<p>We might like a button on the web page to cause a change to the display, e.g.a rotation of the plot. First we add buttons, with the onclick event set to a function described below:</p>
<pre><code>&lt;button type=&quot;button&quot; onclick=&quot;rotate(10)&quot;&gt;Forward&lt;/button&gt;
&lt;button type=&quot;button&quot; onclick=&quot;rotate(-10)&quot;&gt;Backward&lt;/button&gt;</code></pre>
which produces these buttons:
<button type="button" onclick="rotate(10)">
Forward
</button>
<button type="button" onclick="rotate(-10)">
Backward
</button>
<p>We stored the subscene number that is currently active in <code>subid</code> in the code chunk above, and use it as <code class="r"><code>`r subid`</code></code> in the script below.</p>
<p>The <code>rotate()</code> function makes use of the global <code>&lt;prefix&gt;rgl</code> object. The <code>knitr</code> WebGL support sets the prefix to the code chunk label, so the global is called <code>plot3drgl</code>:</p>
<pre><code>&lt;script type=&quot;text/javascript&quot;&gt;
var rotate = function(angle) {
  plot3drgl.userMatrix[`r subid`].rotate(angle, 0,1,0);
  plot3drgl.drawScene();
}
&lt;/script&gt;</code></pre>
<script type="text/javascript">
var rotate = function(angle) {
  plot3drgl.userMatrix[1].rotate(angle, 0,1,0);
  plot3drgl.drawScene();
}
</script>
</div>
<div id="autogenerated-controls" class="section level2">
<h2>Autogenerated controls</h2>
<p>We can also change the contents of the plot using <a name="toggleButton"><a href="../../rgl/help/toggleButton"><code>toggleButton</code></a></a>. For example, we can redo the previous plot, but with the three species as separate spheres objects and buttons to toggle them:</p>
<pre class="sourceCode r"><code class="sourceCode r">sphereid &lt;-<span class="st"> </span><span class="kw">with</span>(<span class="kw">subset</span>(iris, Species ==<span class="st"> &quot;setosa&quot;</span>), 
     <span class="kw">spheres3d</span>(Sepal.Length, Sepal.Width, Petal.Length, 
                  <span class="dt">col=</span><span class="kw">as.numeric</span>(Species),
                  <span class="dt">radius =</span> <span class="fl">0.211</span>))
<span class="kw">with</span>(<span class="kw">subset</span>(iris, Species ==<span class="st"> &quot;versicolor&quot;</span>), 
     <span class="kw">spheres3d</span>(Sepal.Length, Sepal.Width, Petal.Length, 
               <span class="dt">col=</span><span class="kw">as.numeric</span>(Species),
               <span class="dt">radius =</span> <span class="fl">0.211</span>))
<span class="kw">with</span>(<span class="kw">subset</span>(iris, Species ==<span class="st"> &quot;virginica&quot;</span>), 
     <span class="kw">spheres3d</span>(Sepal.Length, Sepal.Width, Petal.Length, 
               <span class="dt">col=</span><span class="kw">as.numeric</span>(Species),
               <span class="dt">radius =</span> <span class="fl">0.211</span>))
<span class="kw">aspect3d</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>)
<span class="kw">decorate3d</span>()
subid &lt;-<span class="st"> </span><span class="kw">currentSubscene3d</span>()</code></pre>
<canvas id="toggletextureCanvas" style="display: none;" width="256" height="256">
Your browser does not support the HTML5 canvas element.
</canvas>
<!-- ****** spheres object 25 ****** -->
<script id="togglevshader25" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec3 aNorm;
uniform mat4 normMatrix;
varying vec3 vNormal;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
vNormal = normalize((normMatrix * vec4(aNorm, 1.)).xyz);
}
</script>
<script id="togglefshader25" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec3 vNormal;
void main(void) {
vec3 eye = normalize(-vPosition.xyz);
const vec3 emission = vec3(0., 0., 0.);
const vec3 ambient1 = vec3(0., 0., 0.);
const vec3 specular1 = vec3(1., 1., 1.);// light*material
const float shininess1 = 50.;
vec4 colDiff1 = vec4(vCol.rgb * vec3(1., 1., 1.), vCol.a);
const vec3 lightDir1 = vec3(0., 0., 1.);
vec3 halfVec1 = normalize(lightDir1 + eye);
vec4 lighteffect = vec4(emission, 0.);
vec3 n = normalize(vNormal);
n = -faceforward(n, n, eye);
vec3 col1 = ambient1;
float nDotL1 = dot(n, lightDir1);
col1 = col1 + max(nDotL1, 0.) * colDiff1.rgb;
col1 = col1 + pow(max(dot(halfVec1, n), 0.), shininess1) * specular1;
lighteffect = lighteffect + vec4(col1, colDiff1.a);
gl_FragColor = lighteffect;
}
</script>
<!-- ****** spheres object 26 ****** -->
<script id="togglevshader26" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec3 aNorm;
uniform mat4 normMatrix;
varying vec3 vNormal;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
vNormal = normalize((normMatrix * vec4(aNorm, 1.)).xyz);
}
</script>
<script id="togglefshader26" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec3 vNormal;
void main(void) {
vec3 eye = normalize(-vPosition.xyz);
const vec3 emission = vec3(0., 0., 0.);
const vec3 ambient1 = vec3(0., 0., 0.);
const vec3 specular1 = vec3(1., 1., 1.);// light*material
const float shininess1 = 50.;
vec4 colDiff1 = vec4(vCol.rgb * vec3(1., 1., 1.), vCol.a);
const vec3 lightDir1 = vec3(0., 0., 1.);
vec3 halfVec1 = normalize(lightDir1 + eye);
vec4 lighteffect = vec4(emission, 0.);
vec3 n = normalize(vNormal);
n = -faceforward(n, n, eye);
vec3 col1 = ambient1;
float nDotL1 = dot(n, lightDir1);
col1 = col1 + max(nDotL1, 0.) * colDiff1.rgb;
col1 = col1 + pow(max(dot(halfVec1, n), 0.), shininess1) * specular1;
lighteffect = lighteffect + vec4(col1, colDiff1.a);
gl_FragColor = lighteffect;
}
</script>
<!-- ****** spheres object 27 ****** -->
<script id="togglevshader27" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec3 aNorm;
uniform mat4 normMatrix;
varying vec3 vNormal;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
vNormal = normalize((normMatrix * vec4(aNorm, 1.)).xyz);
}
</script>
<script id="togglefshader27" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec3 vNormal;
void main(void) {
vec3 eye = normalize(-vPosition.xyz);
const vec3 emission = vec3(0., 0., 0.);
const vec3 ambient1 = vec3(0., 0., 0.);
const vec3 specular1 = vec3(1., 1., 1.);// light*material
const float shininess1 = 50.;
vec4 colDiff1 = vec4(vCol.rgb * vec3(1., 1., 1.), vCol.a);
const vec3 lightDir1 = vec3(0., 0., 1.);
vec3 halfVec1 = normalize(lightDir1 + eye);
vec4 lighteffect = vec4(emission, 0.);
vec3 n = normalize(vNormal);
n = -faceforward(n, n, eye);
vec3 col1 = ambient1;
float nDotL1 = dot(n, lightDir1);
col1 = col1 + max(nDotL1, 0.) * colDiff1.rgb;
col1 = col1 + pow(max(dot(halfVec1, n), 0.), shininess1) * specular1;
lighteffect = lighteffect + vec4(col1, colDiff1.a);
gl_FragColor = lighteffect;
}
</script>
<!-- ****** text object 29 ****** -->
<script id="togglevshader29" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="togglefshader29" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** text object 30 ****** -->
<script id="togglevshader30" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="togglefshader30" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** text object 31 ****** -->
<script id="togglevshader31" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="togglefshader31" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** lines object 32 ****** -->
<script id="togglevshader32" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="togglefshader32" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<!-- ****** text object 33 ****** -->
<script id="togglevshader33" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="togglefshader33" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** lines object 34 ****** -->
<script id="togglevshader34" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="togglefshader34" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<!-- ****** text object 35 ****** -->
<script id="togglevshader35" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="togglefshader35" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** lines object 36 ****** -->
<script id="togglevshader36" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="togglefshader36" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<!-- ****** text object 37 ****** -->
<script id="togglevshader37" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="togglefshader37" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** lines object 38 ****** -->
<script id="togglevshader38" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="togglefshader38" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<script type="text/javascript">
var togglergl = new rglClass();
togglergl.start = function() {
var debug = function(msg) {
document.getElementById("toggledebug").innerHTML = msg;
}
debug("");
var canvas = document.getElementById("togglecanvas");
if (!window.WebGLRenderingContext){
debug(" Your browser does not support WebGL. See <a href=\"http://get.webgl.org\">http://get.webgl.org</a>");
return;
}
try {
// Try to grab the standard context. If it fails, fallback to experimental.
this.gl = canvas.getContext("webgl") 
|| canvas.getContext("experimental-webgl");
}
catch(e) {}
if ( !this.gl ) {
debug(" Your browser appears to support WebGL, but did not create a WebGL context.  See <a href=\"http://get.webgl.org\">http://get.webgl.org</a>");
return;
}
var gl = this.gl;
var width = 481;  var height = 481;
canvas.width = width;   canvas.height = height;
var normMatrix = new CanvasMatrix4();
var saveMat = new Object();
var distance;
var posLoc = 0;
var colLoc = 1;
var activeSubscene = 19;
this.flags[19] = 1195;
this.zoom[19] = 1;
this.FOV[19] = 30;
this.viewport[19] = [0, 0, 480, 480];
this.userMatrix[19] = new CanvasMatrix4();
this.userMatrix[19].load([
1, 0, 0, 0,
0, 0.3420201, -0.9396926, 0,
0, 0.9396926, 0.3420201, 0,
0, 0, 0, 1
]);
this.clipplanes[19] = [];
this.opaque[19] = [25,26,27,29,30,31,32,33,34,35,36,37,38];
this.transparent[19] = [];
this.subscenes[19] = [];
function getPowerOfTwo(value) {
var pow = 1;
while(pow<value) {
pow *= 2;
}
return pow;
}
function handleLoadedTexture(texture, textureCanvas) {
gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);
gl.bindTexture(gl.TEXTURE_2D, texture);
gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, textureCanvas);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);
gl.generateMipmap(gl.TEXTURE_2D);
gl.bindTexture(gl.TEXTURE_2D, null);
}
function loadImageToTexture(filename, texture) {   
var canvas = document.getElementById("toggletextureCanvas");
var ctx = canvas.getContext("2d");
var image = new Image();
image.onload = function() {
var w = image.width;
var h = image.height;
var canvasX = getPowerOfTwo(w);
var canvasY = getPowerOfTwo(h);
canvas.width = canvasX;
canvas.height = canvasY;
ctx.imageSmoothingEnabled = true;
ctx.drawImage(image, 0, 0, canvasX, canvasY);
handleLoadedTexture(texture, canvas);
togglergl.drawScene();
}
image.src = filename;
}      
function drawTextToCanvas(text, cex) {
var canvasX, canvasY;
var textX, textY;
var textHeight = 20 * cex;
var textColour = "white";
var fontFamily = "Arial";
var backgroundColour = "rgba(0,0,0,0)";
var canvas = document.getElementById("toggletextureCanvas");
var ctx = canvas.getContext("2d");
ctx.font = textHeight+"px "+fontFamily;
canvasX = 1;
var widths = [];
for (var i = 0; i < text.length; i++)  {
widths[i] = ctx.measureText(text[i]).width;
canvasX = (widths[i] > canvasX) ? widths[i] : canvasX;
}     
canvasX = getPowerOfTwo(canvasX);
var offset = 2*textHeight; // offset to first baseline
var skip = 2*textHeight;   // skip between baselines      
canvasY = getPowerOfTwo(offset + text.length*skip);
canvas.width = canvasX;
canvas.height = canvasY;
ctx.fillStyle = backgroundColour;
ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
ctx.fillStyle = textColour;
ctx.textAlign = "left";
ctx.textBaseline = "alphabetic";
ctx.font = textHeight+"px "+fontFamily;
for(var i = 0; i < text.length; i++) {
textY = i*skip + offset;
ctx.fillText(text[i], 0,  textY);
}
return {canvasX:canvasX, canvasY:canvasY,
widths:widths, textHeight:textHeight,
offset:offset, skip:skip};
}
// ****** sphere object ******
var sphereBuf = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, sphereBuf);
gl.bufferData(gl.ARRAY_BUFFER, plot3drgl.sphereverts, gl.STATIC_DRAW);
var sphereIbuf = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sphereIbuf);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, plot3drgl.spherefaces, gl.STATIC_DRAW);
// ****** spheres object 25 ******
this.flags[25] = 3;
this.prog[25]  = gl.createProgram();
gl.attachShader(this.prog[25], this.getShader( gl, "togglevshader25" ));
gl.attachShader(this.prog[25], this.getShader( gl, "togglefshader25" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[25], 0, "aPos");
gl.bindAttribLocation(this.prog[25], 1, "aCol");
gl.linkProgram(this.prog[25]);
this.offsets[25]={vofs:0, cofs:3, nofs:-1, radofs:7, oofs:-1, tofs:-1, stride:8};
var v=new Float32Array([
5.1, 3.5, 1.4, 0, 0, 0, 1, 0.211,
4.9, 3, 1.4, 0, 0, 0, 1, 0.211,
4.7, 3.2, 1.3, 0, 0, 0, 1, 0.211,
4.6, 3.1, 1.5, 0, 0, 0, 1, 0.211,
5, 3.6, 1.4, 0, 0, 0, 1, 0.211,
5.4, 3.9, 1.7, 0, 0, 0, 1, 0.211,
4.6, 3.4, 1.4, 0, 0, 0, 1, 0.211,
5, 3.4, 1.5, 0, 0, 0, 1, 0.211,
4.4, 2.9, 1.4, 0, 0, 0, 1, 0.211,
4.9, 3.1, 1.5, 0, 0, 0, 1, 0.211,
5.4, 3.7, 1.5, 0, 0, 0, 1, 0.211,
4.8, 3.4, 1.6, 0, 0, 0, 1, 0.211,
4.8, 3, 1.4, 0, 0, 0, 1, 0.211,
4.3, 3, 1.1, 0, 0, 0, 1, 0.211,
5.8, 4, 1.2, 0, 0, 0, 1, 0.211,
5.7, 4.4, 1.5, 0, 0, 0, 1, 0.211,
5.4, 3.9, 1.3, 0, 0, 0, 1, 0.211,
5.1, 3.5, 1.4, 0, 0, 0, 1, 0.211,
5.7, 3.8, 1.7, 0, 0, 0, 1, 0.211,
5.1, 3.8, 1.5, 0, 0, 0, 1, 0.211,
5.4, 3.4, 1.7, 0, 0, 0, 1, 0.211,
5.1, 3.7, 1.5, 0, 0, 0, 1, 0.211,
4.6, 3.6, 1, 0, 0, 0, 1, 0.211,
5.1, 3.3, 1.7, 0, 0, 0, 1, 0.211,
4.8, 3.4, 1.9, 0, 0, 0, 1, 0.211,
5, 3, 1.6, 0, 0, 0, 1, 0.211,
5, 3.4, 1.6, 0, 0, 0, 1, 0.211,
5.2, 3.5, 1.5, 0, 0, 0, 1, 0.211,
5.2, 3.4, 1.4, 0, 0, 0, 1, 0.211,
4.7, 3.2, 1.6, 0, 0, 0, 1, 0.211,
4.8, 3.1, 1.6, 0, 0, 0, 1, 0.211,
5.4, 3.4, 1.5, 0, 0, 0, 1, 0.211,
5.2, 4.1, 1.5, 0, 0, 0, 1, 0.211,
5.5, 4.2, 1.4, 0, 0, 0, 1, 0.211,
4.9, 3.1, 1.5, 0, 0, 0, 1, 0.211,
5, 3.2, 1.2, 0, 0, 0, 1, 0.211,
5.5, 3.5, 1.3, 0, 0, 0, 1, 0.211,
4.9, 3.6, 1.4, 0, 0, 0, 1, 0.211,
4.4, 3, 1.3, 0, 0, 0, 1, 0.211,
5.1, 3.4, 1.5, 0, 0, 0, 1, 0.211,
5, 3.5, 1.3, 0, 0, 0, 1, 0.211,
4.5, 2.3, 1.3, 0, 0, 0, 1, 0.211,
4.4, 3.2, 1.3, 0, 0, 0, 1, 0.211,
5, 3.5, 1.6, 0, 0, 0, 1, 0.211,
5.1, 3.8, 1.9, 0, 0, 0, 1, 0.211,
4.8, 3, 1.4, 0, 0, 0, 1, 0.211,
5.1, 3.8, 1.6, 0, 0, 0, 1, 0.211,
4.6, 3.2, 1.4, 0, 0, 0, 1, 0.211,
5.3, 3.7, 1.5, 0, 0, 0, 1, 0.211,
5, 3.3, 1.4, 0, 0, 0, 1, 0.211
]);
this.values[25] = v;
this.normLoc[25] = gl.getAttribLocation(this.prog[25], "aNorm");
this.mvMatLoc[25] = gl.getUniformLocation(this.prog[25],"mvMatrix");
this.prMatLoc[25] = gl.getUniformLocation(this.prog[25],"prMatrix");
this.normMatLoc[25] = gl.getUniformLocation(this.prog[25],"normMatrix");
// ****** spheres object 26 ******
this.flags[26] = 3;
this.prog[26]  = gl.createProgram();
gl.attachShader(this.prog[26], this.getShader( gl, "togglevshader26" ));
gl.attachShader(this.prog[26], this.getShader( gl, "togglefshader26" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[26], 0, "aPos");
gl.bindAttribLocation(this.prog[26], 1, "aCol");
gl.linkProgram(this.prog[26]);
this.offsets[26]={vofs:0, cofs:3, nofs:-1, radofs:7, oofs:-1, tofs:-1, stride:8};
var v=new Float32Array([
7, 3.2, 4.7, 1, 0, 0, 1, 0.211,
6.4, 3.2, 4.5, 1, 0, 0, 1, 0.211,
6.9, 3.1, 4.9, 1, 0, 0, 1, 0.211,
5.5, 2.3, 4, 1, 0, 0, 1, 0.211,
6.5, 2.8, 4.6, 1, 0, 0, 1, 0.211,
5.7, 2.8, 4.5, 1, 0, 0, 1, 0.211,
6.3, 3.3, 4.7, 1, 0, 0, 1, 0.211,
4.9, 2.4, 3.3, 1, 0, 0, 1, 0.211,
6.6, 2.9, 4.6, 1, 0, 0, 1, 0.211,
5.2, 2.7, 3.9, 1, 0, 0, 1, 0.211,
5, 2, 3.5, 1, 0, 0, 1, 0.211,
5.9, 3, 4.2, 1, 0, 0, 1, 0.211,
6, 2.2, 4, 1, 0, 0, 1, 0.211,
6.1, 2.9, 4.7, 1, 0, 0, 1, 0.211,
5.6, 2.9, 3.6, 1, 0, 0, 1, 0.211,
6.7, 3.1, 4.4, 1, 0, 0, 1, 0.211,
5.6, 3, 4.5, 1, 0, 0, 1, 0.211,
5.8, 2.7, 4.1, 1, 0, 0, 1, 0.211,
6.2, 2.2, 4.5, 1, 0, 0, 1, 0.211,
5.6, 2.5, 3.9, 1, 0, 0, 1, 0.211,
5.9, 3.2, 4.8, 1, 0, 0, 1, 0.211,
6.1, 2.8, 4, 1, 0, 0, 1, 0.211,
6.3, 2.5, 4.9, 1, 0, 0, 1, 0.211,
6.1, 2.8, 4.7, 1, 0, 0, 1, 0.211,
6.4, 2.9, 4.3, 1, 0, 0, 1, 0.211,
6.6, 3, 4.4, 1, 0, 0, 1, 0.211,
6.8, 2.8, 4.8, 1, 0, 0, 1, 0.211,
6.7, 3, 5, 1, 0, 0, 1, 0.211,
6, 2.9, 4.5, 1, 0, 0, 1, 0.211,
5.7, 2.6, 3.5, 1, 0, 0, 1, 0.211,
5.5, 2.4, 3.8, 1, 0, 0, 1, 0.211,
5.5, 2.4, 3.7, 1, 0, 0, 1, 0.211,
5.8, 2.7, 3.9, 1, 0, 0, 1, 0.211,
6, 2.7, 5.1, 1, 0, 0, 1, 0.211,
5.4, 3, 4.5, 1, 0, 0, 1, 0.211,
6, 3.4, 4.5, 1, 0, 0, 1, 0.211,
6.7, 3.1, 4.7, 1, 0, 0, 1, 0.211,
6.3, 2.3, 4.4, 1, 0, 0, 1, 0.211,
5.6, 3, 4.1, 1, 0, 0, 1, 0.211,
5.5, 2.5, 4, 1, 0, 0, 1, 0.211,
5.5, 2.6, 4.4, 1, 0, 0, 1, 0.211,
6.1, 3, 4.6, 1, 0, 0, 1, 0.211,
5.8, 2.6, 4, 1, 0, 0, 1, 0.211,
5, 2.3, 3.3, 1, 0, 0, 1, 0.211,
5.6, 2.7, 4.2, 1, 0, 0, 1, 0.211,
5.7, 3, 4.2, 1, 0, 0, 1, 0.211,
5.7, 2.9, 4.2, 1, 0, 0, 1, 0.211,
6.2, 2.9, 4.3, 1, 0, 0, 1, 0.211,
5.1, 2.5, 3, 1, 0, 0, 1, 0.211,
5.7, 2.8, 4.1, 1, 0, 0, 1, 0.211
]);
this.values[26] = v;
this.normLoc[26] = gl.getAttribLocation(this.prog[26], "aNorm");
this.mvMatLoc[26] = gl.getUniformLocation(this.prog[26],"mvMatrix");
this.prMatLoc[26] = gl.getUniformLocation(this.prog[26],"prMatrix");
this.normMatLoc[26] = gl.getUniformLocation(this.prog[26],"normMatrix");
// ****** spheres object 27 ******
this.flags[27] = 3;
this.prog[27]  = gl.createProgram();
gl.attachShader(this.prog[27], this.getShader( gl, "togglevshader27" ));
gl.attachShader(this.prog[27], this.getShader( gl, "togglefshader27" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[27], 0, "aPos");
gl.bindAttribLocation(this.prog[27], 1, "aCol");
gl.linkProgram(this.prog[27]);
this.offsets[27]={vofs:0, cofs:3, nofs:-1, radofs:7, oofs:-1, tofs:-1, stride:8};
var v=new Float32Array([
6.3, 3.3, 6, 0, 0.8039216, 0, 1, 0.211,
5.8, 2.7, 5.1, 0, 0.8039216, 0, 1, 0.211,
7.1, 3, 5.9, 0, 0.8039216, 0, 1, 0.211,
6.3, 2.9, 5.6, 0, 0.8039216, 0, 1, 0.211,
6.5, 3, 5.8, 0, 0.8039216, 0, 1, 0.211,
7.6, 3, 6.6, 0, 0.8039216, 0, 1, 0.211,
4.9, 2.5, 4.5, 0, 0.8039216, 0, 1, 0.211,
7.3, 2.9, 6.3, 0, 0.8039216, 0, 1, 0.211,
6.7, 2.5, 5.8, 0, 0.8039216, 0, 1, 0.211,
7.2, 3.6, 6.1, 0, 0.8039216, 0, 1, 0.211,
6.5, 3.2, 5.1, 0, 0.8039216, 0, 1, 0.211,
6.4, 2.7, 5.3, 0, 0.8039216, 0, 1, 0.211,
6.8, 3, 5.5, 0, 0.8039216, 0, 1, 0.211,
5.7, 2.5, 5, 0, 0.8039216, 0, 1, 0.211,
5.8, 2.8, 5.1, 0, 0.8039216, 0, 1, 0.211,
6.4, 3.2, 5.3, 0, 0.8039216, 0, 1, 0.211,
6.5, 3, 5.5, 0, 0.8039216, 0, 1, 0.211,
7.7, 3.8, 6.7, 0, 0.8039216, 0, 1, 0.211,
7.7, 2.6, 6.9, 0, 0.8039216, 0, 1, 0.211,
6, 2.2, 5, 0, 0.8039216, 0, 1, 0.211,
6.9, 3.2, 5.7, 0, 0.8039216, 0, 1, 0.211,
5.6, 2.8, 4.9, 0, 0.8039216, 0, 1, 0.211,
7.7, 2.8, 6.7, 0, 0.8039216, 0, 1, 0.211,
6.3, 2.7, 4.9, 0, 0.8039216, 0, 1, 0.211,
6.7, 3.3, 5.7, 0, 0.8039216, 0, 1, 0.211,
7.2, 3.2, 6, 0, 0.8039216, 0, 1, 0.211,
6.2, 2.8, 4.8, 0, 0.8039216, 0, 1, 0.211,
6.1, 3, 4.9, 0, 0.8039216, 0, 1, 0.211,
6.4, 2.8, 5.6, 0, 0.8039216, 0, 1, 0.211,
7.2, 3, 5.8, 0, 0.8039216, 0, 1, 0.211,
7.4, 2.8, 6.1, 0, 0.8039216, 0, 1, 0.211,
7.9, 3.8, 6.4, 0, 0.8039216, 0, 1, 0.211,
6.4, 2.8, 5.6, 0, 0.8039216, 0, 1, 0.211,
6.3, 2.8, 5.1, 0, 0.8039216, 0, 1, 0.211,
6.1, 2.6, 5.6, 0, 0.8039216, 0, 1, 0.211,
7.7, 3, 6.1, 0, 0.8039216, 0, 1, 0.211,
6.3, 3.4, 5.6, 0, 0.8039216, 0, 1, 0.211,
6.4, 3.1, 5.5, 0, 0.8039216, 0, 1, 0.211,
6, 3, 4.8, 0, 0.8039216, 0, 1, 0.211,
6.9, 3.1, 5.4, 0, 0.8039216, 0, 1, 0.211,
6.7, 3.1, 5.6, 0, 0.8039216, 0, 1, 0.211,
6.9, 3.1, 5.1, 0, 0.8039216, 0, 1, 0.211,
5.8, 2.7, 5.1, 0, 0.8039216, 0, 1, 0.211,
6.8, 3.2, 5.9, 0, 0.8039216, 0, 1, 0.211,
6.7, 3.3, 5.7, 0, 0.8039216, 0, 1, 0.211,
6.7, 3, 5.2, 0, 0.8039216, 0, 1, 0.211,
6.3, 2.5, 5, 0, 0.8039216, 0, 1, 0.211,
6.5, 3, 5.2, 0, 0.8039216, 0, 1, 0.211,
6.2, 3.4, 5.4, 0, 0.8039216, 0, 1, 0.211,
5.9, 3, 5.1, 0, 0.8039216, 0, 1, 0.211
]);
this.values[27] = v;
this.normLoc[27] = gl.getAttribLocation(this.prog[27], "aNorm");
this.mvMatLoc[27] = gl.getUniformLocation(this.prog[27],"mvMatrix");
this.prMatLoc[27] = gl.getUniformLocation(this.prog[27],"prMatrix");
this.normMatLoc[27] = gl.getUniformLocation(this.prog[27],"normMatrix");
// ****** text object 29 ******
this.flags[29] = 40;
this.prog[29]  = gl.createProgram();
gl.attachShader(this.prog[29], this.getShader( gl, "togglevshader29" ));
gl.attachShader(this.prog[29], this.getShader( gl, "togglefshader29" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[29], 0, "aPos");
gl.bindAttribLocation(this.prog[29], 1, "aCol");
gl.linkProgram(this.prog[29]);
var texts = [
"x"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[29] = gl.getAttribLocation(this.prog[29], "aOfs");
this.texture[29] = gl.createTexture();
this.texLoc[29] = gl.getAttribLocation(this.prog[29], "aTexcoord");
this.sampler[29] = gl.getUniformLocation(this.prog[29],"uSampler");
handleLoadedTexture(this.texture[29], document.getElementById("toggletextureCanvas"));
this.offsets[29]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
6.1, 1.432677, -0.3946676, 0, -0.5, 0.5, 0.5,
6.1, 1.432677, -0.3946676, 1, -0.5, 0.5, 0.5,
6.1, 1.432677, -0.3946676, 1, 1.5, 0.5, 0.5,
6.1, 1.432677, -0.3946676, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<1; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[29]["stride"]*(4*i + j) + this.offsets[29]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[29] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3
]);
this.buf[29] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[29]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[29], gl.STATIC_DRAW);
this.ibuf[29] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[29]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[29] = gl.getUniformLocation(this.prog[29],"mvMatrix");
this.prMatLoc[29] = gl.getUniformLocation(this.prog[29],"prMatrix");
this.textScaleLoc[29] = gl.getUniformLocation(this.prog[29],"textScale");
// ****** text object 30 ******
this.flags[30] = 40;
this.prog[30]  = gl.createProgram();
gl.attachShader(this.prog[30], this.getShader( gl, "togglevshader30" ));
gl.attachShader(this.prog[30], this.getShader( gl, "togglefshader30" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[30], 0, "aPos");
gl.bindAttribLocation(this.prog[30], 1, "aCol");
gl.linkProgram(this.prog[30]);
var texts = [
"y"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[30] = gl.getAttribLocation(this.prog[30], "aOfs");
this.texture[30] = gl.createTexture();
this.texLoc[30] = gl.getAttribLocation(this.prog[30], "aTexcoord");
this.sampler[30] = gl.getUniformLocation(this.prog[30],"uSampler");
handleLoadedTexture(this.texture[30], document.getElementById("toggletextureCanvas"));
this.offsets[30]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
3.449016, 3.2, -0.3946676, 0, -0.5, 0.5, 0.5,
3.449016, 3.2, -0.3946676, 1, -0.5, 0.5, 0.5,
3.449016, 3.2, -0.3946676, 1, 1.5, 0.5, 0.5,
3.449016, 3.2, -0.3946676, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<1; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[30]["stride"]*(4*i + j) + this.offsets[30]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[30] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3
]);
this.buf[30] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[30]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[30], gl.STATIC_DRAW);
this.ibuf[30] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[30]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[30] = gl.getUniformLocation(this.prog[30],"mvMatrix");
this.prMatLoc[30] = gl.getUniformLocation(this.prog[30],"prMatrix");
this.textScaleLoc[30] = gl.getUniformLocation(this.prog[30],"textScale");
// ****** text object 31 ******
this.flags[31] = 40;
this.prog[31]  = gl.createProgram();
gl.attachShader(this.prog[31], this.getShader( gl, "togglevshader31" ));
gl.attachShader(this.prog[31], this.getShader( gl, "togglefshader31" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[31], 0, "aPos");
gl.bindAttribLocation(this.prog[31], 1, "aCol");
gl.linkProgram(this.prog[31]);
var texts = [
"z"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[31] = gl.getAttribLocation(this.prog[31], "aOfs");
this.texture[31] = gl.createTexture();
this.texLoc[31] = gl.getAttribLocation(this.prog[31], "aTexcoord");
this.sampler[31] = gl.getUniformLocation(this.prog[31],"uSampler");
handleLoadedTexture(this.texture[31], document.getElementById("toggletextureCanvas"));
this.offsets[31]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
3.449016, 1.432677, 3.95, 0, -0.5, 0.5, 0.5,
3.449016, 1.432677, 3.95, 1, -0.5, 0.5, 0.5,
3.449016, 1.432677, 3.95, 1, 1.5, 0.5, 0.5,
3.449016, 1.432677, 3.95, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<1; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[31]["stride"]*(4*i + j) + this.offsets[31]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[31] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3
]);
this.buf[31] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[31]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[31], gl.STATIC_DRAW);
this.ibuf[31] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[31]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[31] = gl.getUniformLocation(this.prog[31],"mvMatrix");
this.prMatLoc[31] = gl.getUniformLocation(this.prog[31],"prMatrix");
this.textScaleLoc[31] = gl.getUniformLocation(this.prog[31],"textScale");
// ****** lines object 32 ******
this.flags[32] = 128;
this.prog[32]  = gl.createProgram();
gl.attachShader(this.prog[32], this.getShader( gl, "togglevshader32" ));
gl.attachShader(this.prog[32], this.getShader( gl, "togglefshader32" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[32], 0, "aPos");
gl.bindAttribLocation(this.prog[32], 1, "aCol");
gl.linkProgram(this.prog[32]);
this.offsets[32]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:-1, tofs:-1, stride:3};
var v=new Float32Array([
5, 1.840521, 0.607948,
8, 1.840521, 0.607948,
5, 1.840521, 0.607948,
5, 1.772546, 0.4408454,
6, 1.840521, 0.607948,
6, 1.772546, 0.4408454,
7, 1.840521, 0.607948,
7, 1.772546, 0.4408454,
8, 1.840521, 0.607948,
8, 1.772546, 0.4408454
]);
this.values[32] = v;
this.buf[32] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[32]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[32], gl.STATIC_DRAW);
this.mvMatLoc[32] = gl.getUniformLocation(this.prog[32],"mvMatrix");
this.prMatLoc[32] = gl.getUniformLocation(this.prog[32],"prMatrix");
// ****** text object 33 ******
this.flags[33] = 40;
this.prog[33]  = gl.createProgram();
gl.attachShader(this.prog[33], this.getShader( gl, "togglevshader33" ));
gl.attachShader(this.prog[33], this.getShader( gl, "togglefshader33" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[33], 0, "aPos");
gl.bindAttribLocation(this.prog[33], 1, "aCol");
gl.linkProgram(this.prog[33]);
var texts = [
"5",
"6",
"7",
"8"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[33] = gl.getAttribLocation(this.prog[33], "aOfs");
this.texture[33] = gl.createTexture();
this.texLoc[33] = gl.getAttribLocation(this.prog[33], "aTexcoord");
this.sampler[33] = gl.getUniformLocation(this.prog[33],"uSampler");
handleLoadedTexture(this.texture[33], document.getElementById("toggletextureCanvas"));
this.offsets[33]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
5, 1.636598, 0.1066402, 0, -0.5, 0.5, 0.5,
5, 1.636598, 0.1066402, 1, -0.5, 0.5, 0.5,
5, 1.636598, 0.1066402, 1, 1.5, 0.5, 0.5,
5, 1.636598, 0.1066402, 0, 1.5, 0.5, 0.5,
6, 1.636598, 0.1066402, 0, -0.5, 0.5, 0.5,
6, 1.636598, 0.1066402, 1, -0.5, 0.5, 0.5,
6, 1.636598, 0.1066402, 1, 1.5, 0.5, 0.5,
6, 1.636598, 0.1066402, 0, 1.5, 0.5, 0.5,
7, 1.636598, 0.1066402, 0, -0.5, 0.5, 0.5,
7, 1.636598, 0.1066402, 1, -0.5, 0.5, 0.5,
7, 1.636598, 0.1066402, 1, 1.5, 0.5, 0.5,
7, 1.636598, 0.1066402, 0, 1.5, 0.5, 0.5,
8, 1.636598, 0.1066402, 0, -0.5, 0.5, 0.5,
8, 1.636598, 0.1066402, 1, -0.5, 0.5, 0.5,
8, 1.636598, 0.1066402, 1, 1.5, 0.5, 0.5,
8, 1.636598, 0.1066402, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<4; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[33]["stride"]*(4*i + j) + this.offsets[33]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[33] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3,
4, 5, 6, 4, 6, 7,
8, 9, 10, 8, 10, 11,
12, 13, 14, 12, 14, 15
]);
this.buf[33] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[33]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[33], gl.STATIC_DRAW);
this.ibuf[33] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[33]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[33] = gl.getUniformLocation(this.prog[33],"mvMatrix");
this.prMatLoc[33] = gl.getUniformLocation(this.prog[33],"prMatrix");
this.textScaleLoc[33] = gl.getUniformLocation(this.prog[33],"textScale");
// ****** lines object 34 ******
this.flags[34] = 128;
this.prog[34]  = gl.createProgram();
gl.attachShader(this.prog[34], this.getShader( gl, "togglevshader34" ));
gl.attachShader(this.prog[34], this.getShader( gl, "togglefshader34" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[34], 0, "aPos");
gl.bindAttribLocation(this.prog[34], 1, "aCol");
gl.linkProgram(this.prog[34]);
this.offsets[34]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:-1, tofs:-1, stride:3};
var v=new Float32Array([
4.060781, 2, 0.607948,
4.060781, 4.5, 0.607948,
4.060781, 2, 0.607948,
3.958821, 2, 0.4408454,
4.060781, 2.5, 0.607948,
3.958821, 2.5, 0.4408454,
4.060781, 3, 0.607948,
3.958821, 3, 0.4408454,
4.060781, 3.5, 0.607948,
3.958821, 3.5, 0.4408454,
4.060781, 4, 0.607948,
3.958821, 4, 0.4408454,
4.060781, 4.5, 0.607948,
3.958821, 4.5, 0.4408454
]);
this.values[34] = v;
this.buf[34] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[34]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[34], gl.STATIC_DRAW);
this.mvMatLoc[34] = gl.getUniformLocation(this.prog[34],"mvMatrix");
this.prMatLoc[34] = gl.getUniformLocation(this.prog[34],"prMatrix");
// ****** text object 35 ******
this.flags[35] = 40;
this.prog[35]  = gl.createProgram();
gl.attachShader(this.prog[35], this.getShader( gl, "togglevshader35" ));
gl.attachShader(this.prog[35], this.getShader( gl, "togglefshader35" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[35], 0, "aPos");
gl.bindAttribLocation(this.prog[35], 1, "aCol");
gl.linkProgram(this.prog[35]);
var texts = [
"2",
"2.5",
"3",
"3.5",
"4",
"4.5"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[35] = gl.getAttribLocation(this.prog[35], "aOfs");
this.texture[35] = gl.createTexture();
this.texLoc[35] = gl.getAttribLocation(this.prog[35], "aTexcoord");
this.sampler[35] = gl.getUniformLocation(this.prog[35],"uSampler");
handleLoadedTexture(this.texture[35], document.getElementById("toggletextureCanvas"));
this.offsets[35]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
3.754899, 2, 0.1066402, 0, -0.5, 0.5, 0.5,
3.754899, 2, 0.1066402, 1, -0.5, 0.5, 0.5,
3.754899, 2, 0.1066402, 1, 1.5, 0.5, 0.5,
3.754899, 2, 0.1066402, 0, 1.5, 0.5, 0.5,
3.754899, 2.5, 0.1066402, 0, -0.5, 0.5, 0.5,
3.754899, 2.5, 0.1066402, 1, -0.5, 0.5, 0.5,
3.754899, 2.5, 0.1066402, 1, 1.5, 0.5, 0.5,
3.754899, 2.5, 0.1066402, 0, 1.5, 0.5, 0.5,
3.754899, 3, 0.1066402, 0, -0.5, 0.5, 0.5,
3.754899, 3, 0.1066402, 1, -0.5, 0.5, 0.5,
3.754899, 3, 0.1066402, 1, 1.5, 0.5, 0.5,
3.754899, 3, 0.1066402, 0, 1.5, 0.5, 0.5,
3.754899, 3.5, 0.1066402, 0, -0.5, 0.5, 0.5,
3.754899, 3.5, 0.1066402, 1, -0.5, 0.5, 0.5,
3.754899, 3.5, 0.1066402, 1, 1.5, 0.5, 0.5,
3.754899, 3.5, 0.1066402, 0, 1.5, 0.5, 0.5,
3.754899, 4, 0.1066402, 0, -0.5, 0.5, 0.5,
3.754899, 4, 0.1066402, 1, -0.5, 0.5, 0.5,
3.754899, 4, 0.1066402, 1, 1.5, 0.5, 0.5,
3.754899, 4, 0.1066402, 0, 1.5, 0.5, 0.5,
3.754899, 4.5, 0.1066402, 0, -0.5, 0.5, 0.5,
3.754899, 4.5, 0.1066402, 1, -0.5, 0.5, 0.5,
3.754899, 4.5, 0.1066402, 1, 1.5, 0.5, 0.5,
3.754899, 4.5, 0.1066402, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<6; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[35]["stride"]*(4*i + j) + this.offsets[35]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[35] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3,
4, 5, 6, 4, 6, 7,
8, 9, 10, 8, 10, 11,
12, 13, 14, 12, 14, 15,
16, 17, 18, 16, 18, 19,
20, 21, 22, 20, 22, 23
]);
this.buf[35] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[35]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[35], gl.STATIC_DRAW);
this.ibuf[35] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[35]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[35] = gl.getUniformLocation(this.prog[35],"mvMatrix");
this.prMatLoc[35] = gl.getUniformLocation(this.prog[35],"prMatrix");
this.textScaleLoc[35] = gl.getUniformLocation(this.prog[35],"textScale");
// ****** lines object 36 ******
this.flags[36] = 128;
this.prog[36]  = gl.createProgram();
gl.attachShader(this.prog[36], this.getShader( gl, "togglevshader36" ));
gl.attachShader(this.prog[36], this.getShader( gl, "togglefshader36" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[36], 0, "aPos");
gl.bindAttribLocation(this.prog[36], 1, "aCol");
gl.linkProgram(this.prog[36]);
this.offsets[36]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:-1, tofs:-1, stride:3};
var v=new Float32Array([
4.060781, 1.840521, 1,
4.060781, 1.840521, 7,
4.060781, 1.840521, 1,
3.958821, 1.772546, 1,
4.060781, 1.840521, 2,
3.958821, 1.772546, 2,
4.060781, 1.840521, 3,
3.958821, 1.772546, 3,
4.060781, 1.840521, 4,
3.958821, 1.772546, 4,
4.060781, 1.840521, 5,
3.958821, 1.772546, 5,
4.060781, 1.840521, 6,
3.958821, 1.772546, 6,
4.060781, 1.840521, 7,
3.958821, 1.772546, 7
]);
this.values[36] = v;
this.buf[36] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[36]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[36], gl.STATIC_DRAW);
this.mvMatLoc[36] = gl.getUniformLocation(this.prog[36],"mvMatrix");
this.prMatLoc[36] = gl.getUniformLocation(this.prog[36],"prMatrix");
// ****** text object 37 ******
this.flags[37] = 40;
this.prog[37]  = gl.createProgram();
gl.attachShader(this.prog[37], this.getShader( gl, "togglevshader37" ));
gl.attachShader(this.prog[37], this.getShader( gl, "togglefshader37" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[37], 0, "aPos");
gl.bindAttribLocation(this.prog[37], 1, "aCol");
gl.linkProgram(this.prog[37]);
var texts = [
"1",
"2",
"3",
"4",
"5",
"6",
"7"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[37] = gl.getAttribLocation(this.prog[37], "aOfs");
this.texture[37] = gl.createTexture();
this.texLoc[37] = gl.getAttribLocation(this.prog[37], "aTexcoord");
this.sampler[37] = gl.getUniformLocation(this.prog[37],"uSampler");
handleLoadedTexture(this.texture[37], document.getElementById("toggletextureCanvas"));
this.offsets[37]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
3.754899, 1.636598, 1, 0, -0.5, 0.5, 0.5,
3.754899, 1.636598, 1, 1, -0.5, 0.5, 0.5,
3.754899, 1.636598, 1, 1, 1.5, 0.5, 0.5,
3.754899, 1.636598, 1, 0, 1.5, 0.5, 0.5,
3.754899, 1.636598, 2, 0, -0.5, 0.5, 0.5,
3.754899, 1.636598, 2, 1, -0.5, 0.5, 0.5,
3.754899, 1.636598, 2, 1, 1.5, 0.5, 0.5,
3.754899, 1.636598, 2, 0, 1.5, 0.5, 0.5,
3.754899, 1.636598, 3, 0, -0.5, 0.5, 0.5,
3.754899, 1.636598, 3, 1, -0.5, 0.5, 0.5,
3.754899, 1.636598, 3, 1, 1.5, 0.5, 0.5,
3.754899, 1.636598, 3, 0, 1.5, 0.5, 0.5,
3.754899, 1.636598, 4, 0, -0.5, 0.5, 0.5,
3.754899, 1.636598, 4, 1, -0.5, 0.5, 0.5,
3.754899, 1.636598, 4, 1, 1.5, 0.5, 0.5,
3.754899, 1.636598, 4, 0, 1.5, 0.5, 0.5,
3.754899, 1.636598, 5, 0, -0.5, 0.5, 0.5,
3.754899, 1.636598, 5, 1, -0.5, 0.5, 0.5,
3.754899, 1.636598, 5, 1, 1.5, 0.5, 0.5,
3.754899, 1.636598, 5, 0, 1.5, 0.5, 0.5,
3.754899, 1.636598, 6, 0, -0.5, 0.5, 0.5,
3.754899, 1.636598, 6, 1, -0.5, 0.5, 0.5,
3.754899, 1.636598, 6, 1, 1.5, 0.5, 0.5,
3.754899, 1.636598, 6, 0, 1.5, 0.5, 0.5,
3.754899, 1.636598, 7, 0, -0.5, 0.5, 0.5,
3.754899, 1.636598, 7, 1, -0.5, 0.5, 0.5,
3.754899, 1.636598, 7, 1, 1.5, 0.5, 0.5,
3.754899, 1.636598, 7, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<7; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[37]["stride"]*(4*i + j) + this.offsets[37]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[37] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3,
4, 5, 6, 4, 6, 7,
8, 9, 10, 8, 10, 11,
12, 13, 14, 12, 14, 15,
16, 17, 18, 16, 18, 19,
20, 21, 22, 20, 22, 23,
24, 25, 26, 24, 26, 27
]);
this.buf[37] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[37]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[37], gl.STATIC_DRAW);
this.ibuf[37] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[37]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[37] = gl.getUniformLocation(this.prog[37],"mvMatrix");
this.prMatLoc[37] = gl.getUniformLocation(this.prog[37],"prMatrix");
this.textScaleLoc[37] = gl.getUniformLocation(this.prog[37],"textScale");
// ****** lines object 38 ******
this.flags[38] = 128;
this.prog[38]  = gl.createProgram();
gl.attachShader(this.prog[38], this.getShader( gl, "togglevshader38" ));
gl.attachShader(this.prog[38], this.getShader( gl, "togglefshader38" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[38], 0, "aPos");
gl.bindAttribLocation(this.prog[38], 1, "aCol");
gl.linkProgram(this.prog[38]);
this.offsets[38]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:-1, tofs:-1, stride:3};
var v=new Float32Array([
4.060781, 1.840521, 0.607948,
4.060781, 4.55948, 0.607948,
4.060781, 1.840521, 7.292052,
4.060781, 4.55948, 7.292052,
4.060781, 1.840521, 0.607948,
4.060781, 1.840521, 7.292052,
4.060781, 4.55948, 0.607948,
4.060781, 4.55948, 7.292052,
4.060781, 1.840521, 0.607948,
8.139219, 1.840521, 0.607948,
4.060781, 1.840521, 7.292052,
8.139219, 1.840521, 7.292052,
4.060781, 4.55948, 0.607948,
8.139219, 4.55948, 0.607948,
4.060781, 4.55948, 7.292052,
8.139219, 4.55948, 7.292052,
8.139219, 1.840521, 0.607948,
8.139219, 4.55948, 0.607948,
8.139219, 1.840521, 7.292052,
8.139219, 4.55948, 7.292052,
8.139219, 1.840521, 0.607948,
8.139219, 1.840521, 7.292052,
8.139219, 4.55948, 0.607948,
8.139219, 4.55948, 7.292052
]);
this.values[38] = v;
this.buf[38] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[38]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[38], gl.STATIC_DRAW);
this.mvMatLoc[38] = gl.getUniformLocation(this.prog[38],"mvMatrix");
this.prMatLoc[38] = gl.getUniformLocation(this.prog[38],"prMatrix");
gl.enable(gl.DEPTH_TEST);
gl.depthFunc(gl.LEQUAL);
gl.clearDepth(1.0);
gl.clearColor(1,1,1,1);
var drag  = 0;
this.drawScene = function() {
gl.depthMask(true);
gl.disable(gl.BLEND);
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
this.drawFns[19].call(this, 19)
gl.flush ();
}
// ****** spheres object 25 *******
this.drawFns[25] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, sphereBuf);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sphereIbuf);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(normMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 12,  0);
gl.enableVertexAttribArray(this.normLoc[id] );
gl.vertexAttribPointer(this.normLoc[id],  3, gl.FLOAT, false, 12,  0);
gl.disableVertexAttribArray( colLoc );
var sphereNorm = new CanvasMatrix4();
sphereNorm.scale(1.17337, 1.760048, 0.7159564);
sphereNorm.multRight(normMatrix);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(sphereNorm.getAsArray()) );
for (var i = 0; i < 50; i++) {
var sphereMV = new CanvasMatrix4();
var baseofs = i*togglergl.offsets[id]["stride"];
var ofs = baseofs + this.offsets[id]["radofs"];        
var scale = this.values[id][ofs];
sphereMV.scale(0.8522463*scale, 0.5681663*scale, 1.396733*scale);
sphereMV.translate(this.values[id][baseofs], 
this.values[id][baseofs+1], 
this.values[id][baseofs+2]);
sphereMV.multRight(this.mvMatrix);
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(sphereMV.getAsArray()) );
ofs = baseofs + this.offsets[id]["cofs"];       
gl.vertexAttrib4f( colLoc, this.values[id][ofs], 
this.values[id][ofs+1], 
this.values[id][ofs+2],
this.values[id][ofs+3] );
gl.drawElements(gl.TRIANGLES, 384, gl.UNSIGNED_SHORT, 0);
}
}
// ****** spheres object 26 *******
this.drawFns[26] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, sphereBuf);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sphereIbuf);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(normMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 12,  0);
gl.enableVertexAttribArray(this.normLoc[id] );
gl.vertexAttribPointer(this.normLoc[id],  3, gl.FLOAT, false, 12,  0);
gl.disableVertexAttribArray( colLoc );
var sphereNorm = new CanvasMatrix4();
sphereNorm.scale(1.17337, 1.760048, 0.7159564);
sphereNorm.multRight(normMatrix);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(sphereNorm.getAsArray()) );
for (var i = 0; i < 50; i++) {
var sphereMV = new CanvasMatrix4();
var baseofs = i*togglergl.offsets[id]["stride"];
var ofs = baseofs + this.offsets[id]["radofs"];        
var scale = this.values[id][ofs];
sphereMV.scale(0.8522463*scale, 0.5681663*scale, 1.396733*scale);
sphereMV.translate(this.values[id][baseofs], 
this.values[id][baseofs+1], 
this.values[id][baseofs+2]);
sphereMV.multRight(this.mvMatrix);
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(sphereMV.getAsArray()) );
ofs = baseofs + this.offsets[id]["cofs"];       
gl.vertexAttrib4f( colLoc, this.values[id][ofs], 
this.values[id][ofs+1], 
this.values[id][ofs+2],
this.values[id][ofs+3] );
gl.drawElements(gl.TRIANGLES, 384, gl.UNSIGNED_SHORT, 0);
}
}
// ****** spheres object 27 *******
this.drawFns[27] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, sphereBuf);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sphereIbuf);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(normMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 12,  0);
gl.enableVertexAttribArray(this.normLoc[id] );
gl.vertexAttribPointer(this.normLoc[id],  3, gl.FLOAT, false, 12,  0);
gl.disableVertexAttribArray( colLoc );
var sphereNorm = new CanvasMatrix4();
sphereNorm.scale(1.17337, 1.760048, 0.7159564);
sphereNorm.multRight(normMatrix);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(sphereNorm.getAsArray()) );
for (var i = 0; i < 50; i++) {
var sphereMV = new CanvasMatrix4();
var baseofs = i*togglergl.offsets[id]["stride"];
var ofs = baseofs + this.offsets[id]["radofs"];        
var scale = this.values[id][ofs];
sphereMV.scale(0.8522463*scale, 0.5681663*scale, 1.396733*scale);
sphereMV.translate(this.values[id][baseofs], 
this.values[id][baseofs+1], 
this.values[id][baseofs+2]);
sphereMV.multRight(this.mvMatrix);
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(sphereMV.getAsArray()) );
ofs = baseofs + this.offsets[id]["cofs"];       
gl.vertexAttrib4f( colLoc, this.values[id][ofs], 
this.values[id][ofs+1], 
this.values[id][ofs+2],
this.values[id][ofs+3] );
gl.drawElements(gl.TRIANGLES, 384, gl.UNSIGNED_SHORT, 0);
}
}
// ****** text object 29 *******
this.drawFns[29] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
}
// ****** text object 30 *******
this.drawFns[30] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
}
// ****** text object 31 *******
this.drawFns[31] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
}
// ****** lines object 32 *******
this.drawFns[32] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawArrays(gl.LINES, 0, 10);
}
// ****** text object 33 *******
this.drawFns[33] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 24, gl.UNSIGNED_SHORT, 0);
}
// ****** lines object 34 *******
this.drawFns[34] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawArrays(gl.LINES, 0, 14);
}
// ****** text object 35 *******
this.drawFns[35] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 36, gl.UNSIGNED_SHORT, 0);
}
// ****** lines object 36 *******
this.drawFns[36] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawArrays(gl.LINES, 0, 16);
}
// ****** text object 37 *******
this.drawFns[37] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 42, gl.UNSIGNED_SHORT, 0);
}
// ****** lines object 38 *******
this.drawFns[38] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawArrays(gl.LINES, 0, 24);
}
// ***** subscene 19 ****
this.drawFns[19] = function(id) {
this.vp = this.viewport[id];
gl.viewport(this.vp[0], this.vp[1], this.vp[2], this.vp[3]);
gl.scissor(this.vp[0], this.vp[1], this.vp[2], this.vp[3]);
gl.clearColor(1, 1, 1, 1);
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
this.prMatrix.makeIdentity();
var radius = 4.426033;
var distance = 19.69192;
var t = tan(this.FOV[19]*PI/360);
var near = distance - radius;
var far = distance + radius;
var hlen = t*near;
var aspect = this.vp[2]/this.vp[3];
var z = this.zoom[19];
if (aspect > 1) 
this.prMatrix.frustum(-hlen*aspect*z, hlen*aspect*z, 
-hlen*z, hlen*z, near, far);
else  
this.prMatrix.frustum(-hlen*z, hlen*z, 
-hlen*z/aspect, hlen*z/aspect, 
near, far);
this.mvMatrix.makeIdentity();
this.mvMatrix.translate( -6.1, -3.2, -3.95 );
this.mvMatrix.scale( 1.17337, 1.760048, 0.7159564 );   
this.mvMatrix.multRight( togglergl.userMatrix[19] );
this.mvMatrix.translate(-0, -0, -19.69192);
normMatrix.makeIdentity();
normMatrix.scale( 0.8522463, 0.5681663, 1.396733 );   
normMatrix.multRight( togglergl.userMatrix[19] );
var clipids = this.clipplanes[id];
if (clipids.length > 0) {
this.invMatrix = new CanvasMatrix4(this.mvMatrix);
this.invMatrix.invert();
for (var i = 0; i < this.clipplanes[id].length; i++) 
this.drawFns[clipids[i]].call(this, clipids[i]);
}
var subids = this.opaque[id];
for (var i = 0; i < subids.length; i++) 
this.drawFns[subids[i]].call(this, subids[i], clipids);
subids = this.transparent[id];
if (subids.length > 0) {
gl.depthMask(false);
gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA,
gl.ONE, gl.ONE);
gl.enable(gl.BLEND);
for (var i = 0; i < subids.length; i++) 
this.drawFns[subids[i]].call(this, subids[i], clipids);
}
subids = this.subscenes[id];
for (var i = 0; i < subids.length; i++)
this.drawFns[subids[i]].call(this, subids[i]);
}
this.drawScene();
var vpx0 = {
19: 0
};
var vpy0 = {
19: 0
};
var vpWidths = {
19: 480
};
var vpHeights = {
19: 480
};
var activeModel = {
19: 19
};
var activeProjection = {
19: 19
};
togglergl.listeners = {
19: [ 19 ]
};
var whichSubscene = function(coords){
if (0 <= coords.x && coords.x <= 480 && 0 <= coords.y && coords.y <= 480) return(19);
return(19);
}
var translateCoords = function(subsceneid, coords){
return {x:coords.x - vpx0[subsceneid], y:coords.y - vpy0[subsceneid]};
}
var vlen = function(v) {
return sqrt(v[0]*v[0] + v[1]*v[1] + v[2]*v[2])
}
var xprod = function(a, b) {
return [a[1]*b[2] - a[2]*b[1],
a[2]*b[0] - a[0]*b[2],
a[0]*b[1] - a[1]*b[0]];
}
var screenToVector = function(x, y) {
var width = vpWidths[activeSubscene];
var height = vpHeights[activeSubscene];
var radius = max(width, height)/2.0;
var cx = width/2.0;
var cy = height/2.0;
var px = (x-cx)/radius;
var py = (y-cy)/radius;
var plen = sqrt(px*px+py*py);
if (plen > 1.e-6) { 
px = px/plen;
py = py/plen;
}
var angle = (SQRT2 - plen)/SQRT2*PI/2;
var z = sin(angle);
var zlen = sqrt(1.0 - z*z);
px = px * zlen;
py = py * zlen;
return [px, py, z];
}
var rotBase;
var trackballdown = function(x,y) {
rotBase = screenToVector(x, y);
var l = togglergl.listeners[activeModel[activeSubscene]];
saveMat = new Object();
for (var i = 0; i < l.length; i++) 
saveMat[l[i]] = new CanvasMatrix4(togglergl.userMatrix[l[i]]);
}
var trackballmove = function(x,y) {
var rotCurrent = screenToVector(x,y);
var dot = rotBase[0]*rotCurrent[0] + 
rotBase[1]*rotCurrent[1] + 
rotBase[2]*rotCurrent[2];
var angle = acos( dot/vlen(rotBase)/vlen(rotCurrent) )*180./PI;
var axis = xprod(rotBase, rotCurrent);
var l = togglergl.listeners[activeModel[activeSubscene]];
for (i = 0; i < l.length; i++) {
togglergl.userMatrix[l[i]].load(saveMat[l[i]]);
togglergl.userMatrix[l[i]].rotate(angle, axis[0], axis[1], axis[2]);
}
togglergl.drawScene();
}
var trackballend = 0;
var y0zoom = 0;
var zoom0 = 0;
var zoomdown = function(x, y) {
y0zoom = y;
zoom0 = new Object();
l = togglergl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
zoom0[l[i]] = log(togglergl.zoom[l[i]]);
}
var zoommove = function(x, y) {
l = togglergl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
togglergl.zoom[l[i]] = exp(zoom0[l[i]] + (y-y0zoom)/height);
togglergl.drawScene();
}
var zoomend = 0;
var y0fov = 0;
var fov0 = 0;
var fovdown = function(x, y) {
y0fov = y;
fov0 = new Object();
l = togglergl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
fov0[l[i]] = togglergl.FOV[l[i]];
}
var fovmove = function(x, y) {
l = togglergl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
togglergl.FOV[l[i]] = max(1, min(179, fov0[l[i]] + 180*(y-y0fov)/height));
togglergl.drawScene();
}
var fovend = 0;
var mousedown = [trackballdown, zoomdown, fovdown];
var mousemove = [trackballmove, zoommove, fovmove];
var mouseend = [trackballend, zoomend, fovend];
function relMouseCoords(event){
var totalOffsetX = 0;
var totalOffsetY = 0;
var currentElement = canvas;
do{
totalOffsetX += currentElement.offsetLeft;
totalOffsetY += currentElement.offsetTop;
currentElement = currentElement.offsetParent;
}
while(currentElement)
var canvasX = event.pageX - totalOffsetX;
var canvasY = event.pageY - totalOffsetY;
return {x:canvasX, y:canvasY}
}
canvas.onmousedown = function ( ev ){
if (!ev.which) // Use w3c defns in preference to MS
switch (ev.button) {
case 0: ev.which = 1; break;
case 1: 
case 4: ev.which = 2; break;
case 2: ev.which = 3;
}
drag = ev.which;
var f = mousedown[drag-1];
if (f) {
var coords = relMouseCoords(ev);
coords.y = height-coords.y;
activeSubscene = whichSubscene(coords);
coords = translateCoords(activeSubscene, coords);
f(coords.x, coords.y); 
ev.preventDefault();
}
}    
canvas.onmouseup = function ( ev ){ 
if ( drag == 0 ) return;
var f = mouseend[drag-1];
if (f) 
f();
drag = 0;
}
canvas.onmouseout = canvas.onmouseup;
canvas.onmousemove = function ( ev ){
if ( drag == 0 ) return;
var f = mousemove[drag-1];
if (f) {
var coords = relMouseCoords(ev);
coords.y = height - coords.y;
coords = translateCoords(activeSubscene, coords);
f(coords.x, coords.y);
}
}
var wheelHandler = function(ev) {
var del = 1.1;
if (ev.shiftKey) del = 1.01;
var ds = ((ev.detail || ev.wheelDelta) > 0) ? del : (1 / del);
l = togglergl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
togglergl.zoom[l[i]] *= ds;
togglergl.drawScene();
ev.preventDefault();
};
canvas.addEventListener("DOMMouseScroll", wheelHandler, false);
canvas.addEventListener("mousewheel", wheelHandler, false);
}
</script>
<canvas id="togglecanvas" class="rglWebGL" width="1" height="1">
</canvas>
<p id="toggledebug">
You must enable Javascript to view this page properly.
</p>
<script>togglergl.start();</script>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">toggleButton</span>(sphereid, <span class="dt">label =</span> <span class="st">&quot;setosa&quot;</span>, <span class="dt">prefix =</span> <span class="st">&quot;toggle&quot;</span>, <span class="dt">subscene =</span> subid)</code></pre>
<button type="button" id="input88627396aed6" name="input88627396aed6" onclick="(function(){
  var subset = [25];
  if (togglergl.inSubscene(subset[0], 19)) {
    for (var i=0; i&lt;subset.length; i++)
      togglergl.delFromSubscene(subset[i], 19);
  } else {
    for (var i=0; i&lt;subset.length; i++)
      togglergl.addToSubscene(subset[i], 19);
  }
  togglergl.drawScene();
})()">
setosa
</button>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">toggleButton</span>(sphereid<span class="dv">+1</span>, <span class="dt">label =</span> <span class="st">&quot;versicolor&quot;</span>, <span class="dt">prefix =</span> <span class="st">&quot;toggle&quot;</span>, <span class="dt">subscene =</span> subid)</code></pre>
<button type="button" id="input886229b09ee3" name="input886229b09ee3" onclick="(function(){
  var subset = [26];
  if (togglergl.inSubscene(subset[0], 19)) {
    for (var i=0; i&lt;subset.length; i++)
      togglergl.delFromSubscene(subset[i], 19);
  } else {
    for (var i=0; i&lt;subset.length; i++)
      togglergl.addToSubscene(subset[i], 19);
  }
  togglergl.drawScene();
})()">
versicolor
</button>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">toggleButton</span>(sphereid<span class="dv">+2</span>, <span class="dt">label =</span> <span class="st">&quot;virginica&quot;</span>, <span class="dt">prefix =</span> <span class="st">&quot;toggle&quot;</span>, <span class="dt">subscene =</span> subid)</code></pre>
<button type="button" id="input8862a8f5e77" name="input8862a8f5e77" onclick="(function(){
  var subset = [27];
  if (togglergl.inSubscene(subset[0], 19)) {
    for (var i=0; i&lt;subset.length; i++)
      togglergl.delFromSubscene(subset[i], 19);
  } else {
    for (var i=0; i&lt;subset.length; i++)
      togglergl.addToSubscene(subset[i], 19);
  }
  togglergl.drawScene();
})()">
virginica
</button>
<p>Note that we need to use <code>results=&quot;asis&quot;</code> for the button code.<br />Normally we would also use <code>echo=FALSE</code>, though I didnt do so above; then the buttons will end up side-by-side:</p>
<button type="button" id="input8862553c7c64" name="input8862553c7c64" onclick="(function(){
  var subset = [25];
  if (togglergl.inSubscene(subset[0], 19)) {
    for (var i=0; i&lt;subset.length; i++)
      togglergl.delFromSubscene(subset[i], 19);
  } else {
    for (var i=0; i&lt;subset.length; i++)
      togglergl.addToSubscene(subset[i], 19);
  }
  togglergl.drawScene();
})()">
setosa
</button>
<button type="button" id="input8862760ab4f3" name="input8862760ab4f3" onclick="(function(){
  var subset = [26];
  if (togglergl.inSubscene(subset[0], 19)) {
    for (var i=0; i&lt;subset.length; i++)
      togglergl.delFromSubscene(subset[i], 19);
  } else {
    for (var i=0; i&lt;subset.length; i++)
      togglergl.addToSubscene(subset[i], 19);
  }
  togglergl.drawScene();
})()">
versicolor
</button>
<button type="button" id="input886238edfa10" name="input886238edfa10" onclick="(function(){
  var subset = [27];
  if (togglergl.inSubscene(subset[0], 19)) {
    for (var i=0; i&lt;subset.length; i++)
      togglergl.delFromSubscene(subset[i], 19);
  } else {
    for (var i=0; i&lt;subset.length; i++)
      togglergl.addToSubscene(subset[i], 19);
  }
  togglergl.drawScene();
})()">
virginica
</button>
<p>An alternate control to achieve the same thing is <a name="subsetSlider"><a href="../../rgl/help/subsetSlider"><code>subsetSlider</code></a></a>.</p>
<canvas id="slidertextureCanvas" style="display: none;" width="256" height="256">
Your browser does not support the HTML5 canvas element.
</canvas>
<!-- ****** lines object 39 ****** -->
<script id="slidervshader39" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="sliderfshader39" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<!-- ****** text object 40 ****** -->
<script id="slidervshader40" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="sliderfshader40" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** lines object 41 ****** -->
<script id="slidervshader41" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="sliderfshader41" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<!-- ****** text object 42 ****** -->
<script id="slidervshader42" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="sliderfshader42" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** lines object 43 ****** -->
<script id="slidervshader43" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="sliderfshader43" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<!-- ****** text object 44 ****** -->
<script id="slidervshader44" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="sliderfshader44" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** lines object 45 ****** -->
<script id="slidervshader45" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="sliderfshader45" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<script type="text/javascript">
var sliderrgl = new rglClass();
sliderrgl.start = function() {
var debug = function(msg) {
document.getElementById("sliderdebug").innerHTML = msg;
}
debug("");
var canvas = document.getElementById("slidercanvas");
if (!window.WebGLRenderingContext){
debug(" Your browser does not support WebGL. See <a href=\"http://get.webgl.org\">http://get.webgl.org</a>");
return;
}
try {
// Try to grab the standard context. If it fails, fallback to experimental.
this.gl = canvas.getContext("webgl") 
|| canvas.getContext("experimental-webgl");
}
catch(e) {}
if ( !this.gl ) {
debug(" Your browser appears to support WebGL, but did not create a WebGL context.  See <a href=\"http://get.webgl.org\">http://get.webgl.org</a>");
return;
}
var gl = this.gl;
var width = 481;  var height = 481;
canvas.width = width;   canvas.height = height;
var normMatrix = new CanvasMatrix4();
var saveMat = new Object();
var distance;
var posLoc = 0;
var colLoc = 1;
var activeSubscene = 19;
this.flags[19] = 1195;
this.zoom[19] = 1;
this.FOV[19] = 30;
this.viewport[19] = [0, 0, 480, 480];
this.userMatrix[19] = new CanvasMatrix4();
this.userMatrix[19].load([
1, 0, 0, 0,
0, 0.3420201, -0.9396926, 0,
0, 0.9396926, 0.3420201, 0,
0, 0, 0, 1
]);
this.clipplanes[19] = [];
this.opaque[19] = [25,26,27,29,30,31,39,40,41,42,43,44,45];
this.transparent[19] = [];
this.subscenes[19] = [];
function getPowerOfTwo(value) {
var pow = 1;
while(pow<value) {
pow *= 2;
}
return pow;
}
function handleLoadedTexture(texture, textureCanvas) {
gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);
gl.bindTexture(gl.TEXTURE_2D, texture);
gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, textureCanvas);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);
gl.generateMipmap(gl.TEXTURE_2D);
gl.bindTexture(gl.TEXTURE_2D, null);
}
function loadImageToTexture(filename, texture) {   
var canvas = document.getElementById("slidertextureCanvas");
var ctx = canvas.getContext("2d");
var image = new Image();
image.onload = function() {
var w = image.width;
var h = image.height;
var canvasX = getPowerOfTwo(w);
var canvasY = getPowerOfTwo(h);
canvas.width = canvasX;
canvas.height = canvasY;
ctx.imageSmoothingEnabled = true;
ctx.drawImage(image, 0, 0, canvasX, canvasY);
handleLoadedTexture(texture, canvas);
sliderrgl.drawScene();
}
image.src = filename;
}      
function drawTextToCanvas(text, cex) {
var canvasX, canvasY;
var textX, textY;
var textHeight = 20 * cex;
var textColour = "white";
var fontFamily = "Arial";
var backgroundColour = "rgba(0,0,0,0)";
var canvas = document.getElementById("slidertextureCanvas");
var ctx = canvas.getContext("2d");
ctx.font = textHeight+"px "+fontFamily;
canvasX = 1;
var widths = [];
for (var i = 0; i < text.length; i++)  {
widths[i] = ctx.measureText(text[i]).width;
canvasX = (widths[i] > canvasX) ? widths[i] : canvasX;
}     
canvasX = getPowerOfTwo(canvasX);
var offset = 2*textHeight; // offset to first baseline
var skip = 2*textHeight;   // skip between baselines      
canvasY = getPowerOfTwo(offset + text.length*skip);
canvas.width = canvasX;
canvas.height = canvasY;
ctx.fillStyle = backgroundColour;
ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
ctx.fillStyle = textColour;
ctx.textAlign = "left";
ctx.textBaseline = "alphabetic";
ctx.font = textHeight+"px "+fontFamily;
for(var i = 0; i < text.length; i++) {
textY = i*skip + offset;
ctx.fillText(text[i], 0,  textY);
}
return {canvasX:canvasX, canvasY:canvasY,
widths:widths, textHeight:textHeight,
offset:offset, skip:skip};
}
// ****** sphere object ******
var sphereBuf = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, sphereBuf);
gl.bufferData(gl.ARRAY_BUFFER, plot3drgl.sphereverts, gl.STATIC_DRAW);
var sphereIbuf = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sphereIbuf);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, plot3drgl.spherefaces, gl.STATIC_DRAW);
// ****** spheres object 25 ******
this.flags[25] = 4099;
this.prog[25]  = gl.createProgram();
gl.attachShader(this.prog[25], this.getShader( gl, "togglevshader25" ));
gl.attachShader(this.prog[25], this.getShader( gl, "togglefshader25" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[25], 0, "aPos");
gl.bindAttribLocation(this.prog[25], 1, "aCol");
gl.linkProgram(this.prog[25]);
this.offsets[25]={vofs:0, cofs:3, nofs:-1, radofs:7, oofs:-1, tofs:-1, stride:8};
this.values[25] = togglergl.values[25];
this.normLoc[25] = gl.getAttribLocation(this.prog[25], "aNorm");
this.mvMatLoc[25] = gl.getUniformLocation(this.prog[25],"mvMatrix");
this.prMatLoc[25] = gl.getUniformLocation(this.prog[25],"prMatrix");
this.normMatLoc[25] = gl.getUniformLocation(this.prog[25],"normMatrix");
// ****** spheres object 26 ******
this.flags[26] = 4099;
this.prog[26]  = gl.createProgram();
gl.attachShader(this.prog[26], this.getShader( gl, "togglevshader26" ));
gl.attachShader(this.prog[26], this.getShader( gl, "togglefshader26" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[26], 0, "aPos");
gl.bindAttribLocation(this.prog[26], 1, "aCol");
gl.linkProgram(this.prog[26]);
this.offsets[26]={vofs:0, cofs:3, nofs:-1, radofs:7, oofs:-1, tofs:-1, stride:8};
this.values[26] = togglergl.values[26];
this.normLoc[26] = gl.getAttribLocation(this.prog[26], "aNorm");
this.mvMatLoc[26] = gl.getUniformLocation(this.prog[26],"mvMatrix");
this.prMatLoc[26] = gl.getUniformLocation(this.prog[26],"prMatrix");
this.normMatLoc[26] = gl.getUniformLocation(this.prog[26],"normMatrix");
// ****** spheres object 27 ******
this.flags[27] = 4099;
this.prog[27]  = gl.createProgram();
gl.attachShader(this.prog[27], this.getShader( gl, "togglevshader27" ));
gl.attachShader(this.prog[27], this.getShader( gl, "togglefshader27" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[27], 0, "aPos");
gl.bindAttribLocation(this.prog[27], 1, "aCol");
gl.linkProgram(this.prog[27]);
this.offsets[27]={vofs:0, cofs:3, nofs:-1, radofs:7, oofs:-1, tofs:-1, stride:8};
this.values[27] = togglergl.values[27];
this.normLoc[27] = gl.getAttribLocation(this.prog[27], "aNorm");
this.mvMatLoc[27] = gl.getUniformLocation(this.prog[27],"mvMatrix");
this.prMatLoc[27] = gl.getUniformLocation(this.prog[27],"prMatrix");
this.normMatLoc[27] = gl.getUniformLocation(this.prog[27],"normMatrix");
// ****** text object 29 ******
this.flags[29] = 4136;
this.prog[29]  = gl.createProgram();
gl.attachShader(this.prog[29], this.getShader( gl, "togglevshader29" ));
gl.attachShader(this.prog[29], this.getShader( gl, "togglefshader29" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[29], 0, "aPos");
gl.bindAttribLocation(this.prog[29], 1, "aCol");
gl.linkProgram(this.prog[29]);
var texts = [
"x"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[29] = gl.getAttribLocation(this.prog[29], "aOfs");
this.texture[29] = gl.createTexture();
this.texLoc[29] = gl.getAttribLocation(this.prog[29], "aTexcoord");
this.sampler[29] = gl.getUniformLocation(this.prog[29],"uSampler");
handleLoadedTexture(this.texture[29], document.getElementById("slidertextureCanvas"));
this.offsets[29]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
this.values[29] = togglergl.values[29];
var f=new Uint16Array([
0, 1, 2, 0, 2, 3
]);
this.buf[29] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[29]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[29], gl.STATIC_DRAW);
this.ibuf[29] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[29]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[29] = gl.getUniformLocation(this.prog[29],"mvMatrix");
this.prMatLoc[29] = gl.getUniformLocation(this.prog[29],"prMatrix");
this.textScaleLoc[29] = gl.getUniformLocation(this.prog[29],"textScale");
// ****** text object 30 ******
this.flags[30] = 4136;
this.prog[30]  = gl.createProgram();
gl.attachShader(this.prog[30], this.getShader( gl, "togglevshader30" ));
gl.attachShader(this.prog[30], this.getShader( gl, "togglefshader30" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[30], 0, "aPos");
gl.bindAttribLocation(this.prog[30], 1, "aCol");
gl.linkProgram(this.prog[30]);
var texts = [
"y"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[30] = gl.getAttribLocation(this.prog[30], "aOfs");
this.texture[30] = gl.createTexture();
this.texLoc[30] = gl.getAttribLocation(this.prog[30], "aTexcoord");
this.sampler[30] = gl.getUniformLocation(this.prog[30],"uSampler");
handleLoadedTexture(this.texture[30], document.getElementById("slidertextureCanvas"));
this.offsets[30]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
this.values[30] = togglergl.values[30];
var f=new Uint16Array([
0, 1, 2, 0, 2, 3
]);
this.buf[30] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[30]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[30], gl.STATIC_DRAW);
this.ibuf[30] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[30]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[30] = gl.getUniformLocation(this.prog[30],"mvMatrix");
this.prMatLoc[30] = gl.getUniformLocation(this.prog[30],"prMatrix");
this.textScaleLoc[30] = gl.getUniformLocation(this.prog[30],"textScale");
// ****** text object 31 ******
this.flags[31] = 4136;
this.prog[31]  = gl.createProgram();
gl.attachShader(this.prog[31], this.getShader( gl, "togglevshader31" ));
gl.attachShader(this.prog[31], this.getShader( gl, "togglefshader31" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[31], 0, "aPos");
gl.bindAttribLocation(this.prog[31], 1, "aCol");
gl.linkProgram(this.prog[31]);
var texts = [
"z"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[31] = gl.getAttribLocation(this.prog[31], "aOfs");
this.texture[31] = gl.createTexture();
this.texLoc[31] = gl.getAttribLocation(this.prog[31], "aTexcoord");
this.sampler[31] = gl.getUniformLocation(this.prog[31],"uSampler");
handleLoadedTexture(this.texture[31], document.getElementById("slidertextureCanvas"));
this.offsets[31]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
this.values[31] = togglergl.values[31];
var f=new Uint16Array([
0, 1, 2, 0, 2, 3
]);
this.buf[31] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[31]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[31], gl.STATIC_DRAW);
this.ibuf[31] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[31]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[31] = gl.getUniformLocation(this.prog[31],"mvMatrix");
this.prMatLoc[31] = gl.getUniformLocation(this.prog[31],"prMatrix");
this.textScaleLoc[31] = gl.getUniformLocation(this.prog[31],"textScale");
// ****** lines object 39 ******
this.flags[39] = 128;
this.prog[39]  = gl.createProgram();
gl.attachShader(this.prog[39], this.getShader( gl, "slidervshader39" ));
gl.attachShader(this.prog[39], this.getShader( gl, "sliderfshader39" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[39], 0, "aPos");
gl.bindAttribLocation(this.prog[39], 1, "aCol");
gl.linkProgram(this.prog[39]);
this.offsets[39]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:-1, tofs:-1, stride:3};
var v=new Float32Array([
5, 1.840521, 0.607948,
8, 1.840521, 0.607948,
5, 1.840521, 0.607948,
5, 1.772546, 0.4408454,
6, 1.840521, 0.607948,
6, 1.772546, 0.4408454,
7, 1.840521, 0.607948,
7, 1.772546, 0.4408454,
8, 1.840521, 0.607948,
8, 1.772546, 0.4408454
]);
this.values[39] = v;
this.buf[39] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[39]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[39], gl.STATIC_DRAW);
this.mvMatLoc[39] = gl.getUniformLocation(this.prog[39],"mvMatrix");
this.prMatLoc[39] = gl.getUniformLocation(this.prog[39],"prMatrix");
// ****** text object 40 ******
this.flags[40] = 40;
this.prog[40]  = gl.createProgram();
gl.attachShader(this.prog[40], this.getShader( gl, "slidervshader40" ));
gl.attachShader(this.prog[40], this.getShader( gl, "sliderfshader40" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[40], 0, "aPos");
gl.bindAttribLocation(this.prog[40], 1, "aCol");
gl.linkProgram(this.prog[40]);
var texts = [
"5",
"6",
"7",
"8"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[40] = gl.getAttribLocation(this.prog[40], "aOfs");
this.texture[40] = gl.createTexture();
this.texLoc[40] = gl.getAttribLocation(this.prog[40], "aTexcoord");
this.sampler[40] = gl.getUniformLocation(this.prog[40],"uSampler");
handleLoadedTexture(this.texture[40], document.getElementById("slidertextureCanvas"));
this.offsets[40]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
5, 1.636598, 0.1066402, 0, -0.5, 0.5, 0.5,
5, 1.636598, 0.1066402, 1, -0.5, 0.5, 0.5,
5, 1.636598, 0.1066402, 1, 1.5, 0.5, 0.5,
5, 1.636598, 0.1066402, 0, 1.5, 0.5, 0.5,
6, 1.636598, 0.1066402, 0, -0.5, 0.5, 0.5,
6, 1.636598, 0.1066402, 1, -0.5, 0.5, 0.5,
6, 1.636598, 0.1066402, 1, 1.5, 0.5, 0.5,
6, 1.636598, 0.1066402, 0, 1.5, 0.5, 0.5,
7, 1.636598, 0.1066402, 0, -0.5, 0.5, 0.5,
7, 1.636598, 0.1066402, 1, -0.5, 0.5, 0.5,
7, 1.636598, 0.1066402, 1, 1.5, 0.5, 0.5,
7, 1.636598, 0.1066402, 0, 1.5, 0.5, 0.5,
8, 1.636598, 0.1066402, 0, -0.5, 0.5, 0.5,
8, 1.636598, 0.1066402, 1, -0.5, 0.5, 0.5,
8, 1.636598, 0.1066402, 1, 1.5, 0.5, 0.5,
8, 1.636598, 0.1066402, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<4; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[40]["stride"]*(4*i + j) + this.offsets[40]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[40] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3,
4, 5, 6, 4, 6, 7,
8, 9, 10, 8, 10, 11,
12, 13, 14, 12, 14, 15
]);
this.buf[40] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[40]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[40], gl.STATIC_DRAW);
this.ibuf[40] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[40]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[40] = gl.getUniformLocation(this.prog[40],"mvMatrix");
this.prMatLoc[40] = gl.getUniformLocation(this.prog[40],"prMatrix");
this.textScaleLoc[40] = gl.getUniformLocation(this.prog[40],"textScale");
// ****** lines object 41 ******
this.flags[41] = 128;
this.prog[41]  = gl.createProgram();
gl.attachShader(this.prog[41], this.getShader( gl, "slidervshader41" ));
gl.attachShader(this.prog[41], this.getShader( gl, "sliderfshader41" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[41], 0, "aPos");
gl.bindAttribLocation(this.prog[41], 1, "aCol");
gl.linkProgram(this.prog[41]);
this.offsets[41]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:-1, tofs:-1, stride:3};
var v=new Float32Array([
4.060781, 2, 0.607948,
4.060781, 4.5, 0.607948,
4.060781, 2, 0.607948,
3.958821, 2, 0.4408454,
4.060781, 2.5, 0.607948,
3.958821, 2.5, 0.4408454,
4.060781, 3, 0.607948,
3.958821, 3, 0.4408454,
4.060781, 3.5, 0.607948,
3.958821, 3.5, 0.4408454,
4.060781, 4, 0.607948,
3.958821, 4, 0.4408454,
4.060781, 4.5, 0.607948,
3.958821, 4.5, 0.4408454
]);
this.values[41] = v;
this.buf[41] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[41]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[41], gl.STATIC_DRAW);
this.mvMatLoc[41] = gl.getUniformLocation(this.prog[41],"mvMatrix");
this.prMatLoc[41] = gl.getUniformLocation(this.prog[41],"prMatrix");
// ****** text object 42 ******
this.flags[42] = 40;
this.prog[42]  = gl.createProgram();
gl.attachShader(this.prog[42], this.getShader( gl, "slidervshader42" ));
gl.attachShader(this.prog[42], this.getShader( gl, "sliderfshader42" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[42], 0, "aPos");
gl.bindAttribLocation(this.prog[42], 1, "aCol");
gl.linkProgram(this.prog[42]);
var texts = [
"2",
"2.5",
"3",
"3.5",
"4",
"4.5"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[42] = gl.getAttribLocation(this.prog[42], "aOfs");
this.texture[42] = gl.createTexture();
this.texLoc[42] = gl.getAttribLocation(this.prog[42], "aTexcoord");
this.sampler[42] = gl.getUniformLocation(this.prog[42],"uSampler");
handleLoadedTexture(this.texture[42], document.getElementById("slidertextureCanvas"));
this.offsets[42]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
3.754899, 2, 0.1066402, 0, -0.5, 0.5, 0.5,
3.754899, 2, 0.1066402, 1, -0.5, 0.5, 0.5,
3.754899, 2, 0.1066402, 1, 1.5, 0.5, 0.5,
3.754899, 2, 0.1066402, 0, 1.5, 0.5, 0.5,
3.754899, 2.5, 0.1066402, 0, -0.5, 0.5, 0.5,
3.754899, 2.5, 0.1066402, 1, -0.5, 0.5, 0.5,
3.754899, 2.5, 0.1066402, 1, 1.5, 0.5, 0.5,
3.754899, 2.5, 0.1066402, 0, 1.5, 0.5, 0.5,
3.754899, 3, 0.1066402, 0, -0.5, 0.5, 0.5,
3.754899, 3, 0.1066402, 1, -0.5, 0.5, 0.5,
3.754899, 3, 0.1066402, 1, 1.5, 0.5, 0.5,
3.754899, 3, 0.1066402, 0, 1.5, 0.5, 0.5,
3.754899, 3.5, 0.1066402, 0, -0.5, 0.5, 0.5,
3.754899, 3.5, 0.1066402, 1, -0.5, 0.5, 0.5,
3.754899, 3.5, 0.1066402, 1, 1.5, 0.5, 0.5,
3.754899, 3.5, 0.1066402, 0, 1.5, 0.5, 0.5,
3.754899, 4, 0.1066402, 0, -0.5, 0.5, 0.5,
3.754899, 4, 0.1066402, 1, -0.5, 0.5, 0.5,
3.754899, 4, 0.1066402, 1, 1.5, 0.5, 0.5,
3.754899, 4, 0.1066402, 0, 1.5, 0.5, 0.5,
3.754899, 4.5, 0.1066402, 0, -0.5, 0.5, 0.5,
3.754899, 4.5, 0.1066402, 1, -0.5, 0.5, 0.5,
3.754899, 4.5, 0.1066402, 1, 1.5, 0.5, 0.5,
3.754899, 4.5, 0.1066402, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<6; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[42]["stride"]*(4*i + j) + this.offsets[42]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[42] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3,
4, 5, 6, 4, 6, 7,
8, 9, 10, 8, 10, 11,
12, 13, 14, 12, 14, 15,
16, 17, 18, 16, 18, 19,
20, 21, 22, 20, 22, 23
]);
this.buf[42] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[42]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[42], gl.STATIC_DRAW);
this.ibuf[42] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[42]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[42] = gl.getUniformLocation(this.prog[42],"mvMatrix");
this.prMatLoc[42] = gl.getUniformLocation(this.prog[42],"prMatrix");
this.textScaleLoc[42] = gl.getUniformLocation(this.prog[42],"textScale");
// ****** lines object 43 ******
this.flags[43] = 128;
this.prog[43]  = gl.createProgram();
gl.attachShader(this.prog[43], this.getShader( gl, "slidervshader43" ));
gl.attachShader(this.prog[43], this.getShader( gl, "sliderfshader43" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[43], 0, "aPos");
gl.bindAttribLocation(this.prog[43], 1, "aCol");
gl.linkProgram(this.prog[43]);
this.offsets[43]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:-1, tofs:-1, stride:3};
var v=new Float32Array([
4.060781, 1.840521, 1,
4.060781, 1.840521, 7,
4.060781, 1.840521, 1,
3.958821, 1.772546, 1,
4.060781, 1.840521, 2,
3.958821, 1.772546, 2,
4.060781, 1.840521, 3,
3.958821, 1.772546, 3,
4.060781, 1.840521, 4,
3.958821, 1.772546, 4,
4.060781, 1.840521, 5,
3.958821, 1.772546, 5,
4.060781, 1.840521, 6,
3.958821, 1.772546, 6,
4.060781, 1.840521, 7,
3.958821, 1.772546, 7
]);
this.values[43] = v;
this.buf[43] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[43]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[43], gl.STATIC_DRAW);
this.mvMatLoc[43] = gl.getUniformLocation(this.prog[43],"mvMatrix");
this.prMatLoc[43] = gl.getUniformLocation(this.prog[43],"prMatrix");
// ****** text object 44 ******
this.flags[44] = 40;
this.prog[44]  = gl.createProgram();
gl.attachShader(this.prog[44], this.getShader( gl, "slidervshader44" ));
gl.attachShader(this.prog[44], this.getShader( gl, "sliderfshader44" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[44], 0, "aPos");
gl.bindAttribLocation(this.prog[44], 1, "aCol");
gl.linkProgram(this.prog[44]);
var texts = [
"1",
"2",
"3",
"4",
"5",
"6",
"7"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[44] = gl.getAttribLocation(this.prog[44], "aOfs");
this.texture[44] = gl.createTexture();
this.texLoc[44] = gl.getAttribLocation(this.prog[44], "aTexcoord");
this.sampler[44] = gl.getUniformLocation(this.prog[44],"uSampler");
handleLoadedTexture(this.texture[44], document.getElementById("slidertextureCanvas"));
this.offsets[44]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
3.754899, 1.636598, 1, 0, -0.5, 0.5, 0.5,
3.754899, 1.636598, 1, 1, -0.5, 0.5, 0.5,
3.754899, 1.636598, 1, 1, 1.5, 0.5, 0.5,
3.754899, 1.636598, 1, 0, 1.5, 0.5, 0.5,
3.754899, 1.636598, 2, 0, -0.5, 0.5, 0.5,
3.754899, 1.636598, 2, 1, -0.5, 0.5, 0.5,
3.754899, 1.636598, 2, 1, 1.5, 0.5, 0.5,
3.754899, 1.636598, 2, 0, 1.5, 0.5, 0.5,
3.754899, 1.636598, 3, 0, -0.5, 0.5, 0.5,
3.754899, 1.636598, 3, 1, -0.5, 0.5, 0.5,
3.754899, 1.636598, 3, 1, 1.5, 0.5, 0.5,
3.754899, 1.636598, 3, 0, 1.5, 0.5, 0.5,
3.754899, 1.636598, 4, 0, -0.5, 0.5, 0.5,
3.754899, 1.636598, 4, 1, -0.5, 0.5, 0.5,
3.754899, 1.636598, 4, 1, 1.5, 0.5, 0.5,
3.754899, 1.636598, 4, 0, 1.5, 0.5, 0.5,
3.754899, 1.636598, 5, 0, -0.5, 0.5, 0.5,
3.754899, 1.636598, 5, 1, -0.5, 0.5, 0.5,
3.754899, 1.636598, 5, 1, 1.5, 0.5, 0.5,
3.754899, 1.636598, 5, 0, 1.5, 0.5, 0.5,
3.754899, 1.636598, 6, 0, -0.5, 0.5, 0.5,
3.754899, 1.636598, 6, 1, -0.5, 0.5, 0.5,
3.754899, 1.636598, 6, 1, 1.5, 0.5, 0.5,
3.754899, 1.636598, 6, 0, 1.5, 0.5, 0.5,
3.754899, 1.636598, 7, 0, -0.5, 0.5, 0.5,
3.754899, 1.636598, 7, 1, -0.5, 0.5, 0.5,
3.754899, 1.636598, 7, 1, 1.5, 0.5, 0.5,
3.754899, 1.636598, 7, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<7; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[44]["stride"]*(4*i + j) + this.offsets[44]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[44] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3,
4, 5, 6, 4, 6, 7,
8, 9, 10, 8, 10, 11,
12, 13, 14, 12, 14, 15,
16, 17, 18, 16, 18, 19,
20, 21, 22, 20, 22, 23,
24, 25, 26, 24, 26, 27
]);
this.buf[44] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[44]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[44], gl.STATIC_DRAW);
this.ibuf[44] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[44]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[44] = gl.getUniformLocation(this.prog[44],"mvMatrix");
this.prMatLoc[44] = gl.getUniformLocation(this.prog[44],"prMatrix");
this.textScaleLoc[44] = gl.getUniformLocation(this.prog[44],"textScale");
// ****** lines object 45 ******
this.flags[45] = 128;
this.prog[45]  = gl.createProgram();
gl.attachShader(this.prog[45], this.getShader( gl, "slidervshader45" ));
gl.attachShader(this.prog[45], this.getShader( gl, "sliderfshader45" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[45], 0, "aPos");
gl.bindAttribLocation(this.prog[45], 1, "aCol");
gl.linkProgram(this.prog[45]);
this.offsets[45]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:-1, tofs:-1, stride:3};
var v=new Float32Array([
4.060781, 1.840521, 0.607948,
4.060781, 4.55948, 0.607948,
4.060781, 1.840521, 7.292052,
4.060781, 4.55948, 7.292052,
4.060781, 1.840521, 0.607948,
4.060781, 1.840521, 7.292052,
4.060781, 4.55948, 0.607948,
4.060781, 4.55948, 7.292052,
4.060781, 1.840521, 0.607948,
8.139219, 1.840521, 0.607948,
4.060781, 1.840521, 7.292052,
8.139219, 1.840521, 7.292052,
4.060781, 4.55948, 0.607948,
8.139219, 4.55948, 0.607948,
4.060781, 4.55948, 7.292052,
8.139219, 4.55948, 7.292052,
8.139219, 1.840521, 0.607948,
8.139219, 4.55948, 0.607948,
8.139219, 1.840521, 7.292052,
8.139219, 4.55948, 7.292052,
8.139219, 1.840521, 0.607948,
8.139219, 1.840521, 7.292052,
8.139219, 4.55948, 0.607948,
8.139219, 4.55948, 7.292052
]);
this.values[45] = v;
this.buf[45] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[45]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[45], gl.STATIC_DRAW);
this.mvMatLoc[45] = gl.getUniformLocation(this.prog[45],"mvMatrix");
this.prMatLoc[45] = gl.getUniformLocation(this.prog[45],"prMatrix");
gl.enable(gl.DEPTH_TEST);
gl.depthFunc(gl.LEQUAL);
gl.clearDepth(1.0);
gl.clearColor(1,1,1,1);
var drag  = 0;
this.drawScene = function() {
gl.depthMask(true);
gl.disable(gl.BLEND);
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
this.drawFns[19].call(this, 19)
gl.flush ();
}
// ****** spheres object 25 *******
this.drawFns[25] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, sphereBuf);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sphereIbuf);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(normMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 12,  0);
gl.enableVertexAttribArray(this.normLoc[id] );
gl.vertexAttribPointer(this.normLoc[id],  3, gl.FLOAT, false, 12,  0);
gl.disableVertexAttribArray( colLoc );
var sphereNorm = new CanvasMatrix4();
sphereNorm.scale(1.17337, 1.760048, 0.7159564);
sphereNorm.multRight(normMatrix);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(sphereNorm.getAsArray()) );
for (var i = 0; i < 50; i++) {
var sphereMV = new CanvasMatrix4();
var baseofs = i*togglergl.offsets[id]["stride"];
var ofs = baseofs + this.offsets[id]["radofs"];        
var scale = this.values[id][ofs];
sphereMV.scale(0.8522463*scale, 0.5681663*scale, 1.396733*scale);
sphereMV.translate(this.values[id][baseofs], 
this.values[id][baseofs+1], 
this.values[id][baseofs+2]);
sphereMV.multRight(this.mvMatrix);
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(sphereMV.getAsArray()) );
ofs = baseofs + this.offsets[id]["cofs"];       
gl.vertexAttrib4f( colLoc, this.values[id][ofs], 
this.values[id][ofs+1], 
this.values[id][ofs+2],
this.values[id][ofs+3] );
gl.drawElements(gl.TRIANGLES, 384, gl.UNSIGNED_SHORT, 0);
}
}
// ****** spheres object 26 *******
this.drawFns[26] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, sphereBuf);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sphereIbuf);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(normMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 12,  0);
gl.enableVertexAttribArray(this.normLoc[id] );
gl.vertexAttribPointer(this.normLoc[id],  3, gl.FLOAT, false, 12,  0);
gl.disableVertexAttribArray( colLoc );
var sphereNorm = new CanvasMatrix4();
sphereNorm.scale(1.17337, 1.760048, 0.7159564);
sphereNorm.multRight(normMatrix);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(sphereNorm.getAsArray()) );
for (var i = 0; i < 50; i++) {
var sphereMV = new CanvasMatrix4();
var baseofs = i*togglergl.offsets[id]["stride"];
var ofs = baseofs + this.offsets[id]["radofs"];        
var scale = this.values[id][ofs];
sphereMV.scale(0.8522463*scale, 0.5681663*scale, 1.396733*scale);
sphereMV.translate(this.values[id][baseofs], 
this.values[id][baseofs+1], 
this.values[id][baseofs+2]);
sphereMV.multRight(this.mvMatrix);
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(sphereMV.getAsArray()) );
ofs = baseofs + this.offsets[id]["cofs"];       
gl.vertexAttrib4f( colLoc, this.values[id][ofs], 
this.values[id][ofs+1], 
this.values[id][ofs+2],
this.values[id][ofs+3] );
gl.drawElements(gl.TRIANGLES, 384, gl.UNSIGNED_SHORT, 0);
}
}
// ****** spheres object 27 *******
this.drawFns[27] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, sphereBuf);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sphereIbuf);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(normMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 12,  0);
gl.enableVertexAttribArray(this.normLoc[id] );
gl.vertexAttribPointer(this.normLoc[id],  3, gl.FLOAT, false, 12,  0);
gl.disableVertexAttribArray( colLoc );
var sphereNorm = new CanvasMatrix4();
sphereNorm.scale(1.17337, 1.760048, 0.7159564);
sphereNorm.multRight(normMatrix);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(sphereNorm.getAsArray()) );
for (var i = 0; i < 50; i++) {
var sphereMV = new CanvasMatrix4();
var baseofs = i*togglergl.offsets[id]["stride"];
var ofs = baseofs + this.offsets[id]["radofs"];        
var scale = this.values[id][ofs];
sphereMV.scale(0.8522463*scale, 0.5681663*scale, 1.396733*scale);
sphereMV.translate(this.values[id][baseofs], 
this.values[id][baseofs+1], 
this.values[id][baseofs+2]);
sphereMV.multRight(this.mvMatrix);
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(sphereMV.getAsArray()) );
ofs = baseofs + this.offsets[id]["cofs"];       
gl.vertexAttrib4f( colLoc, this.values[id][ofs], 
this.values[id][ofs+1], 
this.values[id][ofs+2],
this.values[id][ofs+3] );
gl.drawElements(gl.TRIANGLES, 384, gl.UNSIGNED_SHORT, 0);
}
}
// ****** text object 29 *******
this.drawFns[29] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
}
// ****** text object 30 *******
this.drawFns[30] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
}
// ****** text object 31 *******
this.drawFns[31] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
}
// ****** lines object 39 *******
this.drawFns[39] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawArrays(gl.LINES, 0, 10);
}
// ****** text object 40 *******
this.drawFns[40] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 24, gl.UNSIGNED_SHORT, 0);
}
// ****** lines object 41 *******
this.drawFns[41] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawArrays(gl.LINES, 0, 14);
}
// ****** text object 42 *******
this.drawFns[42] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 36, gl.UNSIGNED_SHORT, 0);
}
// ****** lines object 43 *******
this.drawFns[43] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawArrays(gl.LINES, 0, 16);
}
// ****** text object 44 *******
this.drawFns[44] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 42, gl.UNSIGNED_SHORT, 0);
}
// ****** lines object 45 *******
this.drawFns[45] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawArrays(gl.LINES, 0, 24);
}
// ***** subscene 19 ****
this.drawFns[19] = function(id) {
this.vp = this.viewport[id];
gl.viewport(this.vp[0], this.vp[1], this.vp[2], this.vp[3]);
gl.scissor(this.vp[0], this.vp[1], this.vp[2], this.vp[3]);
gl.clearColor(1, 1, 1, 1);
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
this.prMatrix.makeIdentity();
var radius = 4.426033;
var distance = 19.69192;
var t = tan(this.FOV[19]*PI/360);
var near = distance - radius;
var far = distance + radius;
var hlen = t*near;
var aspect = this.vp[2]/this.vp[3];
var z = this.zoom[19];
if (aspect > 1) 
this.prMatrix.frustum(-hlen*aspect*z, hlen*aspect*z, 
-hlen*z, hlen*z, near, far);
else  
this.prMatrix.frustum(-hlen*z, hlen*z, 
-hlen*z/aspect, hlen*z/aspect, 
near, far);
this.mvMatrix.makeIdentity();
this.mvMatrix.translate( -6.1, -3.2, -3.95 );
this.mvMatrix.scale( 1.17337, 1.760048, 0.7159564 );   
this.mvMatrix.multRight( sliderrgl.userMatrix[19] );
this.mvMatrix.translate(-0, -0, -19.69192);
normMatrix.makeIdentity();
normMatrix.scale( 0.8522463, 0.5681663, 1.396733 );   
normMatrix.multRight( sliderrgl.userMatrix[19] );
var clipids = this.clipplanes[id];
if (clipids.length > 0) {
this.invMatrix = new CanvasMatrix4(this.mvMatrix);
this.invMatrix.invert();
for (var i = 0; i < this.clipplanes[id].length; i++) 
this.drawFns[clipids[i]].call(this, clipids[i]);
}
var subids = this.opaque[id];
for (var i = 0; i < subids.length; i++) 
this.drawFns[subids[i]].call(this, subids[i], clipids);
subids = this.transparent[id];
if (subids.length > 0) {
gl.depthMask(false);
gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA,
gl.ONE, gl.ONE);
gl.enable(gl.BLEND);
for (var i = 0; i < subids.length; i++) 
this.drawFns[subids[i]].call(this, subids[i], clipids);
}
subids = this.subscenes[id];
for (var i = 0; i < subids.length; i++)
this.drawFns[subids[i]].call(this, subids[i]);
}
this.drawScene();
var vpx0 = {
19: 0
};
var vpy0 = {
19: 0
};
var vpWidths = {
19: 480
};
var vpHeights = {
19: 480
};
var activeModel = {
19: 19
};
var activeProjection = {
19: 19
};
sliderrgl.listeners = {
19: [ 19 ]
};
var whichSubscene = function(coords){
if (0 <= coords.x && coords.x <= 480 && 0 <= coords.y && coords.y <= 480) return(19);
return(19);
}
var translateCoords = function(subsceneid, coords){
return {x:coords.x - vpx0[subsceneid], y:coords.y - vpy0[subsceneid]};
}
var vlen = function(v) {
return sqrt(v[0]*v[0] + v[1]*v[1] + v[2]*v[2])
}
var xprod = function(a, b) {
return [a[1]*b[2] - a[2]*b[1],
a[2]*b[0] - a[0]*b[2],
a[0]*b[1] - a[1]*b[0]];
}
var screenToVector = function(x, y) {
var width = vpWidths[activeSubscene];
var height = vpHeights[activeSubscene];
var radius = max(width, height)/2.0;
var cx = width/2.0;
var cy = height/2.0;
var px = (x-cx)/radius;
var py = (y-cy)/radius;
var plen = sqrt(px*px+py*py);
if (plen > 1.e-6) { 
px = px/plen;
py = py/plen;
}
var angle = (SQRT2 - plen)/SQRT2*PI/2;
var z = sin(angle);
var zlen = sqrt(1.0 - z*z);
px = px * zlen;
py = py * zlen;
return [px, py, z];
}
var rotBase;
var trackballdown = function(x,y) {
rotBase = screenToVector(x, y);
var l = sliderrgl.listeners[activeModel[activeSubscene]];
saveMat = new Object();
for (var i = 0; i < l.length; i++) 
saveMat[l[i]] = new CanvasMatrix4(sliderrgl.userMatrix[l[i]]);
}
var trackballmove = function(x,y) {
var rotCurrent = screenToVector(x,y);
var dot = rotBase[0]*rotCurrent[0] + 
rotBase[1]*rotCurrent[1] + 
rotBase[2]*rotCurrent[2];
var angle = acos( dot/vlen(rotBase)/vlen(rotCurrent) )*180./PI;
var axis = xprod(rotBase, rotCurrent);
var l = sliderrgl.listeners[activeModel[activeSubscene]];
for (i = 0; i < l.length; i++) {
sliderrgl.userMatrix[l[i]].load(saveMat[l[i]]);
sliderrgl.userMatrix[l[i]].rotate(angle, axis[0], axis[1], axis[2]);
}
sliderrgl.drawScene();
}
var trackballend = 0;
var y0zoom = 0;
var zoom0 = 0;
var zoomdown = function(x, y) {
y0zoom = y;
zoom0 = new Object();
l = sliderrgl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
zoom0[l[i]] = log(sliderrgl.zoom[l[i]]);
}
var zoommove = function(x, y) {
l = sliderrgl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
sliderrgl.zoom[l[i]] = exp(zoom0[l[i]] + (y-y0zoom)/height);
sliderrgl.drawScene();
}
var zoomend = 0;
var y0fov = 0;
var fov0 = 0;
var fovdown = function(x, y) {
y0fov = y;
fov0 = new Object();
l = sliderrgl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
fov0[l[i]] = sliderrgl.FOV[l[i]];
}
var fovmove = function(x, y) {
l = sliderrgl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
sliderrgl.FOV[l[i]] = max(1, min(179, fov0[l[i]] + 180*(y-y0fov)/height));
sliderrgl.drawScene();
}
var fovend = 0;
var mousedown = [trackballdown, zoomdown, fovdown];
var mousemove = [trackballmove, zoommove, fovmove];
var mouseend = [trackballend, zoomend, fovend];
function relMouseCoords(event){
var totalOffsetX = 0;
var totalOffsetY = 0;
var currentElement = canvas;
do{
totalOffsetX += currentElement.offsetLeft;
totalOffsetY += currentElement.offsetTop;
currentElement = currentElement.offsetParent;
}
while(currentElement)
var canvasX = event.pageX - totalOffsetX;
var canvasY = event.pageY - totalOffsetY;
return {x:canvasX, y:canvasY}
}
canvas.onmousedown = function ( ev ){
if (!ev.which) // Use w3c defns in preference to MS
switch (ev.button) {
case 0: ev.which = 1; break;
case 1: 
case 4: ev.which = 2; break;
case 2: ev.which = 3;
}
drag = ev.which;
var f = mousedown[drag-1];
if (f) {
var coords = relMouseCoords(ev);
coords.y = height-coords.y;
activeSubscene = whichSubscene(coords);
coords = translateCoords(activeSubscene, coords);
f(coords.x, coords.y); 
ev.preventDefault();
}
}    
canvas.onmouseup = function ( ev ){ 
if ( drag == 0 ) return;
var f = mouseend[drag-1];
if (f) 
f();
drag = 0;
}
canvas.onmouseout = canvas.onmouseup;
canvas.onmousemove = function ( ev ){
if ( drag == 0 ) return;
var f = mousemove[drag-1];
if (f) {
var coords = relMouseCoords(ev);
coords.y = height - coords.y;
coords = translateCoords(activeSubscene, coords);
f(coords.x, coords.y);
}
}
var wheelHandler = function(ev) {
var del = 1.1;
if (ev.shiftKey) del = 1.01;
var ds = ((ev.detail || ev.wheelDelta) > 0) ? del : (1 / del);
l = sliderrgl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
sliderrgl.zoom[l[i]] *= ds;
sliderrgl.drawScene();
ev.preventDefault();
};
canvas.addEventListener("DOMMouseScroll", wheelHandler, false);
canvas.addEventListener("mousewheel", wheelHandler, false);
}
</script>
<canvas id="slidercanvas" class="rglWebGL" width="1" height="1">
</canvas>
<p id="sliderdebug">
You must enable Javascript to view this page properly.
</p>
<script>sliderrgl.start();</script>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">subsetSlider</span>(<span class="dt">subsets =</span> <span class="kw">list</span>(<span class="dt">setosa =</span> sphereid, 
                  <span class="dt">versicolor =</span> sphereid +<span class="st"> </span><span class="dv">1</span>, 
                  <span class="dt">virginica =</span> sphereid +<span class="st"> </span><span class="dv">2</span>, 
                  <span class="dt">all =</span> sphereid +<span class="st"> </span><span class="dv">0</span>:<span class="dv">2</span>),
             <span class="dt">prefixes =</span> <span class="st">&quot;slider&quot;</span>, <span class="dt">subscenes =</span> subid, 
             <span class="dt">init =</span> <span class="dv">3</span>)</code></pre>
<script>sliderrgl.input886263021dc = function(value){
   (function(value) {
  var ids = [[25],[26],[27],[25,26,27]]; 
  var fullset = [25,26,27];
  var f = function(x) { return fullset.indexOf(x) < 0 };
  value = Math.round(value);
  var entries = sliderrgl.getSubsceneEntries(19);
  entries = entries.filter(f);
  entries = entries.concat(ids[value]);
  sliderrgl.setSubsceneEntries(entries, 19);
})(value);
   sliderrgl.drawScene();
   var lvalue = Math.round((value - 0)/1);
   var labels = ['setosa','versicolor','virginica','all']; 
  label = document.getElementById('input886263021dctext');
  if (label !== null) label.value = labels[lvalue];
}
sliderrgl.input886263021dc(3);</script>
<input type="range" min="0" max="3" step="1" value="3" id="input886263021dc" name="input886263021dc" oninput="sliderrgl.input886263021dc(this.valueAsNumber)">
<output id="input886263021dctext" for="input886263021dc">
all
</output>
<p>There are several other functions to generate the Javascript code for controls. <a name="par3dinterpSetter"><a href="../../rgl/help/par3dinterpSetter"><code>par3dinterpSetter</code></a></a> generates a function that approximates the result of <a href="#par3dinterp"><code>par3dinterp</code></a>. <a name="propertySetter"><a href="../../rgl/help/propertySetter"><code>propertySetter</code></a></a> is a more general function to set the value of properties of the scene. Both generate Javascript functions, but not the controls to use them; for that, use <a name="propertySlider"><a href="../../rgl/help/propertySlider"><code>propertySlider</code></a></a> or your own custom code.</p>
For example, the following code (similar to the <a href="#play3d"><code>play3d</code></a> example) rotates the scene in a complex way.
<canvas id="userMatrixtextureCanvas" style="display: none;" width="256" height="256">
Your browser does not support the HTML5 canvas element.
</canvas>
<!-- ****** lines object 46 ****** -->
<script id="userMatrixvshader46" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="userMatrixfshader46" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<!-- ****** text object 47 ****** -->
<script id="userMatrixvshader47" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="userMatrixfshader47" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** lines object 48 ****** -->
<script id="userMatrixvshader48" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="userMatrixfshader48" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<!-- ****** text object 49 ****** -->
<script id="userMatrixvshader49" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="userMatrixfshader49" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** lines object 50 ****** -->
<script id="userMatrixvshader50" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="userMatrixfshader50" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<!-- ****** text object 51 ****** -->
<script id="userMatrixvshader51" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="userMatrixfshader51" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** lines object 52 ****** -->
<script id="userMatrixvshader52" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="userMatrixfshader52" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<script type="text/javascript">
var userMatrixrgl = new rglClass();
userMatrixrgl.start = function() {
var debug = function(msg) {
document.getElementById("userMatrixdebug").innerHTML = msg;
}
debug("");
var canvas = document.getElementById("userMatrixcanvas");
if (!window.WebGLRenderingContext){
debug(" Your browser does not support WebGL. See <a href=\"http://get.webgl.org\">http://get.webgl.org</a>");
return;
}
try {
// Try to grab the standard context. If it fails, fallback to experimental.
this.gl = canvas.getContext("webgl") 
|| canvas.getContext("experimental-webgl");
}
catch(e) {}
if ( !this.gl ) {
debug(" Your browser appears to support WebGL, but did not create a WebGL context.  See <a href=\"http://get.webgl.org\">http://get.webgl.org</a>");
return;
}
var gl = this.gl;
var width = 481;  var height = 481;
canvas.width = width;   canvas.height = height;
var normMatrix = new CanvasMatrix4();
var saveMat = new Object();
var distance;
var posLoc = 0;
var colLoc = 1;
var activeSubscene = 19;
this.flags[19] = 1195;
this.zoom[19] = 1;
this.FOV[19] = 30;
this.viewport[19] = [0, 0, 480, 480];
this.userMatrix[19] = new CanvasMatrix4();
this.userMatrix[19].load([
1, 0, 0, 0,
0, 0.3420201, -0.9396926, 0,
0, 0.9396926, 0.3420201, 0,
0, 0, 0, 1
]);
this.clipplanes[19] = [];
this.opaque[19] = [25,26,27,29,30,31,46,47,48,49,50,51,52];
this.transparent[19] = [];
this.subscenes[19] = [];
function getPowerOfTwo(value) {
var pow = 1;
while(pow<value) {
pow *= 2;
}
return pow;
}
function handleLoadedTexture(texture, textureCanvas) {
gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);
gl.bindTexture(gl.TEXTURE_2D, texture);
gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, textureCanvas);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);
gl.generateMipmap(gl.TEXTURE_2D);
gl.bindTexture(gl.TEXTURE_2D, null);
}
function loadImageToTexture(filename, texture) {   
var canvas = document.getElementById("userMatrixtextureCanvas");
var ctx = canvas.getContext("2d");
var image = new Image();
image.onload = function() {
var w = image.width;
var h = image.height;
var canvasX = getPowerOfTwo(w);
var canvasY = getPowerOfTwo(h);
canvas.width = canvasX;
canvas.height = canvasY;
ctx.imageSmoothingEnabled = true;
ctx.drawImage(image, 0, 0, canvasX, canvasY);
handleLoadedTexture(texture, canvas);
userMatrixrgl.drawScene();
}
image.src = filename;
}      
function drawTextToCanvas(text, cex) {
var canvasX, canvasY;
var textX, textY;
var textHeight = 20 * cex;
var textColour = "white";
var fontFamily = "Arial";
var backgroundColour = "rgba(0,0,0,0)";
var canvas = document.getElementById("userMatrixtextureCanvas");
var ctx = canvas.getContext("2d");
ctx.font = textHeight+"px "+fontFamily;
canvasX = 1;
var widths = [];
for (var i = 0; i < text.length; i++)  {
widths[i] = ctx.measureText(text[i]).width;
canvasX = (widths[i] > canvasX) ? widths[i] : canvasX;
}     
canvasX = getPowerOfTwo(canvasX);
var offset = 2*textHeight; // offset to first baseline
var skip = 2*textHeight;   // skip between baselines      
canvasY = getPowerOfTwo(offset + text.length*skip);
canvas.width = canvasX;
canvas.height = canvasY;
ctx.fillStyle = backgroundColour;
ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
ctx.fillStyle = textColour;
ctx.textAlign = "left";
ctx.textBaseline = "alphabetic";
ctx.font = textHeight+"px "+fontFamily;
for(var i = 0; i < text.length; i++) {
textY = i*skip + offset;
ctx.fillText(text[i], 0,  textY);
}
return {canvasX:canvasX, canvasY:canvasY,
widths:widths, textHeight:textHeight,
offset:offset, skip:skip};
}
// ****** sphere object ******
var sphereBuf = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, sphereBuf);
gl.bufferData(gl.ARRAY_BUFFER, plot3drgl.sphereverts, gl.STATIC_DRAW);
var sphereIbuf = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sphereIbuf);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, plot3drgl.spherefaces, gl.STATIC_DRAW);
// ****** spheres object 25 ******
this.flags[25] = 4099;
this.prog[25]  = gl.createProgram();
gl.attachShader(this.prog[25], this.getShader( gl, "togglevshader25" ));
gl.attachShader(this.prog[25], this.getShader( gl, "togglefshader25" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[25], 0, "aPos");
gl.bindAttribLocation(this.prog[25], 1, "aCol");
gl.linkProgram(this.prog[25]);
this.offsets[25]={vofs:0, cofs:3, nofs:-1, radofs:7, oofs:-1, tofs:-1, stride:8};
this.values[25] = togglergl.values[25];
this.normLoc[25] = gl.getAttribLocation(this.prog[25], "aNorm");
this.mvMatLoc[25] = gl.getUniformLocation(this.prog[25],"mvMatrix");
this.prMatLoc[25] = gl.getUniformLocation(this.prog[25],"prMatrix");
this.normMatLoc[25] = gl.getUniformLocation(this.prog[25],"normMatrix");
// ****** spheres object 26 ******
this.flags[26] = 4099;
this.prog[26]  = gl.createProgram();
gl.attachShader(this.prog[26], this.getShader( gl, "togglevshader26" ));
gl.attachShader(this.prog[26], this.getShader( gl, "togglefshader26" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[26], 0, "aPos");
gl.bindAttribLocation(this.prog[26], 1, "aCol");
gl.linkProgram(this.prog[26]);
this.offsets[26]={vofs:0, cofs:3, nofs:-1, radofs:7, oofs:-1, tofs:-1, stride:8};
this.values[26] = togglergl.values[26];
this.normLoc[26] = gl.getAttribLocation(this.prog[26], "aNorm");
this.mvMatLoc[26] = gl.getUniformLocation(this.prog[26],"mvMatrix");
this.prMatLoc[26] = gl.getUniformLocation(this.prog[26],"prMatrix");
this.normMatLoc[26] = gl.getUniformLocation(this.prog[26],"normMatrix");
// ****** spheres object 27 ******
this.flags[27] = 4099;
this.prog[27]  = gl.createProgram();
gl.attachShader(this.prog[27], this.getShader( gl, "togglevshader27" ));
gl.attachShader(this.prog[27], this.getShader( gl, "togglefshader27" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[27], 0, "aPos");
gl.bindAttribLocation(this.prog[27], 1, "aCol");
gl.linkProgram(this.prog[27]);
this.offsets[27]={vofs:0, cofs:3, nofs:-1, radofs:7, oofs:-1, tofs:-1, stride:8};
this.values[27] = togglergl.values[27];
this.normLoc[27] = gl.getAttribLocation(this.prog[27], "aNorm");
this.mvMatLoc[27] = gl.getUniformLocation(this.prog[27],"mvMatrix");
this.prMatLoc[27] = gl.getUniformLocation(this.prog[27],"prMatrix");
this.normMatLoc[27] = gl.getUniformLocation(this.prog[27],"normMatrix");
// ****** text object 29 ******
this.flags[29] = 4136;
this.prog[29]  = gl.createProgram();
gl.attachShader(this.prog[29], this.getShader( gl, "togglevshader29" ));
gl.attachShader(this.prog[29], this.getShader( gl, "togglefshader29" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[29], 0, "aPos");
gl.bindAttribLocation(this.prog[29], 1, "aCol");
gl.linkProgram(this.prog[29]);
var texts = [
"x"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[29] = gl.getAttribLocation(this.prog[29], "aOfs");
this.texture[29] = gl.createTexture();
this.texLoc[29] = gl.getAttribLocation(this.prog[29], "aTexcoord");
this.sampler[29] = gl.getUniformLocation(this.prog[29],"uSampler");
handleLoadedTexture(this.texture[29], document.getElementById("userMatrixtextureCanvas"));
this.offsets[29]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
this.values[29] = togglergl.values[29];
var f=new Uint16Array([
0, 1, 2, 0, 2, 3
]);
this.buf[29] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[29]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[29], gl.STATIC_DRAW);
this.ibuf[29] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[29]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[29] = gl.getUniformLocation(this.prog[29],"mvMatrix");
this.prMatLoc[29] = gl.getUniformLocation(this.prog[29],"prMatrix");
this.textScaleLoc[29] = gl.getUniformLocation(this.prog[29],"textScale");
// ****** text object 30 ******
this.flags[30] = 4136;
this.prog[30]  = gl.createProgram();
gl.attachShader(this.prog[30], this.getShader( gl, "togglevshader30" ));
gl.attachShader(this.prog[30], this.getShader( gl, "togglefshader30" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[30], 0, "aPos");
gl.bindAttribLocation(this.prog[30], 1, "aCol");
gl.linkProgram(this.prog[30]);
var texts = [
"y"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[30] = gl.getAttribLocation(this.prog[30], "aOfs");
this.texture[30] = gl.createTexture();
this.texLoc[30] = gl.getAttribLocation(this.prog[30], "aTexcoord");
this.sampler[30] = gl.getUniformLocation(this.prog[30],"uSampler");
handleLoadedTexture(this.texture[30], document.getElementById("userMatrixtextureCanvas"));
this.offsets[30]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
this.values[30] = togglergl.values[30];
var f=new Uint16Array([
0, 1, 2, 0, 2, 3
]);
this.buf[30] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[30]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[30], gl.STATIC_DRAW);
this.ibuf[30] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[30]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[30] = gl.getUniformLocation(this.prog[30],"mvMatrix");
this.prMatLoc[30] = gl.getUniformLocation(this.prog[30],"prMatrix");
this.textScaleLoc[30] = gl.getUniformLocation(this.prog[30],"textScale");
// ****** text object 31 ******
this.flags[31] = 4136;
this.prog[31]  = gl.createProgram();
gl.attachShader(this.prog[31], this.getShader( gl, "togglevshader31" ));
gl.attachShader(this.prog[31], this.getShader( gl, "togglefshader31" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[31], 0, "aPos");
gl.bindAttribLocation(this.prog[31], 1, "aCol");
gl.linkProgram(this.prog[31]);
var texts = [
"z"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[31] = gl.getAttribLocation(this.prog[31], "aOfs");
this.texture[31] = gl.createTexture();
this.texLoc[31] = gl.getAttribLocation(this.prog[31], "aTexcoord");
this.sampler[31] = gl.getUniformLocation(this.prog[31],"uSampler");
handleLoadedTexture(this.texture[31], document.getElementById("userMatrixtextureCanvas"));
this.offsets[31]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
this.values[31] = togglergl.values[31];
var f=new Uint16Array([
0, 1, 2, 0, 2, 3
]);
this.buf[31] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[31]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[31], gl.STATIC_DRAW);
this.ibuf[31] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[31]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[31] = gl.getUniformLocation(this.prog[31],"mvMatrix");
this.prMatLoc[31] = gl.getUniformLocation(this.prog[31],"prMatrix");
this.textScaleLoc[31] = gl.getUniformLocation(this.prog[31],"textScale");
// ****** lines object 46 ******
this.flags[46] = 128;
this.prog[46]  = gl.createProgram();
gl.attachShader(this.prog[46], this.getShader( gl, "userMatrixvshader46" ));
gl.attachShader(this.prog[46], this.getShader( gl, "userMatrixfshader46" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[46], 0, "aPos");
gl.bindAttribLocation(this.prog[46], 1, "aCol");
gl.linkProgram(this.prog[46]);
this.offsets[46]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:-1, tofs:-1, stride:3};
var v=new Float32Array([
5, 1.840521, 0.607948,
8, 1.840521, 0.607948,
5, 1.840521, 0.607948,
5, 1.772546, 0.4408454,
6, 1.840521, 0.607948,
6, 1.772546, 0.4408454,
7, 1.840521, 0.607948,
7, 1.772546, 0.4408454,
8, 1.840521, 0.607948,
8, 1.772546, 0.4408454
]);
this.values[46] = v;
this.buf[46] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[46]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[46], gl.STATIC_DRAW);
this.mvMatLoc[46] = gl.getUniformLocation(this.prog[46],"mvMatrix");
this.prMatLoc[46] = gl.getUniformLocation(this.prog[46],"prMatrix");
// ****** text object 47 ******
this.flags[47] = 40;
this.prog[47]  = gl.createProgram();
gl.attachShader(this.prog[47], this.getShader( gl, "userMatrixvshader47" ));
gl.attachShader(this.prog[47], this.getShader( gl, "userMatrixfshader47" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[47], 0, "aPos");
gl.bindAttribLocation(this.prog[47], 1, "aCol");
gl.linkProgram(this.prog[47]);
var texts = [
"5",
"6",
"7",
"8"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[47] = gl.getAttribLocation(this.prog[47], "aOfs");
this.texture[47] = gl.createTexture();
this.texLoc[47] = gl.getAttribLocation(this.prog[47], "aTexcoord");
this.sampler[47] = gl.getUniformLocation(this.prog[47],"uSampler");
handleLoadedTexture(this.texture[47], document.getElementById("userMatrixtextureCanvas"));
this.offsets[47]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
5, 1.636598, 0.1066402, 0, -0.5, 0.5, 0.5,
5, 1.636598, 0.1066402, 1, -0.5, 0.5, 0.5,
5, 1.636598, 0.1066402, 1, 1.5, 0.5, 0.5,
5, 1.636598, 0.1066402, 0, 1.5, 0.5, 0.5,
6, 1.636598, 0.1066402, 0, -0.5, 0.5, 0.5,
6, 1.636598, 0.1066402, 1, -0.5, 0.5, 0.5,
6, 1.636598, 0.1066402, 1, 1.5, 0.5, 0.5,
6, 1.636598, 0.1066402, 0, 1.5, 0.5, 0.5,
7, 1.636598, 0.1066402, 0, -0.5, 0.5, 0.5,
7, 1.636598, 0.1066402, 1, -0.5, 0.5, 0.5,
7, 1.636598, 0.1066402, 1, 1.5, 0.5, 0.5,
7, 1.636598, 0.1066402, 0, 1.5, 0.5, 0.5,
8, 1.636598, 0.1066402, 0, -0.5, 0.5, 0.5,
8, 1.636598, 0.1066402, 1, -0.5, 0.5, 0.5,
8, 1.636598, 0.1066402, 1, 1.5, 0.5, 0.5,
8, 1.636598, 0.1066402, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<4; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[47]["stride"]*(4*i + j) + this.offsets[47]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[47] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3,
4, 5, 6, 4, 6, 7,
8, 9, 10, 8, 10, 11,
12, 13, 14, 12, 14, 15
]);
this.buf[47] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[47]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[47], gl.STATIC_DRAW);
this.ibuf[47] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[47]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[47] = gl.getUniformLocation(this.prog[47],"mvMatrix");
this.prMatLoc[47] = gl.getUniformLocation(this.prog[47],"prMatrix");
this.textScaleLoc[47] = gl.getUniformLocation(this.prog[47],"textScale");
// ****** lines object 48 ******
this.flags[48] = 128;
this.prog[48]  = gl.createProgram();
gl.attachShader(this.prog[48], this.getShader( gl, "userMatrixvshader48" ));
gl.attachShader(this.prog[48], this.getShader( gl, "userMatrixfshader48" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[48], 0, "aPos");
gl.bindAttribLocation(this.prog[48], 1, "aCol");
gl.linkProgram(this.prog[48]);
this.offsets[48]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:-1, tofs:-1, stride:3};
var v=new Float32Array([
4.060781, 2, 0.607948,
4.060781, 4.5, 0.607948,
4.060781, 2, 0.607948,
3.958821, 2, 0.4408454,
4.060781, 2.5, 0.607948,
3.958821, 2.5, 0.4408454,
4.060781, 3, 0.607948,
3.958821, 3, 0.4408454,
4.060781, 3.5, 0.607948,
3.958821, 3.5, 0.4408454,
4.060781, 4, 0.607948,
3.958821, 4, 0.4408454,
4.060781, 4.5, 0.607948,
3.958821, 4.5, 0.4408454
]);
this.values[48] = v;
this.buf[48] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[48]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[48], gl.STATIC_DRAW);
this.mvMatLoc[48] = gl.getUniformLocation(this.prog[48],"mvMatrix");
this.prMatLoc[48] = gl.getUniformLocation(this.prog[48],"prMatrix");
// ****** text object 49 ******
this.flags[49] = 40;
this.prog[49]  = gl.createProgram();
gl.attachShader(this.prog[49], this.getShader( gl, "userMatrixvshader49" ));
gl.attachShader(this.prog[49], this.getShader( gl, "userMatrixfshader49" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[49], 0, "aPos");
gl.bindAttribLocation(this.prog[49], 1, "aCol");
gl.linkProgram(this.prog[49]);
var texts = [
"2",
"2.5",
"3",
"3.5",
"4",
"4.5"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[49] = gl.getAttribLocation(this.prog[49], "aOfs");
this.texture[49] = gl.createTexture();
this.texLoc[49] = gl.getAttribLocation(this.prog[49], "aTexcoord");
this.sampler[49] = gl.getUniformLocation(this.prog[49],"uSampler");
handleLoadedTexture(this.texture[49], document.getElementById("userMatrixtextureCanvas"));
this.offsets[49]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
3.754899, 2, 0.1066402, 0, -0.5, 0.5, 0.5,
3.754899, 2, 0.1066402, 1, -0.5, 0.5, 0.5,
3.754899, 2, 0.1066402, 1, 1.5, 0.5, 0.5,
3.754899, 2, 0.1066402, 0, 1.5, 0.5, 0.5,
3.754899, 2.5, 0.1066402, 0, -0.5, 0.5, 0.5,
3.754899, 2.5, 0.1066402, 1, -0.5, 0.5, 0.5,
3.754899, 2.5, 0.1066402, 1, 1.5, 0.5, 0.5,
3.754899, 2.5, 0.1066402, 0, 1.5, 0.5, 0.5,
3.754899, 3, 0.1066402, 0, -0.5, 0.5, 0.5,
3.754899, 3, 0.1066402, 1, -0.5, 0.5, 0.5,
3.754899, 3, 0.1066402, 1, 1.5, 0.5, 0.5,
3.754899, 3, 0.1066402, 0, 1.5, 0.5, 0.5,
3.754899, 3.5, 0.1066402, 0, -0.5, 0.5, 0.5,
3.754899, 3.5, 0.1066402, 1, -0.5, 0.5, 0.5,
3.754899, 3.5, 0.1066402, 1, 1.5, 0.5, 0.5,
3.754899, 3.5, 0.1066402, 0, 1.5, 0.5, 0.5,
3.754899, 4, 0.1066402, 0, -0.5, 0.5, 0.5,
3.754899, 4, 0.1066402, 1, -0.5, 0.5, 0.5,
3.754899, 4, 0.1066402, 1, 1.5, 0.5, 0.5,
3.754899, 4, 0.1066402, 0, 1.5, 0.5, 0.5,
3.754899, 4.5, 0.1066402, 0, -0.5, 0.5, 0.5,
3.754899, 4.5, 0.1066402, 1, -0.5, 0.5, 0.5,
3.754899, 4.5, 0.1066402, 1, 1.5, 0.5, 0.5,
3.754899, 4.5, 0.1066402, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<6; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[49]["stride"]*(4*i + j) + this.offsets[49]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[49] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3,
4, 5, 6, 4, 6, 7,
8, 9, 10, 8, 10, 11,
12, 13, 14, 12, 14, 15,
16, 17, 18, 16, 18, 19,
20, 21, 22, 20, 22, 23
]);
this.buf[49] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[49]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[49], gl.STATIC_DRAW);
this.ibuf[49] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[49]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[49] = gl.getUniformLocation(this.prog[49],"mvMatrix");
this.prMatLoc[49] = gl.getUniformLocation(this.prog[49],"prMatrix");
this.textScaleLoc[49] = gl.getUniformLocation(this.prog[49],"textScale");
// ****** lines object 50 ******
this.flags[50] = 128;
this.prog[50]  = gl.createProgram();
gl.attachShader(this.prog[50], this.getShader( gl, "userMatrixvshader50" ));
gl.attachShader(this.prog[50], this.getShader( gl, "userMatrixfshader50" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[50], 0, "aPos");
gl.bindAttribLocation(this.prog[50], 1, "aCol");
gl.linkProgram(this.prog[50]);
this.offsets[50]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:-1, tofs:-1, stride:3};
var v=new Float32Array([
4.060781, 1.840521, 1,
4.060781, 1.840521, 7,
4.060781, 1.840521, 1,
3.958821, 1.772546, 1,
4.060781, 1.840521, 2,
3.958821, 1.772546, 2,
4.060781, 1.840521, 3,
3.958821, 1.772546, 3,
4.060781, 1.840521, 4,
3.958821, 1.772546, 4,
4.060781, 1.840521, 5,
3.958821, 1.772546, 5,
4.060781, 1.840521, 6,
3.958821, 1.772546, 6,
4.060781, 1.840521, 7,
3.958821, 1.772546, 7
]);
this.values[50] = v;
this.buf[50] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[50]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[50], gl.STATIC_DRAW);
this.mvMatLoc[50] = gl.getUniformLocation(this.prog[50],"mvMatrix");
this.prMatLoc[50] = gl.getUniformLocation(this.prog[50],"prMatrix");
// ****** text object 51 ******
this.flags[51] = 40;
this.prog[51]  = gl.createProgram();
gl.attachShader(this.prog[51], this.getShader( gl, "userMatrixvshader51" ));
gl.attachShader(this.prog[51], this.getShader( gl, "userMatrixfshader51" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[51], 0, "aPos");
gl.bindAttribLocation(this.prog[51], 1, "aCol");
gl.linkProgram(this.prog[51]);
var texts = [
"1",
"2",
"3",
"4",
"5",
"6",
"7"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[51] = gl.getAttribLocation(this.prog[51], "aOfs");
this.texture[51] = gl.createTexture();
this.texLoc[51] = gl.getAttribLocation(this.prog[51], "aTexcoord");
this.sampler[51] = gl.getUniformLocation(this.prog[51],"uSampler");
handleLoadedTexture(this.texture[51], document.getElementById("userMatrixtextureCanvas"));
this.offsets[51]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
3.754899, 1.636598, 1, 0, -0.5, 0.5, 0.5,
3.754899, 1.636598, 1, 1, -0.5, 0.5, 0.5,
3.754899, 1.636598, 1, 1, 1.5, 0.5, 0.5,
3.754899, 1.636598, 1, 0, 1.5, 0.5, 0.5,
3.754899, 1.636598, 2, 0, -0.5, 0.5, 0.5,
3.754899, 1.636598, 2, 1, -0.5, 0.5, 0.5,
3.754899, 1.636598, 2, 1, 1.5, 0.5, 0.5,
3.754899, 1.636598, 2, 0, 1.5, 0.5, 0.5,
3.754899, 1.636598, 3, 0, -0.5, 0.5, 0.5,
3.754899, 1.636598, 3, 1, -0.5, 0.5, 0.5,
3.754899, 1.636598, 3, 1, 1.5, 0.5, 0.5,
3.754899, 1.636598, 3, 0, 1.5, 0.5, 0.5,
3.754899, 1.636598, 4, 0, -0.5, 0.5, 0.5,
3.754899, 1.636598, 4, 1, -0.5, 0.5, 0.5,
3.754899, 1.636598, 4, 1, 1.5, 0.5, 0.5,
3.754899, 1.636598, 4, 0, 1.5, 0.5, 0.5,
3.754899, 1.636598, 5, 0, -0.5, 0.5, 0.5,
3.754899, 1.636598, 5, 1, -0.5, 0.5, 0.5,
3.754899, 1.636598, 5, 1, 1.5, 0.5, 0.5,
3.754899, 1.636598, 5, 0, 1.5, 0.5, 0.5,
3.754899, 1.636598, 6, 0, -0.5, 0.5, 0.5,
3.754899, 1.636598, 6, 1, -0.5, 0.5, 0.5,
3.754899, 1.636598, 6, 1, 1.5, 0.5, 0.5,
3.754899, 1.636598, 6, 0, 1.5, 0.5, 0.5,
3.754899, 1.636598, 7, 0, -0.5, 0.5, 0.5,
3.754899, 1.636598, 7, 1, -0.5, 0.5, 0.5,
3.754899, 1.636598, 7, 1, 1.5, 0.5, 0.5,
3.754899, 1.636598, 7, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<7; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[51]["stride"]*(4*i + j) + this.offsets[51]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[51] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3,
4, 5, 6, 4, 6, 7,
8, 9, 10, 8, 10, 11,
12, 13, 14, 12, 14, 15,
16, 17, 18, 16, 18, 19,
20, 21, 22, 20, 22, 23,
24, 25, 26, 24, 26, 27
]);
this.buf[51] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[51]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[51], gl.STATIC_DRAW);
this.ibuf[51] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[51]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[51] = gl.getUniformLocation(this.prog[51],"mvMatrix");
this.prMatLoc[51] = gl.getUniformLocation(this.prog[51],"prMatrix");
this.textScaleLoc[51] = gl.getUniformLocation(this.prog[51],"textScale");
// ****** lines object 52 ******
this.flags[52] = 128;
this.prog[52]  = gl.createProgram();
gl.attachShader(this.prog[52], this.getShader( gl, "userMatrixvshader52" ));
gl.attachShader(this.prog[52], this.getShader( gl, "userMatrixfshader52" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[52], 0, "aPos");
gl.bindAttribLocation(this.prog[52], 1, "aCol");
gl.linkProgram(this.prog[52]);
this.offsets[52]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:-1, tofs:-1, stride:3};
var v=new Float32Array([
4.060781, 1.840521, 0.607948,
4.060781, 4.55948, 0.607948,
4.060781, 1.840521, 7.292052,
4.060781, 4.55948, 7.292052,
4.060781, 1.840521, 0.607948,
4.060781, 1.840521, 7.292052,
4.060781, 4.55948, 0.607948,
4.060781, 4.55948, 7.292052,
4.060781, 1.840521, 0.607948,
8.139219, 1.840521, 0.607948,
4.060781, 1.840521, 7.292052,
8.139219, 1.840521, 7.292052,
4.060781, 4.55948, 0.607948,
8.139219, 4.55948, 0.607948,
4.060781, 4.55948, 7.292052,
8.139219, 4.55948, 7.292052,
8.139219, 1.840521, 0.607948,
8.139219, 4.55948, 0.607948,
8.139219, 1.840521, 7.292052,
8.139219, 4.55948, 7.292052,
8.139219, 1.840521, 0.607948,
8.139219, 1.840521, 7.292052,
8.139219, 4.55948, 0.607948,
8.139219, 4.55948, 7.292052
]);
this.values[52] = v;
this.buf[52] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[52]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[52], gl.STATIC_DRAW);
this.mvMatLoc[52] = gl.getUniformLocation(this.prog[52],"mvMatrix");
this.prMatLoc[52] = gl.getUniformLocation(this.prog[52],"prMatrix");
gl.enable(gl.DEPTH_TEST);
gl.depthFunc(gl.LEQUAL);
gl.clearDepth(1.0);
gl.clearColor(1,1,1,1);
var drag  = 0;
this.drawScene = function() {
gl.depthMask(true);
gl.disable(gl.BLEND);
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
this.drawFns[19].call(this, 19)
gl.flush ();
}
// ****** spheres object 25 *******
this.drawFns[25] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, sphereBuf);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sphereIbuf);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(normMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 12,  0);
gl.enableVertexAttribArray(this.normLoc[id] );
gl.vertexAttribPointer(this.normLoc[id],  3, gl.FLOAT, false, 12,  0);
gl.disableVertexAttribArray( colLoc );
var sphereNorm = new CanvasMatrix4();
sphereNorm.scale(1.17337, 1.760048, 0.7159564);
sphereNorm.multRight(normMatrix);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(sphereNorm.getAsArray()) );
for (var i = 0; i < 50; i++) {
var sphereMV = new CanvasMatrix4();
var baseofs = i*togglergl.offsets[id]["stride"];
var ofs = baseofs + this.offsets[id]["radofs"];        
var scale = this.values[id][ofs];
sphereMV.scale(0.8522463*scale, 0.5681663*scale, 1.396733*scale);
sphereMV.translate(this.values[id][baseofs], 
this.values[id][baseofs+1], 
this.values[id][baseofs+2]);
sphereMV.multRight(this.mvMatrix);
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(sphereMV.getAsArray()) );
ofs = baseofs + this.offsets[id]["cofs"];       
gl.vertexAttrib4f( colLoc, this.values[id][ofs], 
this.values[id][ofs+1], 
this.values[id][ofs+2],
this.values[id][ofs+3] );
gl.drawElements(gl.TRIANGLES, 384, gl.UNSIGNED_SHORT, 0);
}
}
// ****** spheres object 26 *******
this.drawFns[26] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, sphereBuf);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sphereIbuf);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(normMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 12,  0);
gl.enableVertexAttribArray(this.normLoc[id] );
gl.vertexAttribPointer(this.normLoc[id],  3, gl.FLOAT, false, 12,  0);
gl.disableVertexAttribArray( colLoc );
var sphereNorm = new CanvasMatrix4();
sphereNorm.scale(1.17337, 1.760048, 0.7159564);
sphereNorm.multRight(normMatrix);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(sphereNorm.getAsArray()) );
for (var i = 0; i < 50; i++) {
var sphereMV = new CanvasMatrix4();
var baseofs = i*togglergl.offsets[id]["stride"];
var ofs = baseofs + this.offsets[id]["radofs"];        
var scale = this.values[id][ofs];
sphereMV.scale(0.8522463*scale, 0.5681663*scale, 1.396733*scale);
sphereMV.translate(this.values[id][baseofs], 
this.values[id][baseofs+1], 
this.values[id][baseofs+2]);
sphereMV.multRight(this.mvMatrix);
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(sphereMV.getAsArray()) );
ofs = baseofs + this.offsets[id]["cofs"];       
gl.vertexAttrib4f( colLoc, this.values[id][ofs], 
this.values[id][ofs+1], 
this.values[id][ofs+2],
this.values[id][ofs+3] );
gl.drawElements(gl.TRIANGLES, 384, gl.UNSIGNED_SHORT, 0);
}
}
// ****** spheres object 27 *******
this.drawFns[27] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, sphereBuf);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sphereIbuf);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(normMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 12,  0);
gl.enableVertexAttribArray(this.normLoc[id] );
gl.vertexAttribPointer(this.normLoc[id],  3, gl.FLOAT, false, 12,  0);
gl.disableVertexAttribArray( colLoc );
var sphereNorm = new CanvasMatrix4();
sphereNorm.scale(1.17337, 1.760048, 0.7159564);
sphereNorm.multRight(normMatrix);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(sphereNorm.getAsArray()) );
for (var i = 0; i < 50; i++) {
var sphereMV = new CanvasMatrix4();
var baseofs = i*togglergl.offsets[id]["stride"];
var ofs = baseofs + this.offsets[id]["radofs"];        
var scale = this.values[id][ofs];
sphereMV.scale(0.8522463*scale, 0.5681663*scale, 1.396733*scale);
sphereMV.translate(this.values[id][baseofs], 
this.values[id][baseofs+1], 
this.values[id][baseofs+2]);
sphereMV.multRight(this.mvMatrix);
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(sphereMV.getAsArray()) );
ofs = baseofs + this.offsets[id]["cofs"];       
gl.vertexAttrib4f( colLoc, this.values[id][ofs], 
this.values[id][ofs+1], 
this.values[id][ofs+2],
this.values[id][ofs+3] );
gl.drawElements(gl.TRIANGLES, 384, gl.UNSIGNED_SHORT, 0);
}
}
// ****** text object 29 *******
this.drawFns[29] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
}
// ****** text object 30 *******
this.drawFns[30] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
}
// ****** text object 31 *******
this.drawFns[31] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
}
// ****** lines object 46 *******
this.drawFns[46] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawArrays(gl.LINES, 0, 10);
}
// ****** text object 47 *******
this.drawFns[47] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 24, gl.UNSIGNED_SHORT, 0);
}
// ****** lines object 48 *******
this.drawFns[48] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawArrays(gl.LINES, 0, 14);
}
// ****** text object 49 *******
this.drawFns[49] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 36, gl.UNSIGNED_SHORT, 0);
}
// ****** lines object 50 *******
this.drawFns[50] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawArrays(gl.LINES, 0, 16);
}
// ****** text object 51 *******
this.drawFns[51] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 42, gl.UNSIGNED_SHORT, 0);
}
// ****** lines object 52 *******
this.drawFns[52] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawArrays(gl.LINES, 0, 24);
}
// ***** subscene 19 ****
this.drawFns[19] = function(id) {
this.vp = this.viewport[id];
gl.viewport(this.vp[0], this.vp[1], this.vp[2], this.vp[3]);
gl.scissor(this.vp[0], this.vp[1], this.vp[2], this.vp[3]);
gl.clearColor(1, 1, 1, 1);
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
this.prMatrix.makeIdentity();
var radius = 4.426033;
var distance = 19.69192;
var t = tan(this.FOV[19]*PI/360);
var near = distance - radius;
var far = distance + radius;
var hlen = t*near;
var aspect = this.vp[2]/this.vp[3];
var z = this.zoom[19];
if (aspect > 1) 
this.prMatrix.frustum(-hlen*aspect*z, hlen*aspect*z, 
-hlen*z, hlen*z, near, far);
else  
this.prMatrix.frustum(-hlen*z, hlen*z, 
-hlen*z/aspect, hlen*z/aspect, 
near, far);
this.mvMatrix.makeIdentity();
this.mvMatrix.translate( -6.1, -3.2, -3.95 );
this.mvMatrix.scale( 1.17337, 1.760048, 0.7159564 );   
this.mvMatrix.multRight( userMatrixrgl.userMatrix[19] );
this.mvMatrix.translate(-0, -0, -19.69192);
normMatrix.makeIdentity();
normMatrix.scale( 0.8522463, 0.5681663, 1.396733 );   
normMatrix.multRight( userMatrixrgl.userMatrix[19] );
var clipids = this.clipplanes[id];
if (clipids.length > 0) {
this.invMatrix = new CanvasMatrix4(this.mvMatrix);
this.invMatrix.invert();
for (var i = 0; i < this.clipplanes[id].length; i++) 
this.drawFns[clipids[i]].call(this, clipids[i]);
}
var subids = this.opaque[id];
for (var i = 0; i < subids.length; i++) 
this.drawFns[subids[i]].call(this, subids[i], clipids);
subids = this.transparent[id];
if (subids.length > 0) {
gl.depthMask(false);
gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA,
gl.ONE, gl.ONE);
gl.enable(gl.BLEND);
for (var i = 0; i < subids.length; i++) 
this.drawFns[subids[i]].call(this, subids[i], clipids);
}
subids = this.subscenes[id];
for (var i = 0; i < subids.length; i++)
this.drawFns[subids[i]].call(this, subids[i]);
}
this.drawScene();
var vpx0 = {
19: 0
};
var vpy0 = {
19: 0
};
var vpWidths = {
19: 480
};
var vpHeights = {
19: 480
};
var activeModel = {
19: 19
};
var activeProjection = {
19: 19
};
userMatrixrgl.listeners = {
19: [ 19 ]
};
var whichSubscene = function(coords){
if (0 <= coords.x && coords.x <= 480 && 0 <= coords.y && coords.y <= 480) return(19);
return(19);
}
var translateCoords = function(subsceneid, coords){
return {x:coords.x - vpx0[subsceneid], y:coords.y - vpy0[subsceneid]};
}
var vlen = function(v) {
return sqrt(v[0]*v[0] + v[1]*v[1] + v[2]*v[2])
}
var xprod = function(a, b) {
return [a[1]*b[2] - a[2]*b[1],
a[2]*b[0] - a[0]*b[2],
a[0]*b[1] - a[1]*b[0]];
}
var screenToVector = function(x, y) {
var width = vpWidths[activeSubscene];
var height = vpHeights[activeSubscene];
var radius = max(width, height)/2.0;
var cx = width/2.0;
var cy = height/2.0;
var px = (x-cx)/radius;
var py = (y-cy)/radius;
var plen = sqrt(px*px+py*py);
if (plen > 1.e-6) { 
px = px/plen;
py = py/plen;
}
var angle = (SQRT2 - plen)/SQRT2*PI/2;
var z = sin(angle);
var zlen = sqrt(1.0 - z*z);
px = px * zlen;
py = py * zlen;
return [px, py, z];
}
var rotBase;
var trackballdown = function(x,y) {
rotBase = screenToVector(x, y);
var l = userMatrixrgl.listeners[activeModel[activeSubscene]];
saveMat = new Object();
for (var i = 0; i < l.length; i++) 
saveMat[l[i]] = new CanvasMatrix4(userMatrixrgl.userMatrix[l[i]]);
}
var trackballmove = function(x,y) {
var rotCurrent = screenToVector(x,y);
var dot = rotBase[0]*rotCurrent[0] + 
rotBase[1]*rotCurrent[1] + 
rotBase[2]*rotCurrent[2];
var angle = acos( dot/vlen(rotBase)/vlen(rotCurrent) )*180./PI;
var axis = xprod(rotBase, rotCurrent);
var l = userMatrixrgl.listeners[activeModel[activeSubscene]];
for (i = 0; i < l.length; i++) {
userMatrixrgl.userMatrix[l[i]].load(saveMat[l[i]]);
userMatrixrgl.userMatrix[l[i]].rotate(angle, axis[0], axis[1], axis[2]);
}
userMatrixrgl.drawScene();
}
var trackballend = 0;
var y0zoom = 0;
var zoom0 = 0;
var zoomdown = function(x, y) {
y0zoom = y;
zoom0 = new Object();
l = userMatrixrgl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
zoom0[l[i]] = log(userMatrixrgl.zoom[l[i]]);
}
var zoommove = function(x, y) {
l = userMatrixrgl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
userMatrixrgl.zoom[l[i]] = exp(zoom0[l[i]] + (y-y0zoom)/height);
userMatrixrgl.drawScene();
}
var zoomend = 0;
var y0fov = 0;
var fov0 = 0;
var fovdown = function(x, y) {
y0fov = y;
fov0 = new Object();
l = userMatrixrgl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
fov0[l[i]] = userMatrixrgl.FOV[l[i]];
}
var fovmove = function(x, y) {
l = userMatrixrgl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
userMatrixrgl.FOV[l[i]] = max(1, min(179, fov0[l[i]] + 180*(y-y0fov)/height));
userMatrixrgl.drawScene();
}
var fovend = 0;
var mousedown = [trackballdown, zoomdown, fovdown];
var mousemove = [trackballmove, zoommove, fovmove];
var mouseend = [trackballend, zoomend, fovend];
function relMouseCoords(event){
var totalOffsetX = 0;
var totalOffsetY = 0;
var currentElement = canvas;
do{
totalOffsetX += currentElement.offsetLeft;
totalOffsetY += currentElement.offsetTop;
currentElement = currentElement.offsetParent;
}
while(currentElement)
var canvasX = event.pageX - totalOffsetX;
var canvasY = event.pageY - totalOffsetY;
return {x:canvasX, y:canvasY}
}
canvas.onmousedown = function ( ev ){
if (!ev.which) // Use w3c defns in preference to MS
switch (ev.button) {
case 0: ev.which = 1; break;
case 1: 
case 4: ev.which = 2; break;
case 2: ev.which = 3;
}
drag = ev.which;
var f = mousedown[drag-1];
if (f) {
var coords = relMouseCoords(ev);
coords.y = height-coords.y;
activeSubscene = whichSubscene(coords);
coords = translateCoords(activeSubscene, coords);
f(coords.x, coords.y); 
ev.preventDefault();
}
}    
canvas.onmouseup = function ( ev ){ 
if ( drag == 0 ) return;
var f = mouseend[drag-1];
if (f) 
f();
drag = 0;
}
canvas.onmouseout = canvas.onmouseup;
canvas.onmousemove = function ( ev ){
if ( drag == 0 ) return;
var f = mousemove[drag-1];
if (f) {
var coords = relMouseCoords(ev);
coords.y = height - coords.y;
coords = translateCoords(activeSubscene, coords);
f(coords.x, coords.y);
}
}
var wheelHandler = function(ev) {
var del = 1.1;
if (ev.shiftKey) del = 1.01;
var ds = ((ev.detail || ev.wheelDelta) > 0) ? del : (1 / del);
l = userMatrixrgl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
userMatrixrgl.zoom[l[i]] *= ds;
userMatrixrgl.drawScene();
ev.preventDefault();
};
canvas.addEventListener("DOMMouseScroll", wheelHandler, false);
canvas.addEventListener("mousewheel", wheelHandler, false);
}
</script>
<canvas id="userMatrixcanvas" class="rglWebGL" width="1" height="1">
</canvas>
<p id="userMatrixdebug">
You must enable Javascript to view this page properly.
</p>
<script>userMatrixrgl.start();</script>
<pre class="sourceCode r"><code class="sourceCode r">M &lt;-<span class="st"> </span>r3dDefaults$userMatrix
fn &lt;-<span class="st"> </span><span class="kw">par3dinterp</span>(<span class="dt">time =</span> (<span class="dv">0</span>:<span class="dv">2</span>)*<span class="fl">0.75</span>, <span class="dt">userMatrix =</span> <span class="kw">list</span>(M,
                                     <span class="kw">rotate3d</span>(M, pi/<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>),
                                     <span class="kw">rotate3d</span>(M, pi/<span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>) ) )
<span class="kw">propertySlider</span>(<span class="dt">setter =</span> <span class="kw">par3dinterpSetter</span>(fn, <span class="dv">0</span>, <span class="fl">1.5</span>, <span class="dt">steps=</span><span class="dv">15</span>, 
                       <span class="dt">prefix =</span> <span class="st">&quot;userMatrix&quot;</span>, 
                       <span class="dt">subscene =</span> subid),
           <span class="dt">step =</span> <span class="fl">0.01</span>)</code></pre>
<script>userMatrixrgl.input886210de6e16 = function(value){
   (function(value){
   var values = [1,0,0,0,0.3420201,-0.9396926,0,0.9396926,0.3420201,1,0,0,0,0.3420201,-0.9396926,0,0.9396926,0.3420201,0.9998637,0.01530909,0.006182005,-0.0005731673,0.4063968,-0.9136965,-0.01650021,0.9135684,0.4063502,0.998369,0.05070307,0.02623844,-0.007314602,0.5694157,-0.8220172,-0.05661938,0.8204846,0.5688579,0.994286,0.08726108,0.06148823,-0.02793499,0.7686299,-0.6390835,-0.1030288,0.6337141,0.7666756,0.9891054,0.1056615,0.1024996,-0.06017974,0.9256743,-0.3735044,-0.1343463,0.3632668,0.9219481,0.9869455,0.0975766,0.1281305,-0.08703014,0.9925308,-0.08548915,-0.1355152,0.07322191,0.9880659,0.9907124,0.06879497,0.1172868,-0.08668432,0.9841065,0.1549846,-0.1047606,-0.1637121,0.9809299,0.9981252,0.02685711,0.05499827,-0.0424958,0.9507813,0.3069348,-0.04404794,-0.3086966,0.9501401,0.9967362,-0.03391975,-0.0732553,0.05723623,0.9368655,0.3449741,0.05692893,-0.348041,0.9357492,0.9546708,-0.1350528,-0.2652627,0.2030747,0.9470569,0.2486845,0.2176334,-0.29128,0.9315534,0.8280962,-0.2984868,-0.4745127,0.3438076,0.9389938,0.009332723,0.4427787,-0.1708694,0.8801992,0.6034845,-0.5142712,-0.6093699,0.3967293,0.8565686,-0.3299942,0.6916736,-0.04260846,0.7209523,0.3452672,-0.7195484,-0.6025286,0.3200916,0.6937994,-0.6451231,0.8822312,0.02987549,0.4698675,0.1448145,-0.8559505,-0.4963642,0.1736775,0.515853,-0.8388873,0.974097,0.0352758,0.2233623,0.0341197,-0.921358,-0.3872147,0.04873981,0.3885133,-0.9201532,0.9982286,0.01252258,0.05816277,5.551115e-17,-0.9396926,-0.3420201,-5.551115e-17,0.3420201,-0.9396926,1,5.551115e-17,0,5.551115e-17,-0.9396926,-0.3420201,-5.551115e-17,0.3420201,-0.9396926,1,5.551115e-17,0];
   var propvals = userMatrixrgl.userMatrix[19].getAsArray();
   var svals = [-Infinity, 0,0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1,1.1,1.2,1.3,1.4,1.5, Infinity];
   for (var i = 1; i < svals.length; i++) 
     if (value <= svals[i]) {
       var p = (svals[i] - value)/(svals[i] - svals[i-1]);
       var v1 = values[9*(i-1)];
       var v2 = values[9*i];
       propvals[0] = p*v1 + (1-p)*v2;
       var v1 = values[9*(i-1)+1];
       var v2 = values[9*i+1];
       propvals[1] = p*v1 + (1-p)*v2;
       var v1 = values[9*(i-1)+2];
       var v2 = values[9*i+2];
       propvals[2] = p*v1 + (1-p)*v2;
       var v1 = values[9*(i-1)+3];
       var v2 = values[9*i+3];
       propvals[4] = p*v1 + (1-p)*v2;
       var v1 = values[9*(i-1)+4];
       var v2 = values[9*i+4];
       propvals[5] = p*v1 + (1-p)*v2;
       var v1 = values[9*(i-1)+5];
       var v2 = values[9*i+5];
       propvals[6] = p*v1 + (1-p)*v2;
       var v1 = values[9*(i-1)+6];
       var v2 = values[9*i+6];
       propvals[8] = p*v1 + (1-p)*v2;
       var v1 = values[9*(i-1)+7];
       var v2 = values[9*i+7];
       propvals[9] = p*v1 + (1-p)*v2;
       var v1 = values[9*(i-1)+8];
       var v2 = values[9*i+8];
       propvals[10] = p*v1 + (1-p)*v2;
       break;
     }
   userMatrixrgl.userMatrix[19].load(propvals);
})(value);
   userMatrixrgl.drawScene();
   var lvalue = Math.round((value - 0)/0.01);
   var labels = ['0','0.01','0.02','0.03','0.04','0.05','0.0600000000000001','0.07','0.08','0.09','0.1','0.11','0.12','0.13','0.14','0.15','0.16','0.17','0.18','0.19','0.2','0.21','0.22','0.23','0.24','0.25','0.26','0.27','0.28','0.29','0.3','0.31','0.32','0.33','0.34','0.35','0.36','0.37','0.38','0.39','0.4','0.41','0.42','0.43','0.44','0.45','0.46','0.47','0.48','0.49','0.5','0.51','0.52','0.53','0.54','0.55','0.56','0.57','0.58','0.59','0.6','0.61','0.62','0.63','0.64','0.65','0.66','0.67','0.68','0.69','0.7','0.71','0.72','0.73','0.74','0.75','0.76','0.77','0.78','0.79','0.8','0.81','0.82','0.83','0.84','0.85','0.86','0.87','0.88','0.89','0.9','0.91','0.92','0.93','0.94','0.95','0.96','0.97','0.98','0.99','1','1.01','1.02','1.03','1.04','1.05','1.06','1.07','1.08','1.09','1.1','1.11','1.12','1.13','1.14','1.15','1.16','1.17','1.18','1.19','1.2','1.21','1.22','1.23','1.24','1.25','1.26','1.27','1.28','1.29','1.3','1.31','1.32','1.33','1.34','1.35','1.36','1.37','1.38','1.39','1.4','1.41','1.42','1.43','1.44','1.45','1.46','1.47','1.48','1.49','1.5']; 
  label = document.getElementById('input886210de6e16text');
  if (label !== null) label.value = labels[lvalue];
}
userMatrixrgl.input886210de6e16(0);</script>
<input type="range" min="0" max="1.5" step="0.01" value="0" id="input886210de6e16" name="input886210de6e16" oninput="userMatrixrgl.input886210de6e16(this.valueAsNumber)">
<output id="input886210de6e16text" for="input886210de6e16">
0
</output>
<p>Some things to note: The generated Javascript slider has 150 increments, so that motion appears smooth. However, storing 150 <code>userMatrix</code> values would take up a lot of space, so we use interpolation in the Javascript code. However, the Javascript code can only do linear interpolation, not the more complex spline-based SO(3) interpolation done by <a href="#par3dinterp"><code>par3dinterp</code></a>. Because of this, we need to output 15 steps from <a href="#par3dinterpSetter"><code>par3dinterpSetter</code></a> so that the distortions of linear interpolation are not visible.</p>
<p>Another function that auto-generates Javascript code is <a name="clipplaneSlider"><a href="../../rgl/help/clipplaneSlider"><code>clipplaneSlider</code></a></a>. This function allows the user to control the location of a clipping plane by moving a slider. Both it and <a href="#par3dinterpSetter"><code>par3dinterpSetter</code></a> are implemented using the more general <a name="propertySlider"><a href="../../rgl/help/propertySlider"><code>propertySlider</code></a></a>, which allows control of multiple objects in multiple scenes, but which does require knowledge of the internal representation of the scene in its Javascript implementation.</p>
<p>The final function of this type is <a name="ageSetter"><a href="../../rgl/help/ageSetter"><code>ageSetter</code></a></a>. It is used when the slider controls the age of the scene, and attributes of vertices change with their age. For example, to show a point moving along a curve, we could do the following.<br />Note that we need to specify multiple colours in the plot so that the colour is not fixed, and can be controlled by the slider. We also give two <code>ageSetter</code> calls in a list; the <code>propertySlider</code> will control both of them simultaneously.</p>
<pre class="sourceCode r"><code class="sourceCode r">time &lt;-<span class="st"> </span><span class="dv">0</span>:<span class="dv">500</span>
xyz &lt;-<span class="st"> </span><span class="kw">cbind</span>(<span class="kw">cos</span>(time/<span class="dv">20</span>), <span class="kw">sin</span>(time/<span class="dv">10</span>), time)
lineid &lt;-<span class="st"> </span><span class="kw">plot3d</span>(xyz, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>, <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&quot;black&quot;</span>, <span class="st">&quot;black&quot;</span>))[<span class="st">&quot;data&quot;</span>]
sphereid &lt;-<span class="st"> </span><span class="kw">spheres3d</span>(xyz[<span class="dv">1</span>, , <span class="dt">drop=</span><span class="ot">FALSE</span>], <span class="dt">radius =</span> <span class="dv">8</span>, <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>)</code></pre>
<canvas id="curvetextureCanvas" style="display: none;" width="256" height="256">
Your browser does not support the HTML5 canvas element.
</canvas>
<!-- ****** linestrip object 59 ****** -->
<script id="curvevshader59" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="curvefshader59" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<!-- ****** text object 61 ****** -->
<script id="curvevshader61" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="curvefshader61" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** text object 62 ****** -->
<script id="curvevshader62" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="curvefshader62" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** text object 63 ****** -->
<script id="curvevshader63" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="curvefshader63" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** spheres object 64 ****** -->
<script id="curvevshader64" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec3 aNorm;
uniform mat4 normMatrix;
varying vec3 vNormal;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
vNormal = normalize((normMatrix * vec4(aNorm, 1.)).xyz);
}
</script>
<script id="curvefshader64" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec3 vNormal;
void main(void) {
vec3 eye = normalize(-vPosition.xyz);
const vec3 emission = vec3(0., 0., 0.);
const vec3 ambient1 = vec3(0., 0., 0.);
const vec3 specular1 = vec3(1., 1., 1.);// light*material
const float shininess1 = 50.;
vec4 colDiff1 = vec4(vCol.rgb * vec3(1., 1., 1.), vCol.a);
const vec3 lightDir1 = vec3(0., 0., 1.);
vec3 halfVec1 = normalize(lightDir1 + eye);
vec4 lighteffect = vec4(emission, 0.);
vec3 n = normalize(vNormal);
n = -faceforward(n, n, eye);
vec3 col1 = ambient1;
float nDotL1 = dot(n, lightDir1);
col1 = col1 + max(nDotL1, 0.) * colDiff1.rgb;
col1 = col1 + pow(max(dot(halfVec1, n), 0.), shininess1) * specular1;
lighteffect = lighteffect + vec4(col1, colDiff1.a);
gl_FragColor = lighteffect;
}
</script>
<!-- ****** lines object 65 ****** -->
<script id="curvevshader65" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="curvefshader65" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<!-- ****** text object 66 ****** -->
<script id="curvevshader66" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="curvefshader66" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** lines object 67 ****** -->
<script id="curvevshader67" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="curvefshader67" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<!-- ****** text object 68 ****** -->
<script id="curvevshader68" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="curvefshader68" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** lines object 69 ****** -->
<script id="curvevshader69" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="curvefshader69" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<!-- ****** text object 70 ****** -->
<script id="curvevshader70" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
uniform vec2 textScale;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs*textScale, 0.,0.);
}
</script>
<script id="curvefshader70" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** lines object 71 ****** -->
<script id="curvevshader71" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="curvefshader71" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<script type="text/javascript">
var curvergl = new rglClass();
curvergl.start = function() {
var debug = function(msg) {
document.getElementById("curvedebug").innerHTML = msg;
}
debug("");
var canvas = document.getElementById("curvecanvas");
if (!window.WebGLRenderingContext){
debug(" Your browser does not support WebGL. See <a href=\"http://get.webgl.org\">http://get.webgl.org</a>");
return;
}
try {
// Try to grab the standard context. If it fails, fallback to experimental.
this.gl = canvas.getContext("webgl") 
|| canvas.getContext("experimental-webgl");
}
catch(e) {}
if ( !this.gl ) {
debug(" Your browser appears to support WebGL, but did not create a WebGL context.  See <a href=\"http://get.webgl.org\">http://get.webgl.org</a>");
return;
}
var gl = this.gl;
var width = 481;  var height = 481;
canvas.width = width;   canvas.height = height;
var normMatrix = new CanvasMatrix4();
var saveMat = new Object();
var distance;
var posLoc = 0;
var colLoc = 1;
var activeSubscene = 53;
this.flags[53] = 1195;
this.zoom[53] = 1;
this.FOV[53] = 30;
this.viewport[53] = [0, 0, 480, 480];
this.userMatrix[53] = new CanvasMatrix4();
this.userMatrix[53].load([
1, 0, 0, 0,
0, 0.3420201, -0.9396926, 0,
0, 0.9396926, 0.3420201, 0,
0, 0, 0, 1
]);
this.clipplanes[53] = [];
this.opaque[53] = [59,61,62,63,64,65,66,67,68,69,70,71];
this.transparent[53] = [];
this.subscenes[53] = [];
function getPowerOfTwo(value) {
var pow = 1;
while(pow<value) {
pow *= 2;
}
return pow;
}
function handleLoadedTexture(texture, textureCanvas) {
gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);
gl.bindTexture(gl.TEXTURE_2D, texture);
gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, textureCanvas);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);
gl.generateMipmap(gl.TEXTURE_2D);
gl.bindTexture(gl.TEXTURE_2D, null);
}
function loadImageToTexture(filename, texture) {   
var canvas = document.getElementById("curvetextureCanvas");
var ctx = canvas.getContext("2d");
var image = new Image();
image.onload = function() {
var w = image.width;
var h = image.height;
var canvasX = getPowerOfTwo(w);
var canvasY = getPowerOfTwo(h);
canvas.width = canvasX;
canvas.height = canvasY;
ctx.imageSmoothingEnabled = true;
ctx.drawImage(image, 0, 0, canvasX, canvasY);
handleLoadedTexture(texture, canvas);
curvergl.drawScene();
}
image.src = filename;
}      
function drawTextToCanvas(text, cex) {
var canvasX, canvasY;
var textX, textY;
var textHeight = 20 * cex;
var textColour = "white";
var fontFamily = "Arial";
var backgroundColour = "rgba(0,0,0,0)";
var canvas = document.getElementById("curvetextureCanvas");
var ctx = canvas.getContext("2d");
ctx.font = textHeight+"px "+fontFamily;
canvasX = 1;
var widths = [];
for (var i = 0; i < text.length; i++)  {
widths[i] = ctx.measureText(text[i]).width;
canvasX = (widths[i] > canvasX) ? widths[i] : canvasX;
}     
canvasX = getPowerOfTwo(canvasX);
var offset = 2*textHeight; // offset to first baseline
var skip = 2*textHeight;   // skip between baselines      
canvasY = getPowerOfTwo(offset + text.length*skip);
canvas.width = canvasX;
canvas.height = canvasY;
ctx.fillStyle = backgroundColour;
ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
ctx.fillStyle = textColour;
ctx.textAlign = "left";
ctx.textBaseline = "alphabetic";
ctx.font = textHeight+"px "+fontFamily;
for(var i = 0; i < text.length; i++) {
textY = i*skip + offset;
ctx.fillText(text[i], 0,  textY);
}
return {canvasX:canvasX, canvasY:canvasY,
widths:widths, textHeight:textHeight,
offset:offset, skip:skip};
}
// ****** sphere object ******
var sphereBuf = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, sphereBuf);
gl.bufferData(gl.ARRAY_BUFFER, plot3drgl.sphereverts, gl.STATIC_DRAW);
var sphereIbuf = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sphereIbuf);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, plot3drgl.spherefaces, gl.STATIC_DRAW);
// ****** linestrip object 59 ******
this.flags[59] = 128;
this.prog[59]  = gl.createProgram();
gl.attachShader(this.prog[59], this.getShader( gl, "curvevshader59" ));
gl.attachShader(this.prog[59], this.getShader( gl, "curvefshader59" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[59], 0, "aPos");
gl.bindAttribLocation(this.prog[59], 1, "aCol");
gl.linkProgram(this.prog[59]);
this.offsets[59]={vofs:0, cofs:3, nofs:-1, radofs:-1, oofs:-1, tofs:-1, stride:7};
var v=new Float32Array([
1, 0, 0, 0, 0, 0, 1,
0.9987503, 0.09983341, 1, 0, 0, 0, 1,
0.9950042, 0.1986693, 2, 0, 0, 0, 1,
0.9887711, 0.2955202, 3, 0, 0, 0, 1,
0.9800666, 0.3894183, 4, 0, 0, 0, 1,
0.9689124, 0.4794255, 5, 0, 0, 0, 1,
0.9553365, 0.5646425, 6, 0, 0, 0, 1,
0.9393727, 0.6442177, 7, 0, 0, 0, 1,
0.921061, 0.7173561, 8, 0, 0, 0, 1,
0.9004471, 0.7833269, 9, 0, 0, 0, 1,
0.8775826, 0.841471, 10, 0, 0, 0, 1,
0.8525245, 0.8912073, 11, 0, 0, 0, 1,
0.8253356, 0.9320391, 12, 0, 0, 0, 1,
0.7960838, 0.9635582, 13, 0, 0, 0, 1,
0.7648422, 0.9854497, 14, 0, 0, 0, 1,
0.7316889, 0.997495, 15, 0, 0, 0, 1,
0.6967067, 0.9995736, 16, 0, 0, 0, 1,
0.6599832, 0.9916648, 17, 0, 0, 0, 1,
0.62161, 0.9738476, 18, 0, 0, 0, 1,
0.5816831, 0.9463001, 19, 0, 0, 0, 1,
0.5403023, 0.9092974, 20, 0, 0, 0, 1,
0.4975711, 0.8632094, 21, 0, 0, 0, 1,
0.4535961, 0.8084964, 22, 0, 0, 0, 1,
0.4084874, 0.7457052, 23, 0, 0, 0, 1,
0.3623578, 0.6754632, 24, 0, 0, 0, 1,
0.3153224, 0.5984721, 25, 0, 0, 0, 1,
0.2674988, 0.5155014, 26, 0, 0, 0, 1,
0.2190067, 0.4273799, 27, 0, 0, 0, 1,
0.1699671, 0.3349881, 28, 0, 0, 0, 1,
0.1205028, 0.2392493, 29, 0, 0, 0, 1,
0.0707372, 0.14112, 30, 0, 0, 0, 1,
0.02079483, 0.04158066, 31, 0, 0, 0, 1,
-0.02919952, -0.05837414, 32, 0, 0, 0, 1,
-0.07912089, -0.1577457, 33, 0, 0, 0, 1,
-0.1288445, -0.2555411, 34, 0, 0, 0, 1,
-0.1782461, -0.3507832, 35, 0, 0, 0, 1,
-0.2272021, -0.4425204, 36, 0, 0, 0, 1,
-0.2755902, -0.5298361, 37, 0, 0, 0, 1,
-0.3232896, -0.6118579, 38, 0, 0, 0, 1,
-0.3701808, -0.6877661, 39, 0, 0, 0, 1,
-0.4161468, -0.7568025, 40, 0, 0, 0, 1,
-0.4610727, -0.8182771, 41, 0, 0, 0, 1,
-0.5048461, -0.8715758, 42, 0, 0, 0, 1,
-0.5473577, -0.9161659, 43, 0, 0, 0, 1,
-0.5885011, -0.9516021, 44, 0, 0, 0, 1,
-0.6281736, -0.9775301, 45, 0, 0, 0, 1,
-0.666276, -0.993691, 46, 0, 0, 0, 1,
-0.7027131, -0.9999232, 47, 0, 0, 0, 1,
-0.7373937, -0.9961646, 48, 0, 0, 0, 1,
-0.7702312, -0.9824526, 49, 0, 0, 0, 1,
-0.8011436, -0.9589243, 50, 0, 0, 0, 1,
-0.8300535, -0.9258147, 51, 0, 0, 0, 1,
-0.8568888, -0.8834547, 52, 0, 0, 0, 1,
-0.8815822, -0.8322675, 53, 0, 0, 0, 1,
-0.9040722, -0.7727645, 54, 0, 0, 0, 1,
-0.9243024, -0.7055403, 55, 0, 0, 0, 1,
-0.9422224, -0.6312667, 56, 0, 0, 0, 1,
-0.9577872, -0.5506855, 57, 0, 0, 0, 1,
-0.9709582, -0.4646022, 58, 0, 0, 0, 1,
-0.9817022, -0.3738767, 59, 0, 0, 0, 1,
-0.9899925, -0.2794155, 60, 0, 0, 0, 1,
-0.9958083, -0.1821625, 61, 0, 0, 0, 1,
-0.9991351, -0.0830894, 62, 0, 0, 0, 1,
-0.9999647, 0.0168139, 63, 0, 0, 0, 1,
-0.9982948, 0.1165492, 64, 0, 0, 0, 1,
-0.9941297, 0.21512, 65, 0, 0, 0, 1,
-0.9874797, 0.3115413, 66, 0, 0, 0, 1,
-0.9783617, 0.4048499, 67, 0, 0, 0, 1,
-0.9667982, 0.4941134, 68, 0, 0, 0, 1,
-0.9528182, 0.5784398, 69, 0, 0, 0, 1,
-0.9364567, 0.6569866, 70, 0, 0, 0, 1,
-0.9177545, 0.728969, 71, 0, 0, 0, 1,
-0.8967584, 0.7936679, 72, 0, 0, 0, 1,
-0.8735209, 0.8504366, 73, 0, 0, 0, 1,
-0.8481, 0.8987081, 74, 0, 0, 0, 1,
-0.8205594, 0.938, 75, 0, 0, 0, 1,
-0.7909677, 0.9679196, 76, 0, 0, 0, 1,
-0.7593991, 0.9881682, 77, 0, 0, 0, 1,
-0.7259323, 0.9985433, 78, 0, 0, 0, 1,
-0.6906511, 0.9989414, 79, 0, 0, 0, 1,
-0.6536436, 0.9893582, 80, 0, 0, 0, 1,
-0.6150024, 0.9698898, 81, 0, 0, 0, 1,
-0.574824, 0.9407306, 82, 0, 0, 0, 1,
-0.5332087, 0.9021719, 83, 0, 0, 0, 1,
-0.4902608, 0.8545989, 84, 0, 0, 0, 1,
-0.4460875, 0.7984871, 85, 0, 0, 0, 1,
-0.4007992, 0.7343971, 86, 0, 0, 0, 1,
-0.3545091, 0.6629692, 87, 0, 0, 0, 1,
-0.3073329, 0.5849172, 88, 0, 0, 0, 1,
-0.2593885, 0.5010208, 89, 0, 0, 0, 1,
-0.2107958, 0.4121185, 90, 0, 0, 0, 1,
-0.1616762, 0.3190984, 91, 0, 0, 0, 1,
-0.1121525, 0.2228899, 92, 0, 0, 0, 1,
-0.06234851, 0.1244544, 93, 0, 0, 0, 1,
-0.01238866, 0.02477542, 94, 0, 0, 0, 1,
0.03760215, -0.07515112, 95, 0, 0, 0, 1,
0.08749899, -0.1743268, 96, 0, 0, 0, 1,
0.1371771, -0.2717606, 97, 0, 0, 0, 1,
0.1865124, -0.3664791, 98, 0, 0, 0, 1,
0.2353814, -0.4575359, 99, 0, 0, 0, 1,
0.2836622, -0.5440211, 100, 0, 0, 0, 1,
0.3312339, -0.6250706, 101, 0, 0, 0, 1,
0.3779777, -0.6998747, 102, 0, 0, 0, 1,
0.4237768, -0.7676858, 103, 0, 0, 0, 1,
0.4685167, -0.8278264, 104, 0, 0, 0, 1,
0.5120855, -0.8796958, 105, 0, 0, 0, 1,
0.5543743, -0.9227754, 106, 0, 0, 0, 1,
0.5952775, -0.956635, 107, 0, 0, 0, 1,
0.6346928, -0.9809362, 108, 0, 0, 0, 1,
0.6725218, -0.9954363, 109, 0, 0, 0, 1,
0.7086698, -0.9999902, 110, 0, 0, 0, 1,
0.7430465, -0.9945526, 111, 0, 0, 0, 1,
0.7755659, -0.9791777, 112, 0, 0, 0, 1,
0.8061468, -0.9540192, 113, 0, 0, 0, 1,
0.8347128, -0.9193285, 114, 0, 0, 0, 1,
0.8611924, -0.8754522, 115, 0, 0, 0, 1,
0.8855195, -0.8228286, 116, 0, 0, 0, 1,
0.9076333, -0.7619836, 117, 0, 0, 0, 1,
0.9274784, -0.6935251, 118, 0, 0, 0, 1,
0.9450054, -0.6181371, 119, 0, 0, 0, 1,
0.9601703, -0.5365729, 120, 0, 0, 0, 1,
0.9729353, -0.4496475, 121, 0, 0, 0, 1,
0.9832684, -0.3582293, 122, 0, 0, 0, 1,
0.9911439, -0.2632318, 123, 0, 0, 0, 1,
0.9965421, -0.1656042, 124, 0, 0, 0, 1,
0.9994494, -0.06632189, 125, 0, 0, 0, 1,
0.9998586, 0.03362305, 126, 0, 0, 0, 1,
0.9977687, 0.133232, 127, 0, 0, 0, 1,
0.9931849, 0.2315098, 128, 0, 0, 0, 1,
0.9861187, 0.3274744, 129, 0, 0, 0, 1,
0.9765877, 0.420167, 130, 0, 0, 0, 1,
0.9646156, 0.5086614, 131, 0, 0, 0, 1,
0.9502326, 0.5920735, 132, 0, 0, 0, 1,
0.9334745, 0.6695698, 133, 0, 0, 0, 1,
0.9143832, 0.7403759, 134, 0, 0, 0, 1,
0.8930063, 0.8037844, 135, 0, 0, 0, 1,
0.8693975, 0.8591618, 136, 0, 0, 0, 1,
0.8436156, 0.9059547, 137, 0, 0, 0, 1,
0.8157251, 0.9436957, 138, 0, 0, 0, 1,
0.7857957, 0.9720075, 139, 0, 0, 0, 1,
0.7539023, 0.9906074, 140, 0, 0, 0, 1,
0.7201244, 0.9993094, 141, 0, 0, 0, 1,
0.6845466, 0.9980267, 142, 0, 0, 0, 1,
0.6472579, 0.9867719, 143, 0, 0, 0, 1,
0.6083513, 0.9656578, 144, 0, 0, 0, 1,
0.5679242, 0.934895, 145, 0, 0, 0, 1,
0.5260775, 0.8947912, 146, 0, 0, 0, 1,
0.4829159, 0.8457468, 147, 0, 0, 0, 1,
0.4385473, 0.7882521, 148, 0, 0, 0, 1,
0.3930826, 0.7228814, 149, 0, 0, 0, 1,
0.3466353, 0.6502879, 150, 0, 0, 0, 1,
0.2993217, 0.5711969, 151, 0, 0, 0, 1,
0.2512598, 0.4863987, 152, 0, 0, 0, 1,
0.20257, 0.3967406, 153, 0, 0, 0, 1,
0.1533739, 0.3031183, 154, 0, 0, 0, 1,
0.1037944, 0.2064675, 155, 0, 0, 0, 1,
0.05395542, 0.1077536, 156, 0, 0, 0, 1,
0.003981623, 0.007963183, 157, 0, 0, 0, 1,
-0.04600213, -0.09190685, 158, 0, 0, 0, 1,
-0.09587089, -0.1908586, 159, 0, 0, 0, 1,
-0.1455, -0.2879033, 160, 0, 0, 0, 1,
-0.1947655, -0.3820714, 161, 0, 0, 0, 1,
-0.2435441, -0.472422, 162, 0, 0, 0, 1,
-0.2917141, -0.5580522, 163, 0, 0, 0, 1,
-0.3391549, -0.6381067, 164, 0, 0, 0, 1,
-0.3857479, -0.7117853, 165, 0, 0, 0, 1,
-0.4313768, -0.7783521, 166, 0, 0, 0, 1,
-0.4759275, -0.8371418, 167, 0, 0, 0, 1,
-0.5192887, -0.887567, 168, 0, 0, 0, 1,
-0.5613518, -0.929124, 169, 0, 0, 0, 1,
-0.6020119, -0.9613975, 170, 0, 0, 0, 1,
-0.6411673, -0.984065, 171, 0, 0, 0, 1,
-0.6787201, -0.9969001, 172, 0, 0, 0, 1,
-0.7145764, -0.9997745, 173, 0, 0, 0, 1,
-0.7486466, -0.9926594, 174, 0, 0, 0, 1,
-0.7808457, -0.975626, 175, 0, 0, 0, 1,
-0.811093, -0.9488445, 176, 0, 0, 0, 1,
-0.839313, -0.9125825, 177, 0, 0, 0, 1,
-0.8654352, -0.8672022, 178, 0, 0, 0, 1,
-0.8893942, -0.8131571, 179, 0, 0, 0, 1,
-0.9111302, -0.7509872, 180, 0, 0, 0, 1,
-0.9305889, -0.6813138, 181, 0, 0, 0, 1,
-0.9477216, -0.6048328, 182, 0, 0, 0, 1,
-0.9624855, -0.5223086, 183, 0, 0, 0, 1,
-0.9748436, -0.4345656, 184, 0, 0, 0, 1,
-0.9847652, -0.3424806, 185, 0, 0, 0, 1,
-0.9922253, -0.2469737, 186, 0, 0, 0, 1,
-0.9972054, -0.148999, 187, 0, 0, 0, 1,
-0.999693, -0.04953564, 188, 0, 0, 0, 1,
-0.9996819, 0.05042269, 189, 0, 0, 0, 1,
-0.9971722, 0.1498772, 190, 0, 0, 0, 1,
-0.99217, 0.2478342, 191, 0, 0, 0, 1,
-0.9846879, 0.3433149, 192, 0, 0, 0, 1,
-0.9747446, 0.4353653, 193, 0, 0, 0, 1,
-0.9623649, 0.5230657, 194, 0, 0, 0, 1,
-0.9475798, 0.6055399, 195, 0, 0, 0, 1,
-0.9304263, 0.6819636, 196, 0, 0, 0, 1,
-0.9109471, 0.7515734, 197, 0, 0, 0, 1,
-0.8891912, 0.8136737, 198, 0, 0, 0, 1,
-0.8652126, 0.8676441, 199, 0, 0, 0, 1,
-0.8390715, 0.9129453, 200, 0, 0, 0, 1,
-0.8108332, 0.9491246, 201, 0, 0, 0, 1,
-0.7805682, 0.9758205, 202, 0, 0, 0, 1,
-0.7483522, 0.9927664, 203, 0, 0, 0, 1,
-0.7142656, 0.9997929, 204, 0, 0, 0, 1,
-0.6783938, 0.9968298, 205, 0, 0, 0, 1,
-0.6408264, 0.9839067, 206, 0, 0, 0, 1,
-0.6016573, 0.9611527, 207, 0, 0, 0, 1,
-0.5609843, 0.9287952, 208, 0, 0, 0, 1,
-0.5189091, 0.8871575, 209, 0, 0, 0, 1,
-0.4755369, 0.8366556, 210, 0, 0, 0, 1,
-0.4309762, 0.7777942, 211, 0, 0, 0, 1,
-0.3853382, 0.7111612, 212, 0, 0, 0, 1,
-0.3387371, 0.6374226, 213, 0, 0, 0, 1,
-0.2912893, 0.5573151, 214, 0, 0, 0, 1,
-0.2431134, 0.471639, 215, 0, 0, 0, 1,
-0.1943299, 0.3812505, 216, 0, 0, 0, 1,
-0.1450607, 0.2870527, 217, 0, 0, 0, 1,
-0.09542885, 0.1899867, 218, 0, 0, 0, 1,
-0.04555851, 0.09102242, 219, 0, 0, 0, 1,
0.004425698, -0.008851309, 220, 0, 0, 0, 1,
0.05439885, -0.1086366, 221, 0, 0, 0, 1,
0.104236, -0.2073364, 222, 0, 0, 0, 1,
0.1538127, -0.3039646, 223, 0, 0, 0, 1,
0.2030049, -0.3975557, 224, 0, 0, 0, 1,
0.2516896, -0.4871745, 225, 0, 0, 0, 1,
0.2997454, -0.5719256, 226, 0, 0, 0, 1,
0.3470518, -0.6509623, 227, 0, 0, 0, 1,
0.3934909, -0.7234948, 228, 0, 0, 0, 1,
0.4389464, -0.7887983, 229, 0, 0, 0, 1,
0.4833048, -0.8462204, 230, 0, 0, 0, 1,
0.5264551, -0.8951874, 231, 0, 0, 0, 1,
0.5682896, -0.9352099, 232, 0, 0, 0, 1,
0.6087037, -0.9658881, 233, 0, 0, 0, 1,
0.6475964, -0.9869155, 234, 0, 0, 0, 1,
0.6848703, -0.998082, 235, 0, 0, 0, 1,
0.7204325, -0.999276, 236, 0, 0, 0, 1,
0.754194, -0.9904855, 237, 0, 0, 0, 1,
0.7860703, -0.9717984, 238, 0, 0, 0, 1,
0.8159819, -0.9434015, 239, 0, 0, 0, 1,
0.843854, -0.9055784, 240, 0, 0, 0, 1,
0.8696168, -0.858707, 241, 0, 0, 0, 1,
0.8932061, -0.8032557, 242, 0, 0, 0, 1,
0.9145628, -0.7397786, 243, 0, 0, 0, 1,
0.9336336, -0.6689098, 244, 0, 0, 0, 1,
0.9503708, -0.5913575, 245, 0, 0, 0, 1,
0.9647326, -0.5078966, 246, 0, 0, 0, 1,
0.9766831, -0.4193609, 247, 0, 0, 0, 1,
0.9861923, -0.3266351, 248, 0, 0, 0, 1,
0.9932366, -0.2306457, 249, 0, 0, 0, 1,
0.9977983, -0.1323518, 250, 0, 0, 0, 1,
0.999866, -0.03273538, 251, 0, 0, 0, 1,
0.9994346, 0.06720807, 252, 0, 0, 0, 1,
0.9965051, 0.16648, 253, 0, 0, 0, 1,
0.9910849, 0.2640885, 254, 0, 0, 0, 1,
0.9831874, 0.3590584, 255, 0, 0, 0, 1,
0.9728326, 0.4504406, 256, 0, 0, 0, 1,
0.9600461, 0.5373222, 257, 0, 0, 0, 1,
0.94486, 0.618835, 258, 0, 0, 0, 1,
0.9273123, 0.6941647, 259, 0, 0, 0, 1,
0.9074468, 0.7625585, 260, 0, 0, 0, 1,
0.8853131, 0.823333, 261, 0, 0, 0, 1,
0.8609666, 0.8758811, 262, 0, 0, 0, 1,
0.8344681, 0.9196776, 263, 0, 0, 0, 1,
0.8058839, 0.9542851, 264, 0, 0, 0, 1,
0.7752855, 0.9793577, 265, 0, 0, 0, 1,
0.7427492, 0.9946448, 266, 0, 0, 0, 1,
0.7083564, 0.9999937, 267, 0, 0, 0, 1,
0.6721931, 0.9953511, 268, 0, 0, 0, 1,
0.6343496, 0.9807633, 269, 0, 0, 0, 1,
0.5949206, 0.956376, 270, 0, 0, 0, 1,
0.5540047, 0.9224328, 271, 0, 0, 0, 1,
0.511704, 0.8792731, 272, 0, 0, 0, 1,
0.4681243, 0.8273279, 273, 0, 0, 0, 1,
0.4233745, 0.7671164, 274, 0, 0, 0, 1,
0.3775666, 0.69924, 275, 0, 0, 0, 1,
0.3308149, 0.6243771, 276, 0, 0, 0, 1,
0.2832363, 0.5432757, 277, 0, 0, 0, 1,
0.2349498, 0.456746, 278, 0, 0, 0, 1,
0.1860761, 0.3656526, 279, 0, 0, 0, 1,
0.1367372, 0.2709058, 280, 0, 0, 0, 1,
0.0870566, 0.1734522, 281, 0, 0, 0, 1,
0.03715838, 0.07426544, 282, 0, 0, 0, 1,
-0.01283271, -0.0256633, 283, 0, 0, 0, 1,
-0.06279172, -0.1253356, 284, 0, 0, 0, 1,
-0.1125938, -0.2237556, 285, 0, 0, 0, 1,
-0.1621144, -0.31994, 286, 0, 0, 0, 1,
-0.2112299, -0.4129275, 287, 0, 0, 0, 1,
-0.2598174, -0.5017893, 288, 0, 0, 0, 1,
-0.3077554, -0.5856373, 289, 0, 0, 0, 1,
-0.3549243, -0.6636339, 290, 0, 0, 0, 1,
-0.401206, -0.7349996, 291, 0, 0, 0, 1,
-0.4464849, -0.7990215, 292, 0, 0, 0, 1,
-0.4906478, -0.8550598, 293, 0, 0, 0, 1,
-0.5335844, -0.9025546, 294, 0, 0, 0, 1,
-0.5751873, -0.9410314, 295, 0, 0, 0, 1,
-0.6153525, -0.9701057, 296, 0, 0, 0, 1,
-0.6539797, -0.9894871, 297, 0, 0, 0, 1,
-0.6909722, -0.9989818, 298, 0, 0, 0, 1,
-0.7262377, -0.998495, 299, 0, 0, 0, 1,
-0.7596879, -0.9880316, 300, 0, 0, 0, 1,
-0.7912393, -0.9676961, 301, 0, 0, 0, 1,
-0.8208131, -0.9376917, 302, 0, 0, 0, 1,
-0.8483353, -0.8983182, 303, 0, 0, 0, 1,
-0.873737, -0.849969, 304, 0, 0, 0, 1,
-0.8969548, -0.7931272, 305, 0, 0, 0, 1,
-0.9179308, -0.7283608, 306, 0, 0, 0, 1,
-0.9366124, -0.6563168, 307, 0, 0, 0, 1,
-0.9529529, -0.577715, 308, 0, 0, 0, 1,
-0.9669116, -0.493341, 309, 0, 0, 0, 1,
-0.9784535, -0.4040377, 310, 0, 0, 0, 1,
-0.9875497, -0.3106973, 311, 0, 0, 0, 1,
-0.9941776, -0.2142525, 312, 0, 0, 0, 1,
-0.9983206, -0.1156671, 313, 0, 0, 0, 1,
-0.9999683, -0.01592586, 314, 0, 0, 0, 1,
-0.9991166, 0.08397446, 315, 0, 0, 0, 1,
-0.9957676, 0.1830357, 316, 0, 0, 0, 1,
-0.9899297, 0.2802682, 317, 0, 0, 0, 1,
-0.9816176, 0.3747003, 318, 0, 0, 0, 1,
-0.9708518, 0.4653885, 319, 0, 0, 0, 1,
-0.9576595, 0.5514267, 320, 0, 0, 0, 1,
-0.9420735, 0.6319552, 321, 0, 0, 0, 1,
-0.9241328, 0.7061695, 322, 0, 0, 0, 1,
-0.9038823, 0.7733279, 323, 0, 0, 0, 1,
-0.8813725, 0.8327595, 324, 0, 0, 0, 1,
-0.8566598, 0.8838704, 325, 0, 0, 0, 1,
-0.8298058, 0.92615, 326, 0, 0, 0, 1,
-0.8008777, 0.9591758, 327, 0, 0, 0, 1,
-0.7699479, 0.9826179, 328, 0, 0, 0, 1,
-0.7370937, 0.9962419, 329, 0, 0, 0, 1,
-0.702397, 0.9999118, 330, 0, 0, 0, 1,
-0.6659448, 0.993591, 331, 0, 0, 0, 1,
-0.6278281, 0.9773425, 332, 0, 0, 0, 1,
-0.588142, 0.9513288, 333, 0, 0, 0, 1,
-0.546986, 0.9158096, 334, 0, 0, 0, 1,
-0.5044627, 0.87114, 335, 0, 0, 0, 1,
-0.4606786, 0.8177662, 336, 0, 0, 0, 1,
-0.415743, 0.7562217, 337, 0, 0, 0, 1,
-0.3697683, 0.6871212, 338, 0, 0, 0, 1,
-0.3228693, 0.6111552, 339, 0, 0, 0, 1,
-0.2751634, 0.5290827, 340, 0, 0, 0, 1,
-0.2267696, 0.4417238, 341, 0, 0, 0, 1,
-0.1778091, 0.3499514, 342, 0, 0, 0, 1,
-0.1284041, 0.2546823, 343, 0, 0, 0, 1,
-0.0786782, 0.1568686, 344, 0, 0, 0, 1,
-0.02875563, 0.05748748, 345, 0, 0, 0, 1,
0.02123881, -0.04246803, 346, 0, 0, 0, 1,
0.07118016, -0.1419992, 347, 0, 0, 0, 1,
0.1209436, -0.2401116, 348, 0, 0, 0, 1,
0.1704047, -0.3358248, 349, 0, 0, 0, 1,
0.21944, -0.4281827, 350, 0, 0, 0, 1,
0.2679267, -0.5162622, 351, 0, 0, 0, 1,
0.3157437, -0.5991834, 352, 0, 0, 0, 1,
0.3627716, -0.6761178, 353, 0, 0, 0, 1,
0.4088928, -0.7462967, 354, 0, 0, 0, 1,
0.4539918, -0.8090188, 355, 0, 0, 0, 1,
0.4979562, -0.8636574, 356, 0, 0, 0, 1,
0.5406759, -0.9096667, 357, 0, 0, 0, 1,
0.5820442, -0.9465868, 358, 0, 0, 0, 1,
0.6219578, -0.974049, 359, 0, 0, 0, 1,
0.6603167, -0.9917789, 360, 0, 0, 0, 1,
0.6970252, -0.9995992, 361, 0, 0, 0, 1,
0.7319915, -0.9974318, 362, 0, 0, 0, 1,
0.7651282, -0.9852984, 363, 0, 0, 0, 1,
0.7963524, -0.9633202, 364, 0, 0, 0, 1,
0.8255863, -0.9317169, 365, 0, 0, 0, 1,
0.8527566, -0.8908042, 366, 0, 0, 0, 1,
0.8777954, -0.8409908, 367, 0, 0, 0, 1,
0.9006402, -0.7827745, 368, 0, 0, 0, 1,
0.9212338, -0.716737, 369, 0, 0, 0, 1,
0.9395249, -0.6435381, 370, 0, 0, 0, 1,
0.9554676, -0.5639092, 371, 0, 0, 0, 1,
0.9690222, -0.4786459, 372, 0, 0, 0, 1,
0.9801547, -0.3886001, 373, 0, 0, 0, 1,
0.9888374, -0.2946716, 374, 0, 0, 0, 1,
0.9950484, -0.1977988, 375, 0, 0, 0, 1,
0.9987724, -0.09894966, 376, 0, 0, 0, 1,
0.9999999, 0.0008881568, 377, 0, 0, 0, 1,
0.998728, 0.1007171, 378, 0, 0, 0, 1,
0.9949597, 0.1995397, 379, 0, 0, 0, 1,
0.9887046, 0.2963686, 380, 0, 0, 0, 1,
0.9799783, 0.3902362, 381, 0, 0, 0, 1,
0.9688025, 0.4802048, 382, 0, 0, 0, 1,
0.9552051, 0.5653753, 383, 0, 0, 0, 1,
0.9392204, 0.6448967, 384, 0, 0, 0, 1,
0.9208879, 0.7179746, 385, 0, 0, 0, 1,
0.9002538, 0.7838787, 386, 0, 0, 0, 1,
0.8773696, 0.8419505, 387, 0, 0, 0, 1,
0.8522923, 0.8916098, 388, 0, 0, 0, 1,
0.8250848, 0.9323605, 389, 0, 0, 0, 1,
0.795815, 0.9637954, 390, 0, 0, 0, 1,
0.7645561, 0.9856003, 391, 0, 0, 0, 1,
0.7313861, 0.9975574, 392, 0, 0, 0, 1,
0.6963881, 0.9995473, 393, 0, 0, 0, 1,
0.6596494, 0.99155, 394, 0, 0, 0, 1,
0.6212621, 0.9736454, 395, 0, 0, 0, 1,
0.5813218, 0.9460126, 396, 0, 0, 0, 1,
0.5399286, 0.9089274, 397, 0, 0, 0, 1,
0.4971858, 0.8627607, 398, 0, 0, 0, 1,
0.4532003, 0.8079734, 399, 0, 0, 0, 1,
0.4080821, 0.7451131, 400, 0, 0, 0, 1,
0.3619438, 0.674808, 401, 0, 0, 0, 1,
0.3149009, 0.5977604, 402, 0, 0, 0, 1,
0.2670709, 0.5147401, 403, 0, 0, 0, 1,
0.2185734, 0.4265768, 404, 0, 0, 0, 1,
0.1695295, 0.3341512, 405, 0, 0, 0, 1,
0.1200619, 0.2383869, 406, 0, 0, 0, 1,
0.07029423, 0.1402407, 407, 0, 0, 0, 1,
0.02035084, 0.04069326, 408, 0, 0, 0, 1,
-0.02964341, -0.05926076, 409, 0, 0, 0, 1,
-0.07956357, -0.1586227, 410, 0, 0, 0, 1,
-0.1292849, -0.2563997, 411, 0, 0, 0, 1,
-0.178683, -0.3516148, 412, 0, 0, 0, 1,
-0.2276345, -0.4433167, 413, 0, 0, 0, 1,
-0.2760171, -0.5305892, 414, 0, 0, 0, 1,
-0.3237098, -0.6125602, 415, 0, 0, 0, 1,
-0.3705933, -0.6884106, 416, 0, 0, 0, 1,
-0.4165506, -0.7573828, 417, 0, 0, 0, 1,
-0.4614667, -0.8187873, 418, 0, 0, 0, 1,
-0.5052294, -0.8720109, 419, 0, 0, 0, 1,
-0.5477293, -0.9165215, 420, 0, 0, 0, 1,
-0.5888601, -0.9518747, 421, 0, 0, 0, 1,
-0.6285191, -0.9777169, 422, 0, 0, 0, 1,
-0.6666071, -0.9937902, 423, 0, 0, 0, 1,
-0.703029, -0.9999338, 424, 0, 0, 0, 1,
-0.7376936, -0.9960865, 425, 0, 0, 0, 1,
-0.7705144, -0.9822866, 426, 0, 0, 0, 1,
-0.8014093, -0.958672, 427, 0, 0, 0, 1,
-0.8303011, -0.9254786, 428, 0, 0, 0, 1,
-0.8571176, -0.8830382, 429, 0, 0, 0, 1,
-0.8817917, -0.8317748, 430, 0, 0, 0, 1,
-0.9042618, -0.7722005, 431, 0, 0, 0, 1,
-0.9244718, -0.7049106, 432, 0, 0, 0, 1,
-0.942371, -0.6305776, 433, 0, 0, 0, 1,
-0.9579148, -0.549944, 434, 0, 0, 0, 1,
-0.9710643, -0.4638155, 435, 0, 0, 0, 1,
-0.9817867, -0.3730528, 436, 0, 0, 0, 1,
-0.9900551, -0.2785626, 437, 0, 0, 0, 1,
-0.9958488, -0.1812891, 438, 0, 0, 0, 1,
-0.9991535, -0.08220428, 439, 0, 0, 0, 1,
-0.9999608, 0.01770193, 440, 0, 0, 0, 1,
-0.9982688, 0.1174313, 441, 0, 0, 0, 1,
-0.9940816, 0.2159873, 442, 0, 0, 0, 1,
-0.9874096, 0.3123852, 443, 0, 0, 0, 1,
-0.9782697, 0.4056619, 444, 0, 0, 0, 1,
-0.9666846, 0.4948853, 445, 0, 0, 0, 1,
-0.9526833, 0.579164, 446, 0, 0, 0, 1,
-0.9363008, 0.6576559, 447, 0, 0, 0, 1,
-0.917578, 0.7295768, 448, 0, 0, 0, 1,
-0.8965618, 0.7942079, 449, 0, 0, 0, 1,
-0.8733047, 0.8509035, 450, 0, 0, 0, 1,
-0.8478647, 0.8990973, 451, 0, 0, 0, 1,
-0.8203055, 0.9383075, 452, 0, 0, 0, 1,
-0.7906959, 0.9681424, 453, 0, 0, 0, 1,
-0.75911, 0.9883041, 454, 0, 0, 0, 1,
-0.7256268, 0.9985909, 455, 0, 0, 0, 1,
-0.6903298, 0.9989001, 456, 0, 0, 0, 1,
-0.6533075, 0.9892286, 457, 0, 0, 0, 1,
-0.6146522, 0.9696731, 458, 0, 0, 0, 1,
-0.5744605, 0.940429, 459, 0, 0, 0, 1,
-0.532833, 0.9017884, 460, 0, 0, 0, 1,
-0.4898737, 0.8541374, 461, 0, 0, 0, 1,
-0.44569, 0.7979521, 462, 0, 0, 0, 1,
-0.4003923, 0.733794, 463, 0, 0, 0, 1,
-0.3540938, 0.662304, 464, 0, 0, 0, 1,
-0.3069102, 0.5841966, 465, 0, 0, 0, 1,
-0.2589596, 0.500252, 466, 0, 0, 0, 1,
-0.2103617, 0.4113091, 467, 0, 0, 0, 1,
-0.161238, 0.3182565, 468, 0, 0, 0, 1,
-0.1117112, 0.222024, 469, 0, 0, 0, 1,
-0.06190529, 0.1235731, 470, 0, 0, 0, 1,
-0.01194462, 0.02388753, 471, 0, 0, 0, 1,
0.03804591, -0.07603674, 472, 0, 0, 0, 1,
0.08794135, -0.1752013, 473, 0, 0, 0, 1,
0.137617, -0.2726153, 474, 0, 0, 0, 1,
0.1869486, -0.3673053, 475, 0, 0, 0, 1,
0.235813, -0.4583254, 476, 0, 0, 0, 1,
0.284088, -0.5447661, 477, 0, 0, 0, 1,
0.3316529, -0.6257637, 478, 0, 0, 0, 1,
0.3783889, -0.7005088, 479, 0, 0, 0, 1,
0.424179, -0.7682546, 480, 0, 0, 0, 1,
0.4689089, -0.8283244, 481, 0, 0, 0, 1,
0.5124668, -0.8801178, 482, 0, 0, 0, 1,
0.5547439, -0.9231173, 483, 0, 0, 0, 1,
0.5956343, -0.9568933, 484, 0, 0, 0, 1,
0.635036, -0.9811084, 485, 0, 0, 0, 1,
0.6728504, -0.9955206, 486, 0, 0, 0, 1,
0.708983, -0.9999859, 487, 0, 0, 0, 1,
0.7433436, -0.9944596, 488, 0, 0, 0, 1,
0.7758461, -0.9789971, 489, 0, 0, 0, 1,
0.8064095, -0.9537526, 490, 0, 0, 0, 1,
0.8349572, -0.9189787, 491, 0, 0, 0, 1,
0.8614181, -0.8750226, 492, 0, 0, 0, 1,
0.8857257, -0.8223236, 493, 0, 0, 0, 1,
0.9078196, -0.7614081, 494, 0, 0, 0, 1,
0.9276444, -0.692885, 495, 0, 0, 0, 1,
0.9451505, -0.6174387, 496, 0, 0, 0, 1,
0.9602942, -0.5358232, 497, 0, 0, 0, 1,
0.9730378, -0.448854, 498, 0, 0, 0, 1,
0.9833493, -0.3573999, 499, 0, 0, 0, 1,
0.9912028, -0.2623748, 500, 0, 0, 0, 1
]);
this.values[59] = v;
this.buf[59] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[59]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[59], gl.STATIC_DRAW);
this.mvMatLoc[59] = gl.getUniformLocation(this.prog[59],"mvMatrix");
this.prMatLoc[59] = gl.getUniformLocation(this.prog[59],"prMatrix");
// ****** text object 61 ******
this.flags[61] = 40;
this.prog[61]  = gl.createProgram();
gl.attachShader(this.prog[61], this.getShader( gl, "curvevshader61" ));
gl.attachShader(this.prog[61], this.getShader( gl, "curvefshader61" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[61], 0, "aPos");
gl.bindAttribLocation(this.prog[61], 1, "aCol");
gl.linkProgram(this.prog[61]);
var texts = [
""
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[61] = gl.getAttribLocation(this.prog[61], "aOfs");
this.texture[61] = gl.createTexture();
this.texLoc[61] = gl.getAttribLocation(this.prog[61], "aTexcoord");
this.sampler[61] = gl.getUniformLocation(this.prog[61],"uSampler");
handleLoadedTexture(this.texture[61], document.getElementById("curvetextureCanvas"));
this.offsets[61]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
1.585484e-05, -1.338987, -84.75, 0, -0.5, 0.5, 0.5,
1.585484e-05, -1.338987, -84.75, 1, -0.5, 0.5, 0.5,
1.585484e-05, -1.338987, -84.75, 1, 1.5, 0.5, 0.5,
1.585484e-05, -1.338987, -84.75, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<1; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[61]["stride"]*(4*i + j) + this.offsets[61]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[61] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3
]);
this.buf[61] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[61]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[61], gl.STATIC_DRAW);
this.ibuf[61] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[61]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[61] = gl.getUniformLocation(this.prog[61],"mvMatrix");
this.prMatLoc[61] = gl.getUniformLocation(this.prog[61],"prMatrix");
this.textScaleLoc[61] = gl.getUniformLocation(this.prog[61],"textScale");
// ****** text object 62 ******
this.flags[62] = 40;
this.prog[62]  = gl.createProgram();
gl.attachShader(this.prog[62], this.getShader( gl, "curvevshader62" ));
gl.attachShader(this.prog[62], this.getShader( gl, "curvefshader62" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[62], 0, "aPos");
gl.bindAttribLocation(this.prog[62], 1, "aCol");
gl.linkProgram(this.prog[62]);
var texts = [
""
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[62] = gl.getAttribLocation(this.prog[62], "aOfs");
this.texture[62] = gl.createTexture();
this.texLoc[62] = gl.getAttribLocation(this.prog[62], "aTexcoord");
this.sampler[62] = gl.getUniformLocation(this.prog[62],"uSampler");
handleLoadedTexture(this.texture[62], document.getElementById("curvetextureCanvas"));
this.offsets[62]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
-1.338963, 1.758337e-06, -84.75, 0, -0.5, 0.5, 0.5,
-1.338963, 1.758337e-06, -84.75, 1, -0.5, 0.5, 0.5,
-1.338963, 1.758337e-06, -84.75, 1, 1.5, 0.5, 0.5,
-1.338963, 1.758337e-06, -84.75, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<1; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[62]["stride"]*(4*i + j) + this.offsets[62]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[62] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3
]);
this.buf[62] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[62]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[62], gl.STATIC_DRAW);
this.ibuf[62] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[62]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[62] = gl.getUniformLocation(this.prog[62],"mvMatrix");
this.prMatLoc[62] = gl.getUniformLocation(this.prog[62],"prMatrix");
this.textScaleLoc[62] = gl.getUniformLocation(this.prog[62],"textScale");
// ****** text object 63 ******
this.flags[63] = 40;
this.prog[63]  = gl.createProgram();
gl.attachShader(this.prog[63], this.getShader( gl, "curvevshader63" ));
gl.attachShader(this.prog[63], this.getShader( gl, "curvefshader63" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[63], 0, "aPos");
gl.bindAttribLocation(this.prog[63], 1, "aCol");
gl.linkProgram(this.prog[63]);
var texts = [
"time"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[63] = gl.getAttribLocation(this.prog[63], "aOfs");
this.texture[63] = gl.createTexture();
this.texLoc[63] = gl.getAttribLocation(this.prog[63], "aTexcoord");
this.sampler[63] = gl.getUniformLocation(this.prog[63],"uSampler");
handleLoadedTexture(this.texture[63], document.getElementById("curvetextureCanvas"));
this.offsets[63]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
-1.338963, -1.338987, 250, 0, -0.5, 0.5, 0.5,
-1.338963, -1.338987, 250, 1, -0.5, 0.5, 0.5,
-1.338963, -1.338987, 250, 1, 1.5, 0.5, 0.5,
-1.338963, -1.338987, 250, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<1; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[63]["stride"]*(4*i + j) + this.offsets[63]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[63] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3
]);
this.buf[63] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[63]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[63], gl.STATIC_DRAW);
this.ibuf[63] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[63]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[63] = gl.getUniformLocation(this.prog[63],"mvMatrix");
this.prMatLoc[63] = gl.getUniformLocation(this.prog[63],"prMatrix");
this.textScaleLoc[63] = gl.getUniformLocation(this.prog[63],"textScale");
// ****** spheres object 64 ******
this.flags[64] = 3;
this.prog[64]  = gl.createProgram();
gl.attachShader(this.prog[64], this.getShader( gl, "curvevshader64" ));
gl.attachShader(this.prog[64], this.getShader( gl, "curvefshader64" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[64], 0, "aPos");
gl.bindAttribLocation(this.prog[64], 1, "aCol");
gl.linkProgram(this.prog[64]);
this.offsets[64]={vofs:0, cofs:-1, nofs:-1, radofs:3, oofs:-1, tofs:-1, stride:4};
var v=new Float32Array([
1, 0, 0, 8
]);
this.values[64] = v;
this.normLoc[64] = gl.getAttribLocation(this.prog[64], "aNorm");
this.mvMatLoc[64] = gl.getUniformLocation(this.prog[64],"mvMatrix");
this.prMatLoc[64] = gl.getUniformLocation(this.prog[64],"prMatrix");
this.normMatLoc[64] = gl.getUniformLocation(this.prog[64],"normMatrix");
// ****** lines object 65 ******
this.flags[65] = 128;
this.prog[65]  = gl.createProgram();
gl.attachShader(this.prog[65], this.getShader( gl, "curvevshader65" ));
gl.attachShader(this.prog[65], this.getShader( gl, "curvefshader65" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[65], 0, "aPos");
gl.bindAttribLocation(this.prog[65], 1, "aCol");
gl.linkProgram(this.prog[65]);
this.offsets[65]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:-1, tofs:-1, stride:3};
var v=new Float32Array([
-0.5, -1.02999, -21.56403,
1, -1.02999, -21.56403,
-0.5, -1.02999, -21.56403,
-0.5, -1.08149, -34.79583,
0, -1.02999, -21.56403,
0, -1.08149, -34.79583,
0.5, -1.02999, -21.56403,
0.5, -1.08149, -34.79583,
1, -1.02999, -21.56403,
1, -1.08149, -34.79583
]);
this.values[65] = v;
this.buf[65] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[65]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[65], gl.STATIC_DRAW);
this.mvMatLoc[65] = gl.getUniformLocation(this.prog[65],"mvMatrix");
this.prMatLoc[65] = gl.getUniformLocation(this.prog[65],"prMatrix");
// ****** text object 66 ******
this.flags[66] = 40;
this.prog[66]  = gl.createProgram();
gl.attachShader(this.prog[66], this.getShader( gl, "curvevshader66" ));
gl.attachShader(this.prog[66], this.getShader( gl, "curvefshader66" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[66], 0, "aPos");
gl.bindAttribLocation(this.prog[66], 1, "aCol");
gl.linkProgram(this.prog[66]);
var texts = [
"-0.5",
"0",
"0.5",
"1"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[66] = gl.getAttribLocation(this.prog[66], "aOfs");
this.texture[66] = gl.createTexture();
this.texLoc[66] = gl.getAttribLocation(this.prog[66], "aTexcoord");
this.sampler[66] = gl.getUniformLocation(this.prog[66],"uSampler");
handleLoadedTexture(this.texture[66], document.getElementById("curvetextureCanvas"));
this.offsets[66]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
-0.5, -1.184489, -61.25942, 0, -0.5, 0.5, 0.5,
-0.5, -1.184489, -61.25942, 1, -0.5, 0.5, 0.5,
-0.5, -1.184489, -61.25942, 1, 1.5, 0.5, 0.5,
-0.5, -1.184489, -61.25942, 0, 1.5, 0.5, 0.5,
0, -1.184489, -61.25942, 0, -0.5, 0.5, 0.5,
0, -1.184489, -61.25942, 1, -0.5, 0.5, 0.5,
0, -1.184489, -61.25942, 1, 1.5, 0.5, 0.5,
0, -1.184489, -61.25942, 0, 1.5, 0.5, 0.5,
0.5, -1.184489, -61.25942, 0, -0.5, 0.5, 0.5,
0.5, -1.184489, -61.25942, 1, -0.5, 0.5, 0.5,
0.5, -1.184489, -61.25942, 1, 1.5, 0.5, 0.5,
0.5, -1.184489, -61.25942, 0, 1.5, 0.5, 0.5,
1, -1.184489, -61.25942, 0, -0.5, 0.5, 0.5,
1, -1.184489, -61.25942, 1, -0.5, 0.5, 0.5,
1, -1.184489, -61.25942, 1, 1.5, 0.5, 0.5,
1, -1.184489, -61.25942, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<4; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[66]["stride"]*(4*i + j) + this.offsets[66]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[66] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3,
4, 5, 6, 4, 6, 7,
8, 9, 10, 8, 10, 11,
12, 13, 14, 12, 14, 15
]);
this.buf[66] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[66]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[66], gl.STATIC_DRAW);
this.ibuf[66] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[66]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[66] = gl.getUniformLocation(this.prog[66],"mvMatrix");
this.prMatLoc[66] = gl.getUniformLocation(this.prog[66],"prMatrix");
this.textScaleLoc[66] = gl.getUniformLocation(this.prog[66],"textScale");
// ****** lines object 67 ******
this.flags[67] = 128;
this.prog[67]  = gl.createProgram();
gl.attachShader(this.prog[67], this.getShader( gl, "curvevshader67" ));
gl.attachShader(this.prog[67], this.getShader( gl, "curvefshader67" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[67], 0, "aPos");
gl.bindAttribLocation(this.prog[67], 1, "aCol");
gl.linkProgram(this.prog[67]);
this.offsets[67]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:-1, tofs:-1, stride:3};
var v=new Float32Array([
-1.030799, -0.5, -21.56403,
-1.030799, 0.5, -21.56403,
-1.030799, -0.5, -21.56403,
-1.083726, -0.5, -34.79583,
-1.030799, 0, -21.56403,
-1.083726, 0, -34.79583,
-1.030799, 0.5, -21.56403,
-1.083726, 0.5, -34.79583
]);
this.values[67] = v;
this.buf[67] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[67]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[67], gl.STATIC_DRAW);
this.mvMatLoc[67] = gl.getUniformLocation(this.prog[67],"mvMatrix");
this.prMatLoc[67] = gl.getUniformLocation(this.prog[67],"prMatrix");
// ****** text object 68 ******
this.flags[68] = 40;
this.prog[68]  = gl.createProgram();
gl.attachShader(this.prog[68], this.getShader( gl, "curvevshader68" ));
gl.attachShader(this.prog[68], this.getShader( gl, "curvefshader68" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[68], 0, "aPos");
gl.bindAttribLocation(this.prog[68], 1, "aCol");
gl.linkProgram(this.prog[68]);
var texts = [
"-0.5",
"0",
"0.5"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[68] = gl.getAttribLocation(this.prog[68], "aOfs");
this.texture[68] = gl.createTexture();
this.texLoc[68] = gl.getAttribLocation(this.prog[68], "aTexcoord");
this.sampler[68] = gl.getUniformLocation(this.prog[68],"uSampler");
handleLoadedTexture(this.texture[68], document.getElementById("curvetextureCanvas"));
this.offsets[68]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
-1.189578, -0.5, -61.25942, 0, -0.5, 0.5, 0.5,
-1.189578, -0.5, -61.25942, 1, -0.5, 0.5, 0.5,
-1.189578, -0.5, -61.25942, 1, 1.5, 0.5, 0.5,
-1.189578, -0.5, -61.25942, 0, 1.5, 0.5, 0.5,
-1.189578, 0, -61.25942, 0, -0.5, 0.5, 0.5,
-1.189578, 0, -61.25942, 1, -0.5, 0.5, 0.5,
-1.189578, 0, -61.25942, 1, 1.5, 0.5, 0.5,
-1.189578, 0, -61.25942, 0, 1.5, 0.5, 0.5,
-1.189578, 0.5, -61.25942, 0, -0.5, 0.5, 0.5,
-1.189578, 0.5, -61.25942, 1, -0.5, 0.5, 0.5,
-1.189578, 0.5, -61.25942, 1, 1.5, 0.5, 0.5,
-1.189578, 0.5, -61.25942, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<3; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[68]["stride"]*(4*i + j) + this.offsets[68]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[68] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3,
4, 5, 6, 4, 6, 7,
8, 9, 10, 8, 10, 11
]);
this.buf[68] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[68]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[68], gl.STATIC_DRAW);
this.ibuf[68] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[68]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[68] = gl.getUniformLocation(this.prog[68],"mvMatrix");
this.prMatLoc[68] = gl.getUniformLocation(this.prog[68],"prMatrix");
this.textScaleLoc[68] = gl.getUniformLocation(this.prog[68],"textScale");
// ****** lines object 69 ******
this.flags[69] = 128;
this.prog[69]  = gl.createProgram();
gl.attachShader(this.prog[69], this.getShader( gl, "curvevshader69" ));
gl.attachShader(this.prog[69], this.getShader( gl, "curvefshader69" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[69], 0, "aPos");
gl.bindAttribLocation(this.prog[69], 1, "aCol");
gl.linkProgram(this.prog[69]);
this.offsets[69]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:-1, tofs:-1, stride:3};
var v=new Float32Array([
-1.030799, -1.02999, 0,
-1.030799, -1.02999, 500,
-1.030799, -1.02999, 0,
-1.083726, -1.08149, 0,
-1.030799, -1.02999, 100,
-1.083726, -1.08149, 100,
-1.030799, -1.02999, 200,
-1.083726, -1.08149, 200,
-1.030799, -1.02999, 300,
-1.083726, -1.08149, 300,
-1.030799, -1.02999, 400,
-1.083726, -1.08149, 400,
-1.030799, -1.02999, 500,
-1.083726, -1.08149, 500
]);
this.values[69] = v;
this.buf[69] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[69]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[69], gl.STATIC_DRAW);
this.mvMatLoc[69] = gl.getUniformLocation(this.prog[69],"mvMatrix");
this.prMatLoc[69] = gl.getUniformLocation(this.prog[69],"prMatrix");
// ****** text object 70 ******
this.flags[70] = 40;
this.prog[70]  = gl.createProgram();
gl.attachShader(this.prog[70], this.getShader( gl, "curvevshader70" ));
gl.attachShader(this.prog[70], this.getShader( gl, "curvefshader70" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[70], 0, "aPos");
gl.bindAttribLocation(this.prog[70], 1, "aCol");
gl.linkProgram(this.prog[70]);
var texts = [
"0",
"100",
"200",
"300",
"400",
"500"
];
var texinfo = drawTextToCanvas(texts, 1);
this.ofsLoc[70] = gl.getAttribLocation(this.prog[70], "aOfs");
this.texture[70] = gl.createTexture();
this.texLoc[70] = gl.getAttribLocation(this.prog[70], "aTexcoord");
this.sampler[70] = gl.getUniformLocation(this.prog[70],"uSampler");
handleLoadedTexture(this.texture[70], document.getElementById("curvetextureCanvas"));
this.offsets[70]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:5, tofs:3, stride:7};
var v=new Float32Array([
-1.189578, -1.184489, 0, 0, -0.5, 0.5, 0.5,
-1.189578, -1.184489, 0, 1, -0.5, 0.5, 0.5,
-1.189578, -1.184489, 0, 1, 1.5, 0.5, 0.5,
-1.189578, -1.184489, 0, 0, 1.5, 0.5, 0.5,
-1.189578, -1.184489, 100, 0, -0.5, 0.5, 0.5,
-1.189578, -1.184489, 100, 1, -0.5, 0.5, 0.5,
-1.189578, -1.184489, 100, 1, 1.5, 0.5, 0.5,
-1.189578, -1.184489, 100, 0, 1.5, 0.5, 0.5,
-1.189578, -1.184489, 200, 0, -0.5, 0.5, 0.5,
-1.189578, -1.184489, 200, 1, -0.5, 0.5, 0.5,
-1.189578, -1.184489, 200, 1, 1.5, 0.5, 0.5,
-1.189578, -1.184489, 200, 0, 1.5, 0.5, 0.5,
-1.189578, -1.184489, 300, 0, -0.5, 0.5, 0.5,
-1.189578, -1.184489, 300, 1, -0.5, 0.5, 0.5,
-1.189578, -1.184489, 300, 1, 1.5, 0.5, 0.5,
-1.189578, -1.184489, 300, 0, 1.5, 0.5, 0.5,
-1.189578, -1.184489, 400, 0, -0.5, 0.5, 0.5,
-1.189578, -1.184489, 400, 1, -0.5, 0.5, 0.5,
-1.189578, -1.184489, 400, 1, 1.5, 0.5, 0.5,
-1.189578, -1.184489, 400, 0, 1.5, 0.5, 0.5,
-1.189578, -1.184489, 500, 0, -0.5, 0.5, 0.5,
-1.189578, -1.184489, 500, 1, -0.5, 0.5, 0.5,
-1.189578, -1.184489, 500, 1, 1.5, 0.5, 0.5,
-1.189578, -1.184489, 500, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<6; i++) 
for (var j=0; j<4; j++) {
var ind = this.offsets[70]["stride"]*(4*i + j) + this.offsets[70]["tofs"];
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i];
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
this.values[70] = v;
var f=new Uint16Array([
0, 1, 2, 0, 2, 3,
4, 5, 6, 4, 6, 7,
8, 9, 10, 8, 10, 11,
12, 13, 14, 12, 14, 15,
16, 17, 18, 16, 18, 19,
20, 21, 22, 20, 22, 23
]);
this.buf[70] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[70]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[70], gl.STATIC_DRAW);
this.ibuf[70] = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[70]);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
this.mvMatLoc[70] = gl.getUniformLocation(this.prog[70],"mvMatrix");
this.prMatLoc[70] = gl.getUniformLocation(this.prog[70],"prMatrix");
this.textScaleLoc[70] = gl.getUniformLocation(this.prog[70],"textScale");
// ****** lines object 71 ******
this.flags[71] = 128;
this.prog[71]  = gl.createProgram();
gl.attachShader(this.prog[71], this.getShader( gl, "curvevshader71" ));
gl.attachShader(this.prog[71], this.getShader( gl, "curvefshader71" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(this.prog[71], 0, "aPos");
gl.bindAttribLocation(this.prog[71], 1, "aCol");
gl.linkProgram(this.prog[71]);
this.offsets[71]={vofs:0, cofs:-1, nofs:-1, radofs:-1, oofs:-1, tofs:-1, stride:3};
var v=new Float32Array([
-1.030799, -1.02999, -21.56403,
-1.030799, 1.029994, -21.56403,
-1.030799, -1.02999, 507.7079,
-1.030799, 1.029994, 507.7079,
-1.030799, -1.02999, -21.56403,
-1.030799, -1.02999, 507.7079,
-1.030799, 1.029994, -21.56403,
-1.030799, 1.029994, 507.7079,
-1.030799, -1.02999, -21.56403,
1.086255, -1.02999, -21.56403,
-1.030799, -1.02999, 507.7079,
1.086255, -1.02999, 507.7079,
-1.030799, 1.029994, -21.56403,
1.086255, 1.029994, -21.56403,
-1.030799, 1.029994, 507.7079,
1.086255, 1.029994, 507.7079,
1.086255, -1.02999, -21.56403,
1.086255, 1.029994, -21.56403,
1.086255, -1.02999, 507.7079,
1.086255, 1.029994, 507.7079,
1.086255, -1.02999, -21.56403,
1.086255, -1.02999, 507.7079,
1.086255, 1.029994, -21.56403,
1.086255, 1.029994, 507.7079
]);
this.values[71] = v;
this.buf[71] = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[71]);
gl.bufferData(gl.ARRAY_BUFFER, this.values[71], gl.STATIC_DRAW);
this.mvMatLoc[71] = gl.getUniformLocation(this.prog[71],"mvMatrix");
this.prMatLoc[71] = gl.getUniformLocation(this.prog[71],"prMatrix");
gl.enable(gl.DEPTH_TEST);
gl.depthFunc(gl.LEQUAL);
gl.clearDepth(1.0);
gl.clearColor(1,1,1,1);
var drag  = 0;
this.drawScene = function() {
gl.depthMask(true);
gl.disable(gl.BLEND);
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
this.drawFns[53].call(this, 53)
gl.flush ();
}
// ****** linestrip object 59 *******
this.drawFns[59] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.enableVertexAttribArray( posLoc );
gl.enableVertexAttribArray( colLoc );
gl.vertexAttribPointer(colLoc, 4, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["cofs"]);
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawArrays(gl.LINE_STRIP, 0, 501);
}
// ****** text object 61 *******
this.drawFns[61] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
}
// ****** text object 62 *******
this.drawFns[62] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
}
// ****** text object 63 *******
this.drawFns[63] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
}
// ****** spheres object 64 *******
this.drawFns[64] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, sphereBuf);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sphereIbuf);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(normMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 12,  0);
gl.enableVertexAttribArray(this.normLoc[id] );
gl.vertexAttribPointer(this.normLoc[id],  3, gl.FLOAT, false, 12,  0);
gl.disableVertexAttribArray( colLoc );
var sphereNorm = new CanvasMatrix4();
sphereNorm.scale(144.3422, 144.341, 0.5773595);
sphereNorm.multRight(normMatrix);
gl.uniformMatrix4fv( this.normMatLoc[id], false, new Float32Array(sphereNorm.getAsArray()) );
gl.vertexAttrib4f( colLoc, 1, 0, 0, 1);
for (var i = 0; i < 1; i++) {
var sphereMV = new CanvasMatrix4();
var baseofs = i*curvergl.offsets[id]["stride"];
var ofs = baseofs + this.offsets[id]["radofs"];        
var scale = this.values[id][ofs];
sphereMV.scale(0.006927983*scale, 0.006928037*scale, 1.732023*scale);
sphereMV.translate(this.values[id][baseofs], 
this.values[id][baseofs+1], 
this.values[id][baseofs+2]);
sphereMV.multRight(this.mvMatrix);
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(sphereMV.getAsArray()) );
gl.drawElements(gl.TRIANGLES, 384, gl.UNSIGNED_SHORT, 0);
}
}
// ****** lines object 65 *******
this.drawFns[65] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawArrays(gl.LINES, 0, 10);
}
// ****** text object 66 *******
this.drawFns[66] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 24, gl.UNSIGNED_SHORT, 0);
}
// ****** lines object 67 *******
this.drawFns[67] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawArrays(gl.LINES, 0, 8);
}
// ****** text object 68 *******
this.drawFns[68] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 18, gl.UNSIGNED_SHORT, 0);
}
// ****** lines object 69 *******
this.drawFns[69] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawArrays(gl.LINES, 0, 14);
}
// ****** text object 70 *******
this.drawFns[70] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibuf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.uniform2f( this.textScaleLoc[id], 0.75/this.vp[2], 0.75/this.vp[3]);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( this.texLoc[id] );
gl.vertexAttribPointer(this.texLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["tofs"]);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture[id]);
gl.uniform1i( this.sampler[id], 0);
gl.enableVertexAttribArray( this.ofsLoc[id] );
gl.vertexAttribPointer(this.ofsLoc[id], 2, gl.FLOAT, false, 4*this.offsets[id]["stride"], 4*this.offsets[id]["oofs"]);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawElements(gl.TRIANGLES, 36, gl.UNSIGNED_SHORT, 0);
}
// ****** lines object 71 *******
this.drawFns[71] = function(id, clipplanes) {
gl.useProgram(this.prog[id]);
gl.bindBuffer(gl.ARRAY_BUFFER, this.buf[id]);
gl.uniformMatrix4fv( this.prMatLoc[id], false, new Float32Array(this.prMatrix.getAsArray()) );
gl.uniformMatrix4fv( this.mvMatLoc[id], false, new Float32Array(this.mvMatrix.getAsArray()) );
var clipcheck = 0;
for (var i=0; i < clipplanes.length; i++)
clipcheck = this.clipFns[clipplanes[i]].call(this, clipplanes[i], id, clipcheck);
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 4*this.offsets[id]["stride"],  4*this.offsets[id]["vofs"]);
gl.drawArrays(gl.LINES, 0, 24);
}
// ***** subscene 53 ****
this.drawFns[53] = function(id) {
this.vp = this.viewport[id];
gl.viewport(this.vp[0], this.vp[1], this.vp[2], this.vp[3]);
gl.scissor(this.vp[0], this.vp[1], this.vp[2], this.vp[3]);
gl.clearColor(1, 1, 1, 1);
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
this.prMatrix.makeIdentity();
var radius = 280.1081;
var distance = 1246.233;
var t = tan(this.FOV[53]*PI/360);
var near = distance - radius;
var far = distance + radius;
var hlen = t*near;
var aspect = this.vp[2]/this.vp[3];
var z = this.zoom[53];
if (aspect > 1) 
this.prMatrix.frustum(-hlen*aspect*z, hlen*aspect*z, 
-hlen*z, hlen*z, near, far);
else  
this.prMatrix.frustum(-hlen*z, hlen*z, 
-hlen*z/aspect, hlen*z/aspect, 
near, far);
this.mvMatrix.makeIdentity();
this.mvMatrix.translate( -0.02772778, -1.758337e-06, -243.0719 );
this.mvMatrix.scale( 144.3422, 144.341, 0.5773595 );   
this.mvMatrix.multRight( curvergl.userMatrix[53] );
this.mvMatrix.translate(-0, -0, -1246.233);
normMatrix.makeIdentity();
normMatrix.scale( 0.006927983, 0.006928037, 1.732023 );   
normMatrix.multRight( curvergl.userMatrix[53] );
var clipids = this.clipplanes[id];
if (clipids.length > 0) {
this.invMatrix = new CanvasMatrix4(this.mvMatrix);
this.invMatrix.invert();
for (var i = 0; i < this.clipplanes[id].length; i++) 
this.drawFns[clipids[i]].call(this, clipids[i]);
}
var subids = this.opaque[id];
for (var i = 0; i < subids.length; i++) 
this.drawFns[subids[i]].call(this, subids[i], clipids);
subids = this.transparent[id];
if (subids.length > 0) {
gl.depthMask(false);
gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA,
gl.ONE, gl.ONE);
gl.enable(gl.BLEND);
for (var i = 0; i < subids.length; i++) 
this.drawFns[subids[i]].call(this, subids[i], clipids);
}
subids = this.subscenes[id];
for (var i = 0; i < subids.length; i++)
this.drawFns[subids[i]].call(this, subids[i]);
}
this.drawScene();
var vpx0 = {
53: 0
};
var vpy0 = {
53: 0
};
var vpWidths = {
53: 480
};
var vpHeights = {
53: 480
};
var activeModel = {
53: 53
};
var activeProjection = {
53: 53
};
curvergl.listeners = {
53: [ 53 ]
};
var whichSubscene = function(coords){
if (0 <= coords.x && coords.x <= 480 && 0 <= coords.y && coords.y <= 480) return(53);
return(53);
}
var translateCoords = function(subsceneid, coords){
return {x:coords.x - vpx0[subsceneid], y:coords.y - vpy0[subsceneid]};
}
var vlen = function(v) {
return sqrt(v[0]*v[0] + v[1]*v[1] + v[2]*v[2])
}
var xprod = function(a, b) {
return [a[1]*b[2] - a[2]*b[1],
a[2]*b[0] - a[0]*b[2],
a[0]*b[1] - a[1]*b[0]];
}
var screenToVector = function(x, y) {
var width = vpWidths[activeSubscene];
var height = vpHeights[activeSubscene];
var radius = max(width, height)/2.0;
var cx = width/2.0;
var cy = height/2.0;
var px = (x-cx)/radius;
var py = (y-cy)/radius;
var plen = sqrt(px*px+py*py);
if (plen > 1.e-6) { 
px = px/plen;
py = py/plen;
}
var angle = (SQRT2 - plen)/SQRT2*PI/2;
var z = sin(angle);
var zlen = sqrt(1.0 - z*z);
px = px * zlen;
py = py * zlen;
return [px, py, z];
}
var rotBase;
var trackballdown = function(x,y) {
rotBase = screenToVector(x, y);
var l = curvergl.listeners[activeModel[activeSubscene]];
saveMat = new Object();
for (var i = 0; i < l.length; i++) 
saveMat[l[i]] = new CanvasMatrix4(curvergl.userMatrix[l[i]]);
}
var trackballmove = function(x,y) {
var rotCurrent = screenToVector(x,y);
var dot = rotBase[0]*rotCurrent[0] + 
rotBase[1]*rotCurrent[1] + 
rotBase[2]*rotCurrent[2];
var angle = acos( dot/vlen(rotBase)/vlen(rotCurrent) )*180./PI;
var axis = xprod(rotBase, rotCurrent);
var l = curvergl.listeners[activeModel[activeSubscene]];
for (i = 0; i < l.length; i++) {
curvergl.userMatrix[l[i]].load(saveMat[l[i]]);
curvergl.userMatrix[l[i]].rotate(angle, axis[0], axis[1], axis[2]);
}
curvergl.drawScene();
}
var trackballend = 0;
var y0zoom = 0;
var zoom0 = 0;
var zoomdown = function(x, y) {
y0zoom = y;
zoom0 = new Object();
l = curvergl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
zoom0[l[i]] = log(curvergl.zoom[l[i]]);
}
var zoommove = function(x, y) {
l = curvergl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
curvergl.zoom[l[i]] = exp(zoom0[l[i]] + (y-y0zoom)/height);
curvergl.drawScene();
}
var zoomend = 0;
var y0fov = 0;
var fov0 = 0;
var fovdown = function(x, y) {
y0fov = y;
fov0 = new Object();
l = curvergl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
fov0[l[i]] = curvergl.FOV[l[i]];
}
var fovmove = function(x, y) {
l = curvergl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
curvergl.FOV[l[i]] = max(1, min(179, fov0[l[i]] + 180*(y-y0fov)/height));
curvergl.drawScene();
}
var fovend = 0;
var mousedown = [trackballdown, zoomdown, fovdown];
var mousemove = [trackballmove, zoommove, fovmove];
var mouseend = [trackballend, zoomend, fovend];
function relMouseCoords(event){
var totalOffsetX = 0;
var totalOffsetY = 0;
var currentElement = canvas;
do{
totalOffsetX += currentElement.offsetLeft;
totalOffsetY += currentElement.offsetTop;
currentElement = currentElement.offsetParent;
}
while(currentElement)
var canvasX = event.pageX - totalOffsetX;
var canvasY = event.pageY - totalOffsetY;
return {x:canvasX, y:canvasY}
}
canvas.onmousedown = function ( ev ){
if (!ev.which) // Use w3c defns in preference to MS
switch (ev.button) {
case 0: ev.which = 1; break;
case 1: 
case 4: ev.which = 2; break;
case 2: ev.which = 3;
}
drag = ev.which;
var f = mousedown[drag-1];
if (f) {
var coords = relMouseCoords(ev);
coords.y = height-coords.y;
activeSubscene = whichSubscene(coords);
coords = translateCoords(activeSubscene, coords);
f(coords.x, coords.y); 
ev.preventDefault();
}
}    
canvas.onmouseup = function ( ev ){ 
if ( drag == 0 ) return;
var f = mouseend[drag-1];
if (f) 
f();
drag = 0;
}
canvas.onmouseout = canvas.onmouseup;
canvas.onmousemove = function ( ev ){
if ( drag == 0 ) return;
var f = mousemove[drag-1];
if (f) {
var coords = relMouseCoords(ev);
coords.y = height - coords.y;
coords = translateCoords(activeSubscene, coords);
f(coords.x, coords.y);
}
}
var wheelHandler = function(ev) {
var del = 1.1;
if (ev.shiftKey) del = 1.01;
var ds = ((ev.detail || ev.wheelDelta) > 0) ? del : (1 / del);
l = curvergl.listeners[activeProjection[activeSubscene]];
for (i = 0; i < l.length; i++)
curvergl.zoom[l[i]] *= ds;
curvergl.drawScene();
ev.preventDefault();
};
canvas.addEventListener("DOMMouseScroll", wheelHandler, false);
canvas.addEventListener("mousewheel", wheelHandler, false);
}
</script>
<canvas id="curvecanvas" class="rglWebGL" width="1" height="1">
</canvas>
<p id="curvedebug">
You must enable Javascript to view this page properly.
</p>
<script>curvergl.start();</script>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">propertySlider</span>( <span class="kw">list</span>(<span class="kw">ageSetter</span>(<span class="dt">births =</span> time, <span class="dt">ages =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">50</span>),
              <span class="dt">colors =</span> <span class="kw">c</span>(<span class="st">&quot;gray&quot;</span>, <span class="st">&quot;red&quot;</span>, <span class="st">&quot;gray&quot;</span>),
              <span class="dt">objids =</span> lineid, <span class="dt">prefixes =</span> <span class="st">&quot;curve&quot;</span>),
             <span class="kw">ageSetter</span>(<span class="dt">births =</span> <span class="dv">0</span>, <span class="dt">ages =</span> time,
                  <span class="dt">vertices =</span> xyz, <span class="dt">objids =</span> sphereid,
                  <span class="dt">prefixes =</span> <span class="st">&quot;curve&quot;</span>)),
             <span class="dt">maxS =</span> <span class="kw">max</span>(time) +<span class="st"> </span><span class="dv">50</span>)</code></pre>
<script>curvergl.input8862af1bda0 = function(value){
   (  function(time){
    var ages = [-Infinity, 0,0,50, Infinity];
    var births = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500];
    var j = new Array(births.length);
    var p = new Array(births.length);
    var colors = [0.745098,0.745098,0.745098,0.745098,0.745098,0.745098,1,0,0,0.745098,0.745098,0.745098,0.745098,0.745098,0.745098];
    for (var i = 0; i < births.length; i++) {
      var age = time - births[i];
      for (var j0 = 1; age > ages[j0]; j0++);
      if (ages[j0] == Infinity)
        p[i] = 1;       
      else if (ages[j0] > ages[j0-1])
        p[i] = (ages[j0] - age)/(ages[j0] - ages[j0-1]);
      else
        p[i] = 0;
      j[i] = j0;
    }
    var propvals = curvergl.values[59];
    var stride = curvergl.offsets[59]["stride"];
    var ofs = curvergl.offsets[59]["cofs"];
    if (ofs >= 0) {
      for (var i = 0; i < births.length; i++) {
        propvals[i*stride + ofs + 0] = p[i]*colors[3*(j[i]-1) + 0] + (1-p[i])*colors[3*j[i] + 0];
        propvals[i*stride + ofs + 1] = p[i]*colors[3*(j[i]-1) + 1] + (1-p[i])*colors[3*j[i] + 1];
        propvals[i*stride + ofs + 2] = p[i]*colors[3*(j[i]-1) + 2] + (1-p[i])*colors[3*j[i] + 2];
      }
    } else 
        alert("'colors' property not found in object 59");
    curvergl.values[59] = propvals;
    if (typeof curvergl.buf[59] !== "undefined") {
      var gl = curvergl.gl;
      gl.bindBuffer(gl.ARRAY_BUFFER, curvergl.buf[59]);
      gl.bufferData(gl.ARRAY_BUFFER, curvergl.values[59], gl.STATIC_DRAW);
    }
  })(value);
   (  function(time){
    var ages = [-Infinity, 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500, Infinity];
    var births = [0];
    var j = new Array(births.length);
    var p = new Array(births.length);
    var vertices = [1,0,0,1,0,0,0.9987503,0.09983342,1,0.9950042,0.1986693,2,0.9887711,0.2955202,3,0.9800666,0.3894183,4,0.9689124,0.4794255,5,0.9553365,0.5646425,6,0.9393727,0.6442177,7,0.921061,0.7173561,8,0.9004471,0.7833269,9,0.8775826,0.841471,10,0.8525245,0.8912074,11,0.8253356,0.9320391,12,0.7960838,0.9635582,13,0.7648422,0.9854497,14,0.7316889,0.997495,15,0.6967067,0.9995736,16,0.6599831,0.9916648,17,0.62161,0.9738476,18,0.5816831,0.9463001,19,0.5403023,0.9092974,20,0.497571,0.8632094,21,0.4535961,0.8084964,22,0.4084874,0.7457052,23,0.3623578,0.6754632,24,0.3153224,0.5984721,25,0.2674988,0.5155014,26,0.2190067,0.4273799,27,0.1699671,0.3349882,28,0.1205028,0.2392493,29,0.0707372,0.14112,30,0.02079483,0.04158066,31,-0.02919952,-0.05837414,32,-0.07912089,-0.1577457,33,-0.1288445,-0.2555411,34,-0.1782461,-0.3507832,35,-0.2272021,-0.4425204,36,-0.2755902,-0.5298361,37,-0.3232896,-0.6118579,38,-0.3701808,-0.6877662,39,-0.4161468,-0.7568025,40,-0.4610727,-0.8182771,41,-0.5048461,-0.8715758,42,-0.5473577,-0.9161659,43,-0.5885011,-0.9516021,44,-0.6281736,-0.9775301,45,-0.666276,-0.993691,46,-0.7027131,-0.9999233,47,-0.7373937,-0.9961646,48,-0.7702313,-0.9824526,49,-0.8011436,-0.9589243,50,-0.8300535,-0.9258147,51,-0.8568888,-0.8834547,52,-0.8815822,-0.8322674,53,-0.9040721,-0.7727645,54,-0.9243024,-0.7055403,55,-0.9422223,-0.6312666,56,-0.9577872,-0.5506855,57,-0.9709582,-0.4646022,58,-0.9817022,-0.3738767,59,-0.9899925,-0.2794155,60,-0.9958083,-0.1821625,61,-0.9991352,-0.0830894,62,-0.9999647,0.0168139,63,-0.9982948,0.1165492,64,-0.9941297,0.21512,65,-0.9874798,0.3115414,66,-0.9783617,0.4048499,67,-0.9667982,0.4941134,68,-0.9528182,0.5784398,69,-0.9364567,0.6569866,70,-0.9177545,0.728969,71,-0.8967584,0.7936679,72,-0.8735209,0.8504366,73,-0.8481,0.8987081,74,-0.8205594,0.938,75,-0.7909677,0.9679197,76,-0.7593991,0.9881682,77,-0.7259323,0.9985433,78,-0.6906511,0.9989413,79,-0.6536436,0.9893582,80,-0.6150024,0.9698898,81,-0.5748239,0.9407306,82,-0.5332088,0.9021718,83,-0.4902608,0.8545989,84,-0.4460875,0.7984871,85,-0.4007992,0.7343971,86,-0.3545091,0.6629692,87,-0.3073329,0.5849172,88,-0.2593885,0.5010209,89,-0.2107958,0.4121185,90,-0.1616762,0.3190984,91,-0.1121525,0.2228899,92,-0.06234851,0.1244544,93,-0.01238866,0.02477543,94,0.03760215,-0.07515112,95,0.08749898,-0.1743268,96,0.1371771,-0.2717606,97,0.1865124,-0.3664791,98,0.2353814,-0.4575359,99,0.2836622,-0.5440211,100,0.3312339,-0.6250706,101,0.3779777,-0.6998747,102,0.4237768,-0.7676858,103,0.4685167,-0.8278265,104,0.5120855,-0.8796958,105,0.5543743,-0.9227754,106,0.5952775,-0.956635,107,0.6346929,-0.9809362,108,0.6725218,-0.9954363,109,0.7086698,-0.9999902,110,0.7430464,-0.9945526,111,0.7755659,-0.9791777,112,0.8061468,-0.9540192,113,0.8347128,-0.9193285,114,0.8611924,-0.8754522,115,0.8855195,-0.8228286,116,0.9076333,-0.7619836,117,0.9274784,-0.6935251,118,0.9450054,-0.6181371,119,0.9601703,-0.5365729,120,0.9729353,-0.4496475,121,0.9832684,-0.3582293,122,0.9911439,-0.2632318,123,0.9965421,-0.1656042,124,0.9994494,-0.0663219,125,0.9998586,0.03362305,126,0.9977687,0.133232,127,0.9931849,0.2315098,128,0.9861187,0.3274744,129,0.9765876,0.420167,130,0.9646156,0.5086615,131,0.9502326,0.5920735,132,0.9334745,0.6695698,133,0.9143831,0.7403759,134,0.8930063,0.8037844,135,0.8693975,0.8591618,136,0.8436156,0.9059547,137,0.8157251,0.9436957,138,0.7857957,0.9720075,139,0.7539023,0.9906074,140,0.7201244,0.9993094,141,0.6845467,0.9980267,142,0.6472579,0.986772,143,0.6083513,0.9656578,144,0.5679242,0.9348951,145,0.5260775,0.8947912,146,0.4829159,0.8457468,147,0.4385473,0.7882521,148,0.3930826,0.7228813,149,0.3466353,0.6502878,150,0.2993217,0.5711969,151,0.2512598,0.4863987,152,0.20257,0.3967406,153,0.1533739,0.3031184,154,0.1037944,0.2064675,155,0.05395542,0.1077537,156,0.003981623,0.007963184,157,-0.04600213,-0.09190685,158,-0.09587089,-0.1908586,159,-0.1455,-0.2879033,160,-0.1947655,-0.3820714,161,-0.2435442,-0.472422,162,-0.2917141,-0.5580523,163,-0.3391549,-0.6381067,164,-0.3857479,-0.7117853,165,-0.4313768,-0.7783521,166,-0.4759275,-0.8371418,167,-0.5192887,-0.887567,168,-0.5613518,-0.929124,169,-0.6020119,-0.9613975,170,-0.6411673,-0.984065,171,-0.67872,-0.9969001,172,-0.7145764,-0.9997744,173,-0.7486466,-0.9926594,174,-0.7808457,-0.975626,175,-0.811093,-0.9488445,176,-0.839313,-0.9125824,177,-0.8654352,-0.8672022,178,-0.8893942,-0.8131571,179,-0.9111303,-0.7509872,180,-0.9305889,-0.6813138,181,-0.9477216,-0.6048328,182,-0.9624855,-0.5223086,183,-0.9748436,-0.4345656,184,-0.9847652,-0.3424806,185,-0.9922253,-0.2469737,186,-0.9972054,-0.148999,187,-0.999693,-0.04953564,188,-0.9996819,0.05042269,189,-0.9971722,0.1498772,190,-0.99217,0.2478342,191,-0.9846879,0.3433149,192,-0.9747445,0.4353654,193,-0.9623649,0.5230658,194,-0.9475798,0.6055399,195,-0.9304263,0.6819636,196,-0.9109472,0.7515734,197,-0.8891912,0.8136737,198,-0.8652126,0.8676441,199,-0.8390715,0.9129453,200,-0.8108332,0.9491246,201,-0.7805682,0.9758205,202,-0.7483522,0.9927664,203,-0.7142657,0.9997929,204,-0.6783939,0.9968298,205,-0.6408264,0.9839067,206,-0.6016573,0.9611527,207,-0.5609843,0.9287952,208,-0.5189091,0.8871575,209,-0.4755369,0.8366556,210,-0.4309762,0.7777942,211,-0.3853382,0.7111612,212,-0.3387371,0.6374226,213,-0.2912893,0.5573151,214,-0.2431134,0.471639,215,-0.1943299,0.3812505,216,-0.1450607,0.2870527,217,-0.09542885,0.1899867,218,-0.04555851,0.09102242,219,0.004425698,-0.008851309,220,0.05439885,-0.1086366,221,0.104236,-0.2073364,222,0.1538127,-0.3039646,223,0.2030049,-0.3975557,224,0.2516897,-0.4871745,225,0.2997453,-0.5719257,226,0.3470518,-0.6509623,227,0.3934909,-0.7234948,228,0.4389464,-0.7887983,229,0.4833048,-0.8462204,230,0.5264551,-0.8951874,231,0.5682896,-0.9352099,232,0.6087037,-0.9658882,233,0.6475963,-0.9869156,234,0.6848703,-0.998082,235,0.7204325,-0.999276,236,0.7541939,-0.9904855,237,0.7860703,-0.9717984,238,0.8159819,-0.9434015,239,0.843854,-0.9055784,240,0.8696168,-0.858707,241,0.8932061,-0.8032557,242,0.9145628,-0.7397786,243,0.9336336,-0.6689098,244,0.9503708,-0.5913575,245,0.9647326,-0.5078966,246,0.9766831,-0.4193609,247,0.9861923,-0.3266351,248,0.9932366,-0.2306457,249,0.9977983,-0.1323518,250,0.999866,-0.03273538,251,0.9994346,0.06720807,252,0.9965051,0.16648,253,0.9910849,0.2640885,254,0.9831874,0.3590584,255,0.9728326,0.4504406,256,0.9600461,0.5373222,257,0.94486,0.618835,258,0.9273123,0.6941647,259,0.9074468,0.7625585,260,0.8853131,0.823333,261,0.8609666,0.8758811,262,0.8344682,0.9196776,263,0.805884,0.9542851,264,0.7752855,0.9793576,265,0.7427492,0.9946448,266,0.7083564,0.9999937,267,0.6721931,0.9953511,268,0.6343496,0.9807632,269,0.5949207,0.9563759,270,0.5540047,0.9224328,271,0.511704,0.8792731,272,0.4681243,0.8273279,273,0.4233745,0.7671164,274,0.3775666,0.69924,275,0.3308149,0.6243771,276,0.2832363,0.5432757,277,0.2349498,0.456746,278,0.1860761,0.3656526,279,0.1367372,0.2709058,280,0.0870566,0.1734522,281,0.03715838,0.07426545,282,-0.01283271,-0.0256633,283,-0.06279172,-0.1253356,284,-0.1125938,-0.2237556,285,-0.1621144,-0.31994,286,-0.2112299,-0.4129275,287,-0.2598174,-0.5017893,288,-0.3077554,-0.5856373,289,-0.3549243,-0.6636339,290,-0.401206,-0.7349996,291,-0.4464849,-0.7990215,292,-0.4906478,-0.8550598,293,-0.5335844,-0.9025546,294,-0.5751873,-0.9410314,295,-0.6153525,-0.9701057,296,-0.6539796,-0.9894871,297,-0.6909722,-0.9989818,298,-0.7262377,-0.998495,299,-0.7596879,-0.9880316,300,-0.7912393,-0.9676961,301,-0.8208131,-0.9376917,302,-0.8483352,-0.8983182,303,-0.873737,-0.849969,304,-0.8969548,-0.7931272,305,-0.9179308,-0.7283608,306,-0.9366124,-0.6563168,307,-0.9529529,-0.577715,308,-0.9669116,-0.493341,309,-0.9784535,-0.4040376,310,-0.9875497,-0.3106973,311,-0.9941776,-0.2142525,312,-0.9983206,-0.1156671,313,-0.9999683,-0.01592586,314,-0.9991166,0.08397446,315,-0.9957676,0.1830357,316,-0.9899297,0.2802682,317,-0.9816175,0.3747003,318,-0.9708518,0.4653885,319,-0.9576595,0.5514267,320,-0.9420735,0.6319552,321,-0.9241328,0.7061695,322,-0.9038823,0.7733279,323,-0.8813725,0.8327595,324,-0.8566597,0.8838704,325,-0.8298058,0.92615,326,-0.8008778,0.9591758,327,-0.769948,0.9826179,328,-0.7370937,0.9962419,329,-0.7023971,0.9999119,330,-0.6659448,0.993591,331,-0.627828,0.9773425,332,-0.588142,0.9513287,333,-0.546986,0.9158096,334,-0.5044627,0.87114,335,-0.4606786,0.8177663,336,-0.415743,0.7562217,337,-0.3697683,0.6871211,338,-0.3228693,0.6111551,339,-0.2751633,0.5290827,340,-0.2267696,0.4417238,341,-0.1778091,0.3499514,342,-0.1284041,0.2546823,343,-0.07867819,0.1568686,344,-0.02875563,0.05748748,345,0.02123881,-0.04246803,346,0.07118016,-0.1419992,347,0.1209436,-0.2401116,348,0.1704047,-0.3358249,349,0.21944,-0.4281827,350,0.2679267,-0.5162622,351,0.3157438,-0.5991834,352,0.3627716,-0.6761178,353,0.4088927,-0.7462967,354,0.4539918,-0.8090188,355,0.4979562,-0.8636574,356,0.5406759,-0.9096667,357,0.5820443,-0.9465868,358,0.6219578,-0.974049,359,0.6603167,-0.9917789,360,0.6970252,-0.9995991,361,0.7319915,-0.9974318,362,0.7651282,-0.9852984,363,0.7963525,-0.9633202,364,0.8255863,-0.9317169,365,0.8527566,-0.8908041,366,0.8777954,-0.8409908,367,0.9006402,-0.7827745,368,0.9212338,-0.716737,369,0.9395249,-0.6435381,370,0.9554676,-0.5639092,371,0.9690222,-0.4786459,372,0.9801547,-0.3886001,373,0.9888373,-0.2946716,374,0.9950484,-0.1977988,375,0.9987724,-0.09894966,376,0.9999999,0.0008881568,377,0.998728,0.1007171,378,0.9949597,0.1995397,379,0.9887046,0.2963686,380,0.9799783,0.3902362,381,0.9688025,0.4802048,382,0.9552052,0.5653753,383,0.9392203,0.6448967,384,0.920888,0.7179746,385,0.9002539,0.7838787,386,0.8773696,0.8419505,387,0.8522923,0.8916099,388,0.8250848,0.9323605,389,0.795815,0.9637954,390,0.764556,0.9856003,391,0.7313861,0.9975574,392,0.6963881,0.9995473,393,0.6596495,0.99155,394,0.621262,0.9736455,395,0.5813218,0.9460126,396,0.5399286,0.9089275,397,0.4971858,0.8627606,398,0.4532003,0.8079734,399,0.4080821,0.7451132,400,0.3619438,0.674808,401,0.3149009,0.5977604,402,0.2670709,0.5147401,403,0.2185734,0.4265768,404,0.1695295,0.3341512,405,0.1200619,0.2383869,406,0.07029423,0.1402407,407,0.02035084,0.04069326,408,-0.02964341,-0.05926076,409,-0.07956357,-0.1586227,410,-0.1292849,-0.2563997,411,-0.178683,-0.3516148,412,-0.2276345,-0.4433167,413,-0.2760171,-0.5305892,414,-0.3237098,-0.6125602,415,-0.3705933,-0.6884106,416,-0.4165506,-0.7573827,417,-0.4614667,-0.8187873,418,-0.5052294,-0.8720109,419,-0.5477293,-0.9165215,420,-0.5888601,-0.9518747,421,-0.6285191,-0.977717,422,-0.6666071,-0.9937902,423,-0.703029,-0.9999339,424,-0.7376936,-0.9960865,425,-0.7705144,-0.9822866,426,-0.8014093,-0.958672,427,-0.8303011,-0.9254786,428,-0.8571176,-0.8830382,429,-0.8817917,-0.8317747,430,-0.9042618,-0.7722005,431,-0.9244718,-0.7049106,432,-0.942371,-0.6305776,433,-0.9579148,-0.549944,434,-0.9710643,-0.4638155,435,-0.9817867,-0.3730528,436,-0.9900551,-0.2785626,437,-0.9958488,-0.1812891,438,-0.9991535,-0.08220428,439,-0.9999608,0.01770193,440,-0.9982688,0.1174313,441,-0.9940815,0.2159873,442,-0.9874096,0.3123852,443,-0.9782697,0.4056619,444,-0.9666846,0.4948853,445,-0.9526833,0.579164,446,-0.9363008,0.6576559,447,-0.9175781,0.7295767,448,-0.8965618,0.7942079,449,-0.8733046,0.8509035,450,-0.8478647,0.8990972,451,-0.8203055,0.9383075,452,-0.7906959,0.9681424,453,-0.7591101,0.9883041,454,-0.7256268,0.9985909,455,-0.6903299,0.9989001,456,-0.6533075,0.9892286,457,-0.6146521,0.9696731,458,-0.5744605,0.940429,459,-0.532833,0.9017883,460,-0.4898737,0.8541374,461,-0.44569,0.7979521,462,-0.4003923,0.733794,463,-0.3540938,0.6623041,464,-0.3069103,0.5841966,465,-0.2589596,0.500252,466,-0.2103617,0.4113091,467,-0.161238,0.3182565,468,-0.1117112,0.222024,469,-0.06190529,0.1235731,470,-0.01194462,0.02388753,471,0.03804591,-0.07603674,472,0.08794135,-0.1752013,473,0.137617,-0.2726153,474,0.1869486,-0.3673053,475,0.235813,-0.4583255,476,0.284088,-0.5447661,477,0.3316529,-0.6257637,478,0.3783888,-0.7005088,479,0.424179,-0.7682547,480,0.4689089,-0.8283244,481,0.5124669,-0.8801178,482,0.5547439,-0.9231173,483,0.5956343,-0.9568933,484,0.635036,-0.9811084,485,0.6728504,-0.9955206,486,0.708983,-0.9999859,487,0.7433436,-0.9944596,488,0.7758461,-0.978997,489,0.8064095,-0.9537527,490,0.8349573,-0.9189787,491,0.861418,-0.8750226,492,0.8857257,-0.8223235,493,0.9078196,-0.7614081,494,0.9276444,-0.692885,495,0.9451505,-0.6174387,496,0.9602943,-0.5358232,497,0.9730378,-0.448854,498,0.9833492,-0.3573999,499,0.9912028,-0.2623749,500,0.9912028,-0.2623749,500];
    for (var i = 0; i < births.length; i++) {
      var age = time - births[i];
      for (var j0 = 1; age > ages[j0]; j0++);
      if (ages[j0] == Infinity)
        p[i] = 1;       
      else if (ages[j0] > ages[j0-1])
        p[i] = (ages[j0] - age)/(ages[j0] - ages[j0-1]);
      else
        p[i] = 0;
      j[i] = j0;
    }
    var propvals = curvergl.values[64];
    var stride = curvergl.offsets[64]["stride"];
    var ofs = curvergl.offsets[64]["vofs"];
    if (ofs >= 0) {
      for (var i = 0; i < births.length; i++) {
        propvals[i*stride + ofs + 0] = p[i]*vertices[3*(j[i]-1) + 0] + (1-p[i])*vertices[3*j[i] + 0];
        propvals[i*stride + ofs + 1] = p[i]*vertices[3*(j[i]-1) + 1] + (1-p[i])*vertices[3*j[i] + 1];
        propvals[i*stride + ofs + 2] = p[i]*vertices[3*(j[i]-1) + 2] + (1-p[i])*vertices[3*j[i] + 2];
      }
    } else 
        alert("'vertices' property not found in object 64");
    curvergl.values[64] = propvals;
    if (typeof curvergl.buf[64] !== "undefined") {
      var gl = curvergl.gl;
      gl.bindBuffer(gl.ARRAY_BUFFER, curvergl.buf[64]);
      gl.bufferData(gl.ARRAY_BUFFER, curvergl.values[64], gl.STATIC_DRAW);
    }
  })(value);
   curvergl.drawScene();
   var lvalue = Math.round((value - 0)/1);
   var labels = ['0','0','0','0','0','0','10','10','10','10','10','10','10','10','10','20','20','20','20','20','20','20','20','20','20','20','30','30','30','30','30','30','30','30','30','40','40','40','40','40','40','40','40','40','40','40','50','50','50','50','50','50','50','50','50','60','60','60','60','60','60','60','60','60','60','60','70','70','70','70','70','70','70','70','70','80','80','80','80','80','80','80','80','80','80','80','90','90','90','90','90','90','90','90','90','100','100','100','100','100','100','100','100','100','100','100','110','110','110','110','110','110','110','110','110','120','120','120','120','120','120','120','120','120','120','120','130','130','130','130','130','130','130','130','130','140','140','140','140','140','140','140','140','140','140','140','150','150','150','150','150','150','150','150','150','160','160','160','160','160','160','160','160','160','160','160','170','170','170','170','170','170','170','170','170','180','180','180','180','180','180','181','182','183','184','185','186','187','188','189','190','191','192','193','194','195','196','197','198','199','200','201','202','203','204','205','206','207','208','209','210','211','212','213','214','215','216','217','218','219','220','221','222','223','224','225','226','227','228','229','230','231','232','233','234','235','236','237','238','239','240','241','242','243','244','245','246','247','248','249','250','251','252','253','254','255','256','257','258','259','260','261','262','263','264','265','266','267','268','269','270','271','272','273','274','275','276','277','278','279','280','281','282','283','284','285','286','287','288','289','290','291','292','293','294','295','296','297','298','299','300','301','302','303','304','305','306','307','308','309','310','311','312','313','314','315','316','317','318','319','320','321','322','323','324','325','326','327','328','329','330','331','332','333','334','335','336','337','338','339','340','341','342','343','344','345','346','347','348','349','350','351','352','353','354','355','356','357','358','359','360','361','362','363','364','365','366','367','368','369','370','371','372','373','374','375','376','377','378','379','380','380','380','380','380','380','390','390','390','390','390','390','390','390','390','400','400','400','400','400','400','400','400','400','400','400','410','410','410','410','410','410','410','410','410','420','420','420','420','420','420','420','420','420','420','420','430','430','430','430','430','430','430','430','430','440','440','440','440','440','440','440','440','440','440','440','450','450','450','450','450','450','450','450','450','460','460','460','460','460','460','460','460','460','460','460','470','470','470','470','470','470','470','470','470','480','480','480','480','480','480','480','480','480','480','480','490','490','490','490','490','490','490','490','490','500','500','500','500','500','500','500','500','500','500','500','510','510','510','510','510','510','510','510','510','520','520','520','520','520','520','520','520','520','520','520','530','530','530','530','530','530','530','530','530','540','540','540','540','540','540','540','540','540','540','540','550','550','550','550','550']; 
  label = document.getElementById('input8862af1bda0text');
  if (label !== null) label.value = labels[lvalue];
}
curvergl.input8862af1bda0(0);</script>
<input type="range" min="0" max="550" step="1" value="0" id="input8862af1bda0" name="input8862af1bda0" oninput="curvergl.input8862af1bda0(this.valueAsNumber)">
<output id="input8862af1bda0text" for="input8862af1bda0">
0
</output>
</div>
<div id="user-defined-mouse-controls" class="section level2">
<h2>User Defined Mouse Controls</h2>
<p><code>rgl</code> allows user defined mouse controls. For these to work within WebGL, you will need to write a Javascript version as well as the R version. This isnt easy: R provides a lot of support functions which are not easily available in Javascript.</p>
<p>TODO: write a simple mouse control.</p>
</div>
<div id="reference-for-rglclass" class="section level2">
<h2>Reference for <code>rglClass</code></h2>
<p>In writing the <code>writeWebGL()</code> function, I havent tried to prevent access to anything. On the other hand, I havent provided access to everything. The parts documented here should remain relatively stable (unless indicated otherwise). Users may also consult the source to <code>writeWebGL</code>, but should be aware that anything that isnt documented here is subject to change without notice.</p>
<p><a name="rglClass"><code>rglClass</code></a></p>
<p>As documented in <a href="#writeWebGL"><code>writeWebGL</code></a>, the call</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">writeWebGL</span>(..., <span class="dt">prefix =</span> <span class="st">&quot;&lt;prefix&gt;&quot;</span>)</code></pre>
<p>will create a global object on the output page with name <code>&lt;prefix&gt;rgl</code> and Javascript class <code>rglClass</code>. This class has a large number of properties and methods, some of which are designed to be available for use by other code on the web page.</p>
<p>Most of the properties are stored as Javascript <code>Array</code> objects, indexed by the <code>rgl</code> id of the subscene to which they apply. There are also Javascript methods attached to the <code>rglClass</code> class.</p>
<div id="methods" class="section level3">
<h3>Methods</h3>
<p><a name="drawScene"><code>drawScene()</code></a></p>
<p>After any change that will affect the display, code should call <code>&lt;prefix&gt;rgl.drawScene()</code> to redraw the scene.</p>
<p><a name="inSubscene"><code>inSubscene()</code></a>, <a name="addToSubscene"><code>addToSubscene()</code></a>, <a name="delFromSubscene"><code>delFromSubscene()</code></a></p>
<p>These methods each take two arguments: <code>id</code> and <code>subscene</code>, which should be the <code>rgl</code> ids of an object and a subscene. <code>inSubscene</code> tests whether <code>id</code> is already included in the subscene, and the others add it or delete it from the subscene.</p>
<p><a name="getSubsceneEntries"><code>getSubsceneEntries()</code></a></p>
<p>This function takes a subscene id as argument, and returns an <code>Array</code> containing all of the ids displayed in that subscene.</p>
<p><a name="setSubsceneEntries"><code>setSubsceneEntries()</code></a></p>
<p>This takes an <code>Array</code> of ids and a subscene id as arguments, and sets the contents of the subscene to the ids.</p>
</div>
<div id="properties" class="section level3">
<h3>Properties</h3>
<p><a name="FOV"><code>FOV</code></a>, <a name="listeners"><code>listeners</code></a>, <a name="userMatrix"><code>userMatrix</code></a>, <a name="zoom"><code>zoom</code></a></p>
<p>These correspond to the <a href="#par3d"><code>par3d</code></a> properties with the same names.</p>
<ul>
<li><code>FOV</code> and <code>zoom</code> are arrays of numbers.</li>
<li><code>userMatrix</code> is an array of <code>CanvasMatrix4</code> objects (documented in the file <code>system.file(&quot;WebGL/CanvasMatrix.src.js&quot;)</code>.</li>
<li>Each <code>listeners</code> item is itself an array of subscene ids that listen to mouse actions, i.e. <code>listeners[19]</code> would contain all subscene ids that respond to mouse actions in subscene 19.</li>
</ul>
<p><a name="viewport"><code>viewport</code></a></p>
<p>This property also corresponds to the <a href="#par3d"><code>par3d</code></a> property, but should be considered to be read-only.</p>
<p><a name="drawFns"><code>drawFns</code></a>, <a name="clipFns"><code>clipFns</code></a></p>
<p>These two arrays contain the code to display each object in the scene. The functions in the <code>drawFns</code> array are called for each object each time it is displayed. The <code>clipFns</code> functions are called when objects being clipped are drawn.</p>
<p><a name="values"><code>values</code></a>, <a name="offsets"><code>offsets</code></a></p>
<p>Most of the data about each object in a scene is contained in the <code>values</code> property. This is an array, indexed by object id. The individual entries are numeric arrays. Though they are singly-indexed, the entries are meant to be interpreted as matrices stored by row. The first 3 columns are generally the coordinates of a vertex, and remaining columns correspond to other values from <a href="#rgl.attrib"><code>rgl.attrib</code></a>.</p>
<p>The <code>offsets</code> property gives the (0-based) offset of the first column for a particular attribute in a named object. Not all columns will be present in every object; if not present, the corresponding <code>offsets</code> entry will be <code>-1</code>. The entries are</p>
<table>
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="left">Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">vofs</td>
<td align="left">Offset to 3 columns of vertex data in XYZ order</td>
</tr>
<tr class="even">
<td align="left">cofs</td>
<td align="left">Offset to 4 columns of colour data in RGBA order</td>
</tr>
<tr class="odd">
<td align="left">nofs</td>
<td align="left">Offset to 3 columns of normal data</td>
</tr>
<tr class="even">
<td align="left">radofs</td>
<td align="left">Offset to 1 column of sphere radius data</td>
</tr>
<tr class="odd">
<td align="left">oofs</td>
<td align="left">Offset to 2 columns of text or sprite origin data</td>
</tr>
<tr class="even">
<td align="left">tofs</td>
<td align="left">Offset to 2 columns of texture coordinates</td>
</tr>
<tr class="odd">
<td align="left">stride</td>
<td align="left">Total number of columns in <code>values</code></td>
</tr>
</tbody>
</table>
<p>For example, to find the blue colour entry for vertex <code>i</code> in an object, one would first check if <code>offsets[&quot;cofs&quot;]</code> was <code>-1</code>, indicating that no colour information was present. If not, the entry could be found using</p>
<pre><code>values[offsets[&quot;stride&quot;]*(i-1) + offsets[&quot;cofs&quot;] + 2]</code></pre>
<p>This assumes <code>i</code> is specified using 1-based vertex counting as in R, and writes <code>values</code> and <code>offsets</code> instead of the fully specified <code>&lt;prefix&gt;rgl.values</code> and <code>&lt;prefix&gt;rgl.offsets</code> for clarity.</p>
<p>Changes to <code>values</code> need to be pushed to the graphics system to be reflected in the scene; see the calls to <code>gl.bindBuffer</code> and <code>gl.bufferData</code> in the source to <a href="#propertySlider"><code>propertySlider</code></a> for details.</p>
</div>
</div>
<div id="index" class="section level2">
<h2>Index</h2>
<p>The following functions and <code>rglClass</code> properties and methods are described in this document:<br></p>
<div class="nostripes">
<table>
<tbody>
<tr class="odd">
<td align="left"><a href="#FOV">FOV</a></td>
<td align="left"><a href="#delFromSubscene">delFromSubscene</a></td>
<td align="left"><a href="#listeners">listeners</a></td>
<td align="left"><a href="#propertySlider">propertySlider</a></td>
<td align="left"><a href="#userMatrix">userMatrix</a></td>
</tr>
<tr class="even">
<td align="left"><a href="#addToSubscene">addToSubscene</a></td>
<td align="left"><a href="#drawFns">drawFns</a></td>
<td align="left"><a href="#offsets">offsets</a></td>
<td align="left"><a href="#rglClass">rglClass</a></td>
<td align="left"><a href="#values">values</a></td>
</tr>
<tr class="odd">
<td align="left"><a href="#ageSetter">ageSetter</a></td>
<td align="left"><a href="#drawScene">drawScene</a></td>
<td align="left"><a href="#par3dinterpSetter">par3dinterpSetter</a></td>
<td align="left"><a href="#setSubsceneEntries">setSubsceneEntries</a></td>
<td align="left"><a href="#viewport">viewport</a></td>
</tr>
<tr class="even">
<td align="left"><a href="#clipFns">clipFns</a></td>
<td align="left"><a href="#getSubsceneEntries">getSubsceneEntries</a></td>
<td align="left"><a href="#propertySetter">propertySetter</a></td>
<td align="left"><a href="#subsetSlider">subsetSlider</a></td>
<td align="left"><a href="#zoom">zoom</a></td>
</tr>
<tr class="odd">
<td align="left"><a href="#clipplaneSlider">clipplaneSlider</a></td>
<td align="left"><a href="#inSubscene">inSubscene</a></td>
<td align="left"><a href="#propertySlider">propertySlider</a></td>
<td align="left"><a href="#toggleButton">toggleButton</a></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
